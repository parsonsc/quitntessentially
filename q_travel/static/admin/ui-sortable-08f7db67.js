!function(e,t){t.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(e,o,n){return{require:"?ngModel",link:function(i,l,r,a){function s(e,t){return t&&"function"==typeof t?function(o,n){e(o,n),t(o,n)}:e}function u(e,t){var o=e.sortable("option","helper");return"clone"===o||"function"==typeof o&&t.item.sortable.isCustomHelperUsed()}var c,d={},m={receive:null,remove:null,start:null,stop:null,update:null},p={helper:null};return t.extend(d,e,i.$eval(r.uiSortable)),t.element.fn&&t.element.fn.jquery?(a?(i.$watch(r.ngModel+".length",function(){o(function(){l.data("ui-sortable")&&l.sortable("refresh")})}),m.start=function(e,t){t.item.sortable={index:t.item.index(),cancel:function(){t.item.sortable._isCanceled=!0},isCanceled:function(){return t.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!t.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:t.item.sortable._isCustomHelperUsed}},m.activate=function(){c=l.contents();var e=l.sortable("option","placeholder");if(e&&e.element&&"function"==typeof e.element){var o=e.element();o=t.element(o);var n=l.find('[class="'+o.attr("class")+'"]');c=c.not(n)}},m.update=function(e,t){t.item.sortable.received||(t.item.sortable.dropindex=t.item.index(),t.item.sortable.droptarget=t.item.parent(),l.sortable("cancel")),u(l,t)&&!t.item.sortable.received&&"parent"===l.sortable("option","appendTo")&&(c=c.not(c.last())),c.appendTo(l),t.item.sortable.received&&(c=null),t.item.sortable.received&&!t.item.sortable.isCanceled()&&i.$apply(function(){a.$modelValue.splice(t.item.sortable.dropindex,0,t.item.sortable.moved)})},m.stop=function(e,t){!t.item.sortable.received&&"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()?i.$apply(function(){a.$modelValue.splice(t.item.sortable.dropindex,0,a.$modelValue.splice(t.item.sortable.index,1)[0])}):"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()||u(l,t)||c.appendTo(l),c=null},m.receive=function(e,t){t.item.sortable.received=!0},m.remove=function(e,t){"dropindex"in t.item.sortable||(l.sortable("cancel"),t.item.sortable.cancel()),t.item.sortable.isCanceled()||i.$apply(function(){t.item.sortable.moved=a.$modelValue.splice(t.item.sortable.index,1)[0]})},p.helper=function(e){return e&&"function"==typeof e?function(t,o){var n=e(t,o);return o.sortable._isCustomHelperUsed=o!==n,n}:e},i.$watch(r.uiSortable,function(e){l.data("ui-sortable")&&t.forEach(e,function(e,t){m[t]?("stop"===t&&(e=s(e,function(){i.$apply()})),e=s(m[t],e)):p[t]&&(e=p[t](e)),l.sortable("option",t,e)})},!0),t.forEach(m,function(e,t){d[t]=s(e,d[t])})):n.info("ui.sortable: ngModel not provided!",l),void l.sortable(d)):void n.error("ui.sortable: jQuery should be included before AngularJS!")}}}])}(window,angular);