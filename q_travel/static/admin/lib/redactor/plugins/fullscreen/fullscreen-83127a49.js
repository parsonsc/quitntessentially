if(!RedactorPlugins)var RedactorPlugins={};RedactorPlugins.fullscreen={init:function(){this.fullscreen=!1,this.buttonAdd("fullscreen","Fullscreen",$.proxy(this.toggleFullscreen,this)),this.opts.fullscreen&&this.toggleFullscreen()},enableFullScreen:function(){if(this.buttonChangeIcon("fullscreen","normalscreen"),this.buttonActive("fullscreen"),this.fullscreen=!0,this.opts.toolbarExternal&&(this.toolcss={},this.boxcss={},this.toolcss.width=this.$toolbar.css("width"),this.toolcss.top=this.$toolbar.css("top"),this.toolcss.position=this.$toolbar.css("position"),this.boxcss.top=this.$box.css("top")),this.fsheight=this.$editor.height(),this.opts.iframe&&(this.fsheight=this.$frame.height()),this.opts.maxHeight&&this.$editor.css("max-height",""),this.opts.iframe)var t=this.get();this.$fullscreenPlaceholder||(this.$fullscreenPlaceholder=$("<div/>")),this.$fullscreenPlaceholder.insertAfter(this.$box),this.$box.appendTo(document.body),this.$box.addClass("redactor_box_fullscreen"),$("body, html").css("overflow","hidden"),this.opts.iframe&&this.fullscreenIframe(t),this.fullScreenResize(),$(window).resize($.proxy(this.fullScreenResize,this)),$(document).scrollTop(0,0),this.focus(),this.observeStart()},disableFullScreen:function(){this.buttonRemoveIcon("fullscreen","normalscreen"),this.buttonInactive("fullscreen"),this.fullscreen=!1,$(window).off("resize",$.proxy(this.fullScreenResize,this)),$("body, html").css("overflow",""),this.$box.insertBefore(this.$fullscreenPlaceholder),this.$fullscreenPlaceholder.remove(),this.$box.removeClass("redactor_box_fullscreen").css({width:"auto",height:"auto"}),this.opts.iframe&&(html=this.$editor.html()),this.opts.iframe?this.fullscreenIframe(html):this.sync();var t=this.fsheight;this.opts.autoresize&&(t="auto"),this.opts.maxHeight&&this.$editor.css("max-height",this.opts.maxHeight),this.opts.toolbarExternal&&(this.$box.css("top",this.boxcss.top),this.$toolbar.css({width:this.toolcss.width,top:this.toolcss.top,position:this.toolcss.position})),this.opts.iframe?this.$frame.css("height",t):this.$editor.css("height",t),this.$editor.css("height",t),this.focus(),this.observeStart()},toggleFullscreen:function(){this.fullscreen?this.disableFullScreen():this.enableFullScreen()},fullscreenIframe:function(t){this.$editor=this.$frame.contents().find("body"),this.$editor.attr({contenteditable:!0,dir:this.opts.direction}),this.$editor[0]&&(this.document=this.$editor[0].ownerDocument,this.window=this.document.defaultView||window),this.iframeAddCss(),this.opts.fullpage?this.setFullpageOnInit(t):this.set(t),this.opts.wym&&this.$editor.addClass("redactor_editor_wym")},fullScreenResize:function(){if(!this.fullscreen)return!1;var t=this.$toolbar.height(),s=this.$editor.css("padding-top").replace("px",""),e=$(window).height()-t;this.$box.width($(window).width()-2).height(e+t),this.opts.toolbarExternal&&(this.$toolbar.css({top:"0px",position:"absolute",width:"100%"}),this.$box.css("top",t+"px")),this.opts.iframe?setTimeout($.proxy(function(){this.$frame.height(e)},this),1):this.$editor.height(e-2*s),this.$editor.height(e)}};