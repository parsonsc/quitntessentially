(function(){define(["bs-form"],function(){return angular.module("schemaForm").directive("geocode",[function(){return{restict:"A",scope:!0,link:function(e,a,o){var n,t,r;return t=e.$eval(o.geocode),n=t.model||{},e.m=n,e.lat=n.lat||0,e.lng=n.lng||0,e.address=n.address,e.marker=null,e.map=null,e.geocoder=null,e.moveMarker=function(a,o){var n;return n=new google.maps.LatLng(a,o),e.map.setCenter(n),e.marker.setPosition(n)},e.locate=function(a){return e.geocoder||(e.geocoder=new google.maps.Geocoder),a.address.length>5?e.geocoder.geocode({address:a.address},function(o,n){var t;return n===google.maps.GeocoderStatus.OK?(t=o[0].geometry.location,a.lat=t.lat(),a.lng=t.lng(),e.lat=a.lat,e.lng=a.lng,e.$digest()):void 0}):void 0},e.createMap=function(){var a;return a={zoom:8,center:new google.maps.LatLng(e.lat,e.lng)},e.map=new google.maps.Map($(".map-canvas")[0],a),e.createMarker(),e.$watch("[lat,lng]",function(){return e.moveMarker(e.lat,e.lng)},!0)},e.createMarker=function(){return e.marker=new google.maps.Marker({position:new google.maps.LatLng(e.lat,e.lng),map:e.map})},window.mapInitialize=function(){return e.createMap()},window.google&&window.google.maps?e.createMap():(r=document.createElement("script"),r.type="text/javascript",r.src="https://maps.googleapis.com/maps/api/js?v=3&callback=mapInitialize",document.body.appendChild(r))}}}])})}).call(this);