(function(){define(["bs-form"],function(){return angular.module("schemaForm").directive("geocode",[function(){return{restict:"A",scope:!0,link:function(e,a,o){var t,n,r;return n=e.$eval(o.geocode),t=n.model||{},e.m=t,e.lat=t.lat||0,e.lng=t.lng||0,e.address=t.address,e.marker=null,e.map=null,e.geocoder=null,e.moveMarker=function(a,o){var t;return t=new google.maps.LatLng(a,o),e.map.setCenter(t),e.marker.setPosition(t)},e.locate=function(a){return e.geocoder||(e.geocoder=new google.maps.Geocoder),a.address.length>5?e.geocoder.geocode({address:a.address},function(o,t){var n;return t===google.maps.GeocoderStatus.OK?(n=o[0].geometry.location,a.lat=parseFloat(n.lat()).toFixed(6),a.lng=parseFloat(n.lng()).toFixed(6),e.lat=a.lat,e.lng=a.lng,e.$digest()):void 0}):void 0},e.createMap=function(){var a;return a={zoom:8,center:new google.maps.LatLng(e.lat,e.lng)},e.map=new google.maps.Map($(".map-canvas")[0],a),e.createMarker(),e.$watch("[lat,lng]",function(){return e.moveMarker(e.lat,e.lng)},!0)},e.createMarker=function(){return e.marker=new google.maps.Marker({position:new google.maps.LatLng(e.lat,e.lng),map:e.map})},window.mapInitialize=function(){return e.createMap()},window.google&&window.google.maps?e.createMap():(r=document.createElement("script"),r.type="text/javascript",r.src="https://maps.googleapis.com/maps/api/js?v=3&callback=mapInitialize",document.body.appendChild(r))}}}])})}).call(this);