(function(){define(["selectize","bs-form"],function(){return angular.module("schemaForm").directive("selectize",["$timeout",function(e){return{restrict:"A",scope:!0,require:"ngModel",link:function(l,t,n,u){return e(function(){var e,a,i,r,c,o;return e=$(t),r=l.$eval(n.selectize),i=!1,c=r.url||null,e.data("url")&&(c=e.data("url")),e.hasClass("tags")&&(r.create=!0,u.$viewValue=u.$viewValue||[],r.options=u.$viewValue.map(function(e){return{name:e,value:e}})),r.searchField=["name"],r.labelField="name",r.valueField="value",c&&(r.load=function(e,l){return $.getJSON(c,{type:model.type,q:e},l)}),a=e.selectize(r)[0].selectize,a.on("change",function(e){return u&&u.$setViewValue(e),l.$apply()}),u.$viewValue&&(o=u.$viewValue,null!=o)?a.setValue(o):void 0})}}}])})}).call(this);