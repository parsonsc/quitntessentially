(function(){define(["bs-form","cropper"],function(){return angular.module("schemaForm").directive("cropper",["$window","$http",function(r,t){return{restrict:"A",link:function(o,e,n){var c,a,i;return i=parseInt(n.width,10),c=parseInt(n.height,10),a=n.src,o.action="crop",o.actionValue="Crop",o.actionClass="btn-default",o.toggleCrop=function(){var r;return"crop"===o.action?(o.action="save",o.actionValue="Save",o.actionClass="btn-success",$(".crop-img",e).cropper({aspectRatio:i/c,minWidth:i,minHeight:c})):(o.actionValue="Crop",o.actionClass="btn-success",r=$(".crop-img",e).cropper("getData"),o.saveCrop(r),$(".crop-img",e).cropper("destroy")),!0},o.saveCrop=function(o){return t.post(r.location.href,o).success(function(){return alert("Image Cropped")}).error(function(){return alert("Error Cropping Image")})}}}}])})}).call(this);