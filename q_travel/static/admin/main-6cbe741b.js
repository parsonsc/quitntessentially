!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=Z.type(e);return"function"===n||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(Z.isFunction(t))return Z.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return Z.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(at.test(t))return Z.filter(t,e,n);t=Z.filter(t,e)}return Z.grep(e,function(e){return V.call(t,e)>=0!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=ft[e]={};return Z.each(e.match(pt)||[],function(e,n){t[n]=!0}),t}function s(){J.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+Math.random()}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(bt,"-$1").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:yt.test(n)?Z.parseJSON(n):n}catch(r){}$t.set(e,t,n)}else n=void 0;return n}function c(){return!0}function u(){return!1}function h(){try{return J.activeElement}catch(e){}}function d(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Dt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n=0,i=e.length;i>n;n++)vt.set(e[n],"globalEval",!t||vt.get(t[n],"globalEval"))}function g(e,t){var n,i,r,o,s,a,l,c;if(1===t.nodeType){if(vt.hasData(e)&&(o=vt.access(e),s=vt.set(t,o),c=o.events)){delete s.handle,s.events={};for(r in c)for(n=0,i=c[r].length;i>n;n++)Z.event.add(t,r,c[r][n])}$t.hasData(e)&&(a=$t.access(e),l=Z.extend({},a),$t.set(t,l))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],n):n}function $(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ct.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function y(t,n){var i,r=Z(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:Z.css(r[0],"display");return r.detach(),o}function b(e){var t=J,n=Ht[e];return n||(n=y(e,t),"none"!==n&&n||(jt=(jt||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=jt[0].contentDocument,t.write(),t.close(),n=y(e,t),jt.detach()),Ht[e]=n),n}function w(e,t,n){var i,r,o,s,a=e.style;return n=n||zt(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||Z.contains(e.ownerDocument,e)||(s=Z.style(e,t)),qt.test(s)&&Ut.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function x(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,r=Yt.length;r--;)if(t=Yt[r]+n,t in e)return t;return i}function C(e,t,n){var i=Wt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function S(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Z.css(e,n+xt[o],!0,r)),i?("content"===n&&(s-=Z.css(e,"padding"+xt[o],!0,r)),"margin"!==n&&(s-=Z.css(e,"border"+xt[o]+"Width",!0,r))):(s+=Z.css(e,"padding"+xt[o],!0,r),"padding"!==n&&(s+=Z.css(e,"border"+xt[o]+"Width",!0,r)));return s}function _(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=zt(e),s="border-box"===Z.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=w(e,t,o),(0>r||null==r)&&(r=e.style[t]),qt.test(r))return r;i=s&&(X.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+S(e,t,n||(s?"border":"content"),i,o)+"px"}function E(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=vt.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&kt(i)&&(o[s]=vt.access(i,"olddisplay",b(i.nodeName)))):(r=kt(i),"none"===n&&r||vt.set(i,"olddisplay",r?n:Z.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function T(e,t,n,i,r){return new T.prototype.init(e,t,n,i,r)}function O(){return setTimeout(function(){Xt=void 0}),Xt=Z.now()}function A(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=xt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function P(e,t,n){for(var i,r=(nn[t]||[]).concat(nn["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,t,e))return i}function N(e,t,n){var i,r,o,s,a,l,c,u,h=this,d={},p=e.style,f=e.nodeType&&kt(e),m=vt.get(e,"fxshow");n.queue||(a=Z._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Z.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=Z.css(e,"display"),u="none"===c?vt.get(e,"olddisplay")||b(e.nodeName):c,"inline"===u&&"none"===Z.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],Qt.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;f=!0}d[i]=m&&m[i]||Z.style(e,i)}else c=void 0;if(Z.isEmptyObject(d))"inline"===("none"===c?b(e.nodeName):c)&&(p.display=c);else{m?"hidden"in m&&(f=m.hidden):m=vt.access(e,"fxshow",{}),o&&(m.hidden=!f),f?Z(e).show():h.done(function(){Z(e).hide()}),h.done(function(){var t;vt.remove(e,"fxshow");for(t in d)Z.style(e,t,d[t])});for(i in d)s=P(f?m[i]:0,i,h),i in m||(m[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function I(e,t){var n,i,r,o,s;for(n in e)if(i=Z.camelCase(n),r=t[i],o=e[n],Z.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=Z.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function R(e,t,n){var i,r,o=0,s=tn.length,a=Z.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Xt||O(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,o=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(o);return a.notifyWith(e,[c,o,n]),1>o&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xt||O(),duration:n.duration,tweens:[],createTween:function(t,n){var i=Z.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(I(u,c.opts.specialEasing);s>o;o++)if(i=tn[o].call(c,e,u,c.opts))return i;return Z.map(u,P,c),Z.isFunction(c.opts.start)&&c.opts.start.call(e,c),Z.fx.timer(Z.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function M(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(pt)||[];if(Z.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function D(e,t,n,i){function r(a){var l;return o[a]=!0,Z.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=e===xn;return r(t.dataTypes[0])||!o["*"]&&r("*")}function L(e,t){var n,i,r=Z.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&Z.extend(!0,e,i),e}function F(e,t,n){for(var i,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function j(e,t,n,i){var r,o,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function H(e,t,n,i){var r;if(Z.isArray(t))Z.each(t,function(t,r){n||_n.test(e)?i(e,r):H(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==Z.type(t))i(e,t);else for(r in t)H(e+"["+r+"]",t[r],n,i)}function U(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var q=[],z=q.slice,B=q.concat,W=q.push,V=q.indexOf,K={},G=K.toString,Y=K.hasOwnProperty,X={},J=e.document,Q="2.1.1",Z=function(e,t){return new Z.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,nt=/-([\da-z])/gi,it=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:Q,constructor:Z,selector:"",length:0,toArray:function(){return z.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:z.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:q.sort,splice:q.splice},Z.extend=Z.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||Z.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(c&&i&&(Z.isPlainObject(i)||(r=Z.isArray(i)))?(r?(r=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},s[t]=Z.extend(c,o,i)):void 0!==i&&(s[t]=i));return s},Z.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!Y.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?K[G.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(nt,it)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,s=e.length,a=n(e);if(i){if(a)for(;s>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(et,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?Z.merge(i,"string"==typeof e?[e]:e):W.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:V.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,s=e.length,a=!n;s>o;o++)i=!t(e[o],o),i!==a&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),l=[];if(a)for(;s>o;o++)r=t(e[o],o,i),null!=r&&l.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&l.push(r);return B.apply([],l)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),Z.isFunction(e)?(i=z.call(arguments,2),r=function(){return e.apply(t||this,i.concat(z.call(arguments)))},r.guid=e.guid=e.guid||Z.guid++,r):void 0},now:Date.now,support:X}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()});var rt=function(e){function t(e,t,n,i){var r,o,s,a,l,c,h,p,f,m;if((t?t.ownerDocument||t:H)!==N&&P(t),t=t||N,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(R&&!i){if(r=$t.exec(e))if(s=r[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&F(t,o)&&o.id===s)return n.push(o),n}else{if(r[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((s=r[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(s)),n}if(w.qsa&&(!M||!M.test(e))){if(p=h=j,f=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=S(e),(h=t.getAttribute("id"))?p=h.replace(bt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+d(c[l]);f=yt.test(e)&&u(t.parentNode)||t,m=c.join(",")}if(m)try{return Z.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{h||t.removeAttribute("id")}}}return E(e.replace(lt,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[j]=!0,e}function r(e){var t=N.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)x.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function u(e){return e&&typeof e.getElementsByTagName!==K&&e}function h(){}function d(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=q++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,l,c=[U,o];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[j]||(t[j]={}),(a=l[i])&&a[0]===U&&a[1]===o)return c[2]=a[2];if(l[i]=c,c[2]=e(t,n,s))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function g(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!n||n(o,i,r))&&(s.push(o),c&&t.push(a));return s}function v(e,t,n,r,o,s){return r&&!r[j]&&(r=v(r)),o&&!o[j]&&(o=v(o,s)),i(function(i,s,a,l){var c,u,h,d=[],p=[],f=s.length,v=i||m(t||"*",a.nodeType?[a]:a,[]),$=!e||!i&&t?v:g(v,d,e,a,l),y=n?o||(i?e:f||r)?[]:s:$;if(n&&n($,y,a,l),r)for(c=g(y,p),r(c,[],a,l),u=c.length;u--;)(h=c[u])&&(y[p[u]]=!($[p[u]]=h));if(i){if(o||e){if(o){for(c=[],u=y.length;u--;)(h=y[u])&&c.push($[u]=h);o(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=o?tt.call(i,h):d[u])>-1&&(i[c]=!(s[c]=h))}}else y=g(y===s?y.splice(f,y.length):y),o?o(null,s,y,l):Z.apply(s,y)})}function $(e){for(var t,n,i,r=e.length,o=x.relative[e[0].type],s=o||x.relative[" "],a=o?1:0,l=p(function(e){return e===t},s,!0),c=p(function(e){return tt.call(t,e)>-1},s,!0),u=[function(e,n,i){return!o&&(i||n!==T)||((t=n).nodeType?l(e,n,i):c(e,n,i))}];r>a;a++)if(n=x.relative[e[a].type])u=[p(f(u),n)];else{if(n=x.filter[e[a].type].apply(null,e[a].matches),n[j]){for(i=++a;r>i&&!x.relative[e[i].type];i++);return v(a>1&&f(u),a>1&&d(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(lt,"$1"),n,i>a&&$(e.slice(a,i)),r>i&&$(e=e.slice(i)),r>i&&d(e))}u.push(n)}return f(u)}function y(e,n){var r=n.length>0,o=e.length>0,s=function(i,s,a,l,c){var u,h,d,p=0,f="0",m=i&&[],v=[],$=T,y=i||o&&x.find.TAG("*",c),b=U+=null==$?1:Math.random()||.1,w=y.length;for(c&&(T=s!==N&&s);f!==w&&null!=(u=y[f]);f++){if(o&&u){for(h=0;d=e[h++];)if(d(u,s,a)){l.push(u);break}c&&(U=b)}r&&((u=!d&&u)&&p--,i&&m.push(u))}if(p+=f,r&&f!==p){for(h=0;d=n[h++];)d(m,v,s,a);if(i){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=J.call(l));v=g(v)}Z.apply(l,v),c&&!i&&v.length>0&&p+n.length>1&&t.uniqueSort(l)}return c&&(U=b,T=$),m};return r?i(s):s}var b,w,x,k,C,S,_,E,T,O,A,P,N,I,R,M,D,L,F,j="sizzle"+-new Date,H=e.document,U=0,q=0,z=n(),B=n(),W=n(),V=function(e,t){return e===t&&(A=!0),0},K="undefined",G=1<<31,Y={}.hasOwnProperty,X=[],J=X.pop,Q=X.push,Z=X.push,et=X.slice,tt=X.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=rt.replace("w","w#"),st="\\["+it+"*("+rt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",at=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ct=new RegExp("^"+it+"*,"+it+"*"),ut=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ht=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),dt=new RegExp(at),pt=new RegExp("^"+ot+"$"),ft={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,$t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),xt=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(X=et.call(H.childNodes),H.childNodes),X[H.childNodes.length].nodeType}catch(kt){Z={apply:X.length?function(e,t){Q.apply(e,et.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},P=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:H,i=n.defaultView;return n!==N&&9===n.nodeType&&n.documentElement?(N=n,I=n.documentElement,R=!C(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){P()},!1):i.attachEvent&&i.attachEvent("onunload",function(){P()})),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=vt.test(n.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=r(function(e){return I.appendChild(e).id=j,!n.getElementsByName||!n.getElementsByName(j).length}),w.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==K&&R){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(wt,xt);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(wt,xt);return function(e){var n=typeof e.getAttributeNode!==K&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==K?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==K&&R?t.getElementsByClassName(e):void 0},D=[],M=[],(w.qsa=vt.test(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&M.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+it+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||M.push(":checked")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(w.matchesSelector=vt.test(L=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&r(function(e){w.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),D.push("!=",at)}),M=M.length&&new RegExp(M.join("|")),D=D.length&&new RegExp(D.join("|")),t=vt.test(I.compareDocumentPosition),F=t||vt.test(I.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return A=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===H&&F(H,e)?-1:t===n||t.ownerDocument===H&&F(H,t)?1:O?tt.call(O,e)-tt.call(O,t):0:4&i?-1:1)}:function(e,t){if(e===t)return A=!0,0;var i,r=0,o=e.parentNode,a=t.parentNode,l=[e],c=[t];if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:O?tt.call(O,e)-tt.call(O,t):0;if(o===a)return s(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;l[r]===c[r];)r++;return r?s(l[r],c[r]):l[r]===H?-1:c[r]===H?1:0},n):N},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==N&&P(e),n=n.replace(ht,"='$1']"),!(!w.matchesSelector||!R||D&&D.test(n)||M&&M.test(n)))try{var i=L.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&P(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&P(e);var n=x.attrHandle[t.toLowerCase()],i=n&&Y.call(x.attrHandle,t.toLowerCase())?n(e,t,!R):void 0;return void 0!==i?i:w.attributes||!R?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(A=!w.detectDuplicates,O=!w.sortStable&&e.slice(0),e.sort(V),A){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return O=null,e},k=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=k(t);return n},x=t.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,xt),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,xt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&dt.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,xt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==K&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,d,p,f,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),$=!l&&!a;if(g){if(o){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&$){for(u=g[j]||(g[j]={}),c=u[e]||[],p=c[0]===U&&c[1],d=c[0]===U&&c[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===t){u[e]=[U,p,d];break}}else if($&&(c=(t[j]||(t[j]={}))[e])&&c[0]===U)d=c[1];else for(;(h=++p&&h&&h[m]||(d=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||($&&((h[j]||(h[j]={}))[e]=[U,d]),h!==t)););return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(e,n){var r,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[j]?o(n):o.length>1?(r=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),s=r.length;s--;)i=tt.call(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=_(e.replace(lt,"$1"));return r[j]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:i(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,xt).toLowerCase(),function(t){var n;do if(n=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=l(b);return h.prototype=x.filters=x.pseudos,x.setFilters=new h,S=t.tokenize=function(e,n){var i,r,o,s,a,l,c,u=B[e+" "];if(u)return n?0:u.slice(0);for(a=e,l=[],c=x.preFilter;a;){(!i||(r=ct.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=ut.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(lt," ")}),a=a.slice(i.length));for(s in x.filter)!(r=ft[s].exec(a))||c[s]&&!(r=c[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):B(e,l).slice(0)},_=t.compile=function(e,t){var n,i=[],r=[],o=W[e+" "];if(!o){for(t||(t=S(e)),n=t.length;n--;)o=$(t[n]),o[j]?i.push(o):r.push(o);o=W(e,y(r,i)),o.selector=e}return o},E=t.select=function(e,t,n,i){var r,o,s,a,l,c="function"==typeof e&&e,h=!i&&S(e=c.selector||e);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&R&&x.relative[o[1].type]){if(t=(x.find.ID(s.matches[0].replace(wt,xt),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=ft.needsContext.test(e)?0:o.length;r--&&(s=o[r],!x.relative[a=s.type]);)if((l=x.find[a])&&(i=l(s.matches[0].replace(wt,xt),yt.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&d(o),!e)return Z.apply(n,i),n;break}}return(c||_(e,h))(i,t,!R,n,yt.test(e)&&u(t.parentNode)||t),n},w.sortStable=j.split("").sort(V).join("")===j,w.detectDuplicates=!!A,P(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(nt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);Z.find=rt,Z.expr=rt.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=rt.uniqueSort,Z.text=rt.getText,Z.isXMLDoc=rt.isXML,Z.contains=rt.contains;var ot=Z.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Z.find.matchesSelector(i,e)?[i]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;n>t;t++)if(Z.contains(r[t],this))return!0
}));for(t=0;n>t;t++)Z.find(e,r[t],i);return i=this.pushStack(n>1?Z.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ot.test(e)?Z(e):e||[],!1).length}});var lt,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ut=Z.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ct.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||lt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),st.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=J.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof lt.ready?lt.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ut.prototype=Z.fn,lt=Z(J);var ht=/^(?:parents|prev(?:Until|All))/,dt={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&Z(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t=Z(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=ot.test(e)||"string"!=typeof e?Z(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(e){return e?"string"==typeof e?V.call(Z(e),this[0]):V.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,i){var r=Z.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=Z.filter(i,r)),this.length>1&&(dt[e]||Z.unique(r),ht.test(e)&&r.reverse()),this.pushStack(r)}});var pt=/\S+/g,ft={};Z.Callbacks=function(e){e="string"==typeof e?ft[e]||o(e):Z.extend({},e);var t,n,i,r,s,a,l=[],c=!e.once&&[],u=function(o){for(t=e.memory&&o,n=!0,a=r||0,r=0,s=l.length,i=!0;l&&s>a;a++)if(l[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,l&&(c?c.length&&u(c.shift()):t?l=[]:h.disable())},h={add:function(){if(l){var n=l.length;!function o(t){Z.each(t,function(t,n){var i=Z.type(n);"function"===i?e.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),i?s=l.length:t&&(r=n,u(t))}return this},remove:function(){return l&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,l,n))>-1;)l.splice(n,1),i&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?Z.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||h.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||n&&!c||(t=t||[],t=[e,t.slice?t.slice():t],i?c.push(t):u(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,o){var s=Z.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,i):i}},r={};return i.pipe=i.then,Z.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=z.call(arguments),s=o.length,a=1!==s||e&&Z.isFunction(e.promise)?s:0,l=1===a?e:Z.Deferred(),c=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?z.call(arguments):r,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>r;r++)o[r]&&Z.isFunction(o[r].promise)?o[r].promise().done(c(r,i,o)).fail(l.reject).progress(c(r,n,t)):--a;return a||l.resolveWith(i,o),l.promise()}});var mt;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(mt.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return mt||(mt=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),mt.promise(t)},Z.ready.promise();var gt=Z.access=function(e,t,n,i,r,o,s){var a=0,l=e.length,c=null==n;if("object"===Z.type(n)){r=!0;for(a in n)Z.access(e,t,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,Z.isFunction(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(Z(e),n)})),t))for(;l>a;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:c?t.call(e):l?t(e[0],n):o};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,Z.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[r],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,Z.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{Z.isArray(t)?i=t.concat(t.map(Z.camelCase)):(r=Z.camelCase(t),t in s?i=[t,r]:(i=r,i=i in s?[i]:i.match(pt)||[])),n=i.length;for(;n--;)delete s[i[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var vt=new a,$t=new a,yt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bt=/([A-Z])/g;Z.extend({hasData:function(e){return $t.hasData(e)||vt.hasData(e)},data:function(e,t,n){return $t.access(e,t,n)},removeData:function(e,t){$t.remove(e,t)},_data:function(e,t,n){return vt.access(e,t,n)},_removeData:function(e,t){vt.remove(e,t)}}),Z.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=$t.get(o),1===o.nodeType&&!vt.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=Z.camelCase(i.slice(5)),l(o,i,r[i])));vt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){$t.set(this,e)}):gt(this,function(t){var n,i=Z.camelCase(e);if(o&&void 0===t){if(n=$t.get(o,e),void 0!==n)return n;if(n=$t.get(o,i),void 0!==n)return n;if(n=l(o,i,void 0),void 0!==n)return n}else this.each(function(){var n=$t.get(this,i);$t.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&$t.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){$t.remove(this,e)})}}),Z.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=vt.get(e,t),n&&(!i||Z.isArray(n)?i=vt.access(e,t,Z.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),i=n.length,r=n.shift(),o=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return vt.get(e,n)||vt.access(e,n,{empty:Z.Callbacks("once memory").add(function(){vt.remove(e,[t+"queue",n])})})}}),Z.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):void 0===t?this:this.each(function(){var n=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=Z.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=vt.get(o[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xt=["Top","Right","Bottom","Left"],kt=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Ct=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),X.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",X.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var St="undefined";X.focusinBubbles="onfocusin"in e;var _t=/^key/,Et=/^(?:mouse|pointer|contextmenu)|click/,Tt=/^(?:focusinfocus|focusoutblur)$/,Ot=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,i,r){var o,s,a,l,c,u,h,d,p,f,m,g=vt.get(e);if(g)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=Z.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return typeof Z!==St&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pt)||[""],c=t.length;c--;)a=Ot.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(h=Z.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=Z.event.special[p]||{},u=Z.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Z.expr.match.needsContext.test(r),namespace:f.join(".")},o),(d=l[p])||(d=l[p]=[],d.delegateCount=0,h.setup&&h.setup.call(e,i,f,s)!==!1||e.addEventListener&&e.addEventListener(p,s,!1)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),Z.event.global[p]=!0)},remove:function(e,t,n,i,r){var o,s,a,l,c,u,h,d,p,f,m,g=vt.hasData(e)&&vt.get(e);if(g&&(l=g.events)){for(t=(t||"").match(pt)||[""],c=t.length;c--;)if(a=Ot.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(h=Z.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)u=d[o],!r&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&h.teardown.call(e,f,g.handle)!==!1||Z.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)Z.event.remove(e,p+t[c],n,i,!0);Z.isEmptyObject(l)&&(delete g.handle,vt.remove(e,"events"))}},trigger:function(t,n,i,r){var o,s,a,l,c,u,h,d=[i||J],p=Y.call(t,"type")?t.type:t,f=Y.call(t,"namespace")?t.namespace.split("."):[];if(s=a=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!Tt.test(p+Z.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[Z.expando]?t:new Z.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:Z.makeArray(n,[t]),h=Z.event.special[p]||{},r||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!r&&!h.noBubble&&!Z.isWindow(i)){for(l=h.delegateType||p,Tt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(i.ownerDocument||J)&&d.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=d[o++])&&!t.isPropagationStopped();)t.type=o>1?l:h.bindType||p,u=(vt.get(s,"events")||{})[t.type]&&vt.get(s,"handle"),u&&u.apply(s,n),u=c&&s[c],u&&u.apply&&Z.acceptData(s)&&(t.result=u.apply(s,n),t.result===!1&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),n)!==!1||!Z.acceptData(i)||c&&Z.isFunction(i[p])&&!Z.isWindow(i)&&(a=i[c],a&&(i[c]=null),Z.event.triggered=p,i[p](),Z.event.triggered=void 0,a&&(i[c]=a)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,i,r,o,s=[],a=z.call(arguments),l=(vt.get(this,"events")||{})[e.type]||[],c=Z.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=Z.event.handlers.call(this,e,l),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((Z.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(i=[],n=0;a>n;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?Z(r,this).index(l)>=0:Z.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Et.test(r)?this.mouseHooks:_t.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new Z.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?Z.event.trigger(r,null,t):Z.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?c:u):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!Z.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),X.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=vt.access(i,t);r||i.addEventListener(e,n,!0),vt.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=vt.access(i,t)-1;r?vt.access(i,t,r):(i.removeEventListener(e,n,!0),vt.remove(i,t))}}}),Z.fn.extend({on:function(e,t,n,i,r){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=u;else if(!i)return this;return 1===r&&(o=i,i=function(e){return Z().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Z(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=u),this.each(function(){Z.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Z.event.trigger(e,t,n,!0):void 0}});var At=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pt=/<([\w:]+)/,Nt=/<|&#?\w+;/,It=/<(?:script|style|link)/i,Rt=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^$|\/(?:java|ecma)script/i,Dt=/^true\/(.*)/,Lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ft={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ft.optgroup=Ft.option,Ft.tbody=Ft.tfoot=Ft.colgroup=Ft.caption=Ft.thead,Ft.th=Ft.td,Z.extend({clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),l=Z.contains(e.ownerDocument,e);if(!(X.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(s=v(a),o=v(e),i=0,r=o.length;r>i;i++)$(o[i],s[i]);if(t)if(n)for(o=o||v(e),s=s||v(a),i=0,r=o.length;r>i;i++)g(o[i],s[i]);else g(e,a);return s=v(a,"script"),s.length>0&&m(s,!l&&v(e,"script")),a},buildFragment:function(e,t,n,i){for(var r,o,s,a,l,c,u=t.createDocumentFragment(),h=[],d=0,p=e.length;p>d;d++)if(r=e[d],r||0===r)if("object"===Z.type(r))Z.merge(h,r.nodeType?[r]:r);else if(Nt.test(r)){for(o=o||u.appendChild(t.createElement("div")),s=(Pt.exec(r)||["",""])[1].toLowerCase(),a=Ft[s]||Ft._default,o.innerHTML=a[1]+r.replace(At,"<$1></$2>")+a[2],c=a[0];c--;)o=o.lastChild;Z.merge(h,o.childNodes),o=u.firstChild,o.textContent=""}else h.push(t.createTextNode(r));for(u.textContent="",d=0;r=h[d++];)if((!i||-1===Z.inArray(r,i))&&(l=Z.contains(r.ownerDocument,r),o=v(u.appendChild(r),"script"),l&&m(o),n))for(c=0;r=o[c++];)Mt.test(r.type||"")&&n.push(r);return u},cleanData:function(e){for(var t,n,i,r,o=Z.event.special,s=0;void 0!==(n=e[s]);s++){if(Z.acceptData(n)&&(r=n[vt.expando],r&&(t=vt.cache[r]))){if(t.events)for(i in t.events)o[i]?Z.event.remove(n,i):Z.removeEvent(n,i,t.handle);vt.cache[r]&&delete vt.cache[r]}delete $t.cache[n[$t.expando]]}}}),Z.fn.extend({text:function(e){return gt(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?Z.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&m(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return gt(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!It.test(e)&&!Ft[(Pt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(At,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=B.apply([],e);var n,i,r,o,s,a,l=0,c=this.length,u=this,h=c-1,d=e[0],m=Z.isFunction(d);if(m||c>1&&"string"==typeof d&&!X.checkClone&&Rt.test(d))return this.each(function(n){var i=u.eq(n);m&&(e[0]=d.call(this,n,i.html())),i.domManip(e,t)});if(c&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=Z.map(v(n,"script"),p),o=r.length;c>l;l++)s=n,l!==h&&(s=Z.clone(s,!0,!0),o&&Z.merge(r,v(s,"script"))),t.call(this[l],s,l);if(o)for(a=r[r.length-1].ownerDocument,Z.map(r,f),l=0;o>l;l++)s=r[l],Mt.test(s.type||"")&&!vt.access(s,"globalEval")&&Z.contains(a,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(Lt,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var n,i=[],r=Z(e),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Z(r[s])[t](n),W.apply(i,n.get());return this.pushStack(i)}});var jt,Ht={},Ut=/^margin/,qt=new RegExp("^("+wt+")(?!px)[a-z%]+$","i"),zt=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,i="4px"===t.width,r.removeChild(o)}var n,i,r=J.documentElement,o=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",X.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&Z.extend(X,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n=s.appendChild(J.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",r.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),r.removeChild(o),t}}))}(),Z.swap=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r};var Bt=/^(none|table(?!-c[ea]).+)/,Wt=new RegExp("^("+wt+")(.*)$","i"),Vt=new RegExp("^([+-])=("+wt+")","i"),Kt={position:"absolute",visibility:"hidden",display:"block"},Gt={letterSpacing:"0",fontWeight:"400"},Yt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=Z.camelCase(t),l=e.style;return t=Z.cssProps[a]||(Z.cssProps[a]=k(l,a)),s=Z.cssHooks[t]||Z.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:l[t]:(o=typeof n,"string"===o&&(r=Vt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Z.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||Z.cssNumber[a]||(n+="px"),X.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]=n)),void 0)}},css:function(e,t,n,i){var r,o,s,a=Z.camelCase(t);return t=Z.cssProps[a]||(Z.cssProps[a]=k(e.style,a)),s=Z.cssHooks[t]||Z.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=w(e,t,i)),"normal"===r&&t in Gt&&(r=Gt[t]),""===n||n?(o=parseFloat(r),n===!0||Z.isNumeric(o)?o||0:r):r}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,i){return n?Bt.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Kt,function(){return _(e,t,i)}):_(e,t,i):void 0},set:function(e,n,i){var r=i&&zt(e);return C(e,n,i?S(e,t,i,"border-box"===Z.css(e,"boxSizing",!1,r),r):0)}}}),Z.cssHooks.marginRight=x(X.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+xt[i]+t]=o[i]||o[i-2]||o[0];return r}},Ut.test(e)||(Z.cssHooks[e+t].set=C)}),Z.fn.extend({css:function(e,t){return gt(this,function(e,t,n){var i,r,o={},s=0;if(Z.isArray(t)){for(i=zt(e),r=t.length;r>s;s++)o[t[s]]=Z.css(e,t[s],!1,i);return o}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){kt(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=T,T.prototype={constructor:T,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var e=T.propHooks[this.prop];return e&&e.get?e.get(this):T.propHooks._default.get(this)},run:function(e){var t,n=T.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):T.propHooks._default.set(this),this}},T.prototype.init.prototype=T.prototype,T.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=T.prototype.init,Z.fx.step={};var Xt,Jt,Qt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+wt+")([a-z%]*)$","i"),en=/queueHooks$/,tn=[N],nn={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Zt.exec(t),o=r&&r[3]||(Z.cssNumber[e]?"":"px"),s=(Z.cssNumber[e]||"px"!==o&&+i)&&Zt.exec(Z.css(n.elem,e)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do a=a||".5",s/=a,Z.style(n.elem,e,s+o);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};Z.Animation=Z.extend(R,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],nn[n]=nn[n]||[],nn[n].unshift(t)},prefilter:function(e,t){t?tn.unshift(e):tn.push(e)}}),Z.speed=function(e,t,n){var i=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return i.duration=Z.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Z.fx.speeds?Z.fx.speeds[i.duration]:Z.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Z.isFunction(i.old)&&i.old.call(this),i.queue&&Z.dequeue(this,i.queue)},i},Z.fn.extend({fadeTo:function(e,t,n,i){return this.filter(kt).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=Z.isEmptyObject(e),o=Z.speed(t,n,i),s=function(){var t=R(this,Z.extend({},e),o);(r||vt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=Z.timers,s=vt.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&en.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));(t||!n)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=vt.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=Z.timers,s=i?i.length:0;for(n.finish=!0,Z.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];
Z.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(A(t,!0),e,i,r)}}),Z.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,n=Z.timers;for(Xt=Z.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Z.fx.stop(),Xt=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Jt||(Jt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Jt),Jt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",X.checkOn=""!==e.value,X.optSelected=n.selected,t.disabled=!0,X.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",X.radioValue="t"===e.value}();var rn,on,sn=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return gt(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===St?Z.prop(e,t,n):(1===o&&Z.isXMLDoc(e)||(t=t.toLowerCase(),i=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?on:rn)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Z.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void Z.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(pt);if(o&&1===e.nodeType)for(;n=o[r++];)i=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!X.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),on={set:function(e,t,n){return t===!1?Z.removeAttr(e,n):e.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var n=sn[t]||Z.find.attr;sn[t]=function(e,t,i){var r,o;return i||(o=sn[t],sn[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,sn[t]=o),r}});var an=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return gt(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!Z.isXMLDoc(e),o&&(t=Z.propFix[t]||t,r=Z.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||an.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),X.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var ln=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,n,i,r,o,s,a="string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pt)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ln," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=Z.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,r,o,s,a=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pt)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ln," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");s=e?Z.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(Z.isFunction(e)?function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=Z(this),o=e.match(pt)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===St||"boolean"===n)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ln," ").indexOf(t)>=0)return!0;return!1}});var cn=/\r/g;Z.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=Z.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,Z(this).val()):e,null==r?r="":"number"==typeof r?r+="":Z.isArray(r)&&(r=Z.map(r,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=Z.valHooks[r.type]||Z.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(cn,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,l=0>r?a:o?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(X.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(t=Z(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=Z.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=Z.inArray(i.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},X.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var un=Z.now(),hn=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var dn,pn,fn=/#.*$/,mn=/([?&])_=[^&]*/,gn=/^(.*?):[ \t]*([^\r\n]*)$/gm,vn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,$n=/^(?:GET|HEAD)$/,yn=/^\/\//,bn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,wn={},xn={},kn="*/".concat("*");try{pn=location.href}catch(Cn){pn=J.createElement("a"),pn.href="",pn=pn.href}dn=bn.exec(pn.toLowerCase())||[],Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pn,type:"GET",isLocal:vn.test(dn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?L(L(e,Z.ajaxSettings),t):L(Z.ajaxSettings,e)},ajaxPrefilter:M(wn),ajaxTransport:M(xn),ajax:function(e,t){function n(e,t,n,s){var l,u,v,$,b,x=t;2!==y&&(y=2,a&&clearTimeout(a),i=void 0,o=s||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&($=F(h,w,n)),$=j(h,$,w,l),l?(h.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(Z.lastModified[r]=b),b=w.getResponseHeader("etag"),b&&(Z.etag[r]=b)),204===e||"HEAD"===h.type?x="nocontent":304===e?x="notmodified":(x=$.state,u=$.data,v=$.error,l=!v)):(v=x,(e||!x)&&(x="error",0>e&&(e=0))),w.status=e,w.statusText=(t||x)+"",l?f.resolveWith(d,[u,x,w]):f.rejectWith(d,[w,x,v]),w.statusCode(g),g=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[w,h,l?u:v]),m.fireWith(d,[w,x]),c&&(p.trigger("ajaxComplete",[w,h]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,s,a,l,c,u,h=Z.ajaxSetup({},t),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?Z(d):Z.event,f=Z.Deferred(),m=Z.Callbacks("once memory"),g=h.statusCode||{},v={},$={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!s)for(s={};t=gn.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=$[n]=$[n]||e,v[e]=t),this},overrideMimeType:function(e){return y||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return i&&i.abort(t),n(0,t),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,h.url=((e||h.url||pn)+"").replace(fn,"").replace(yn,dn[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=Z.trim(h.dataType||"*").toLowerCase().match(pt)||[""],null==h.crossDomain&&(l=bn.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===dn[1]&&l[2]===dn[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(dn[3]||("http:"===dn[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Z.param(h.data,h.traditional)),D(wn,h,t,w),2===y)return w;c=h.global,c&&0===Z.active++&&Z.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!$n.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(hn.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=mn.test(r)?r.replace(mn,"$1_="+un++):r+(hn.test(r)?"&":"?")+"_="+un++)),h.ifModified&&(Z.lastModified[r]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[r]),Z.etag[r]&&w.setRequestHeader("If-None-Match",Z.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+kn+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)w.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(h.beforeSend.call(d,w,h)===!1||2===y))return w.abort();b="abort";for(u in{success:1,error:1,complete:1})w[u](h[u]);if(i=D(xn,h,t,w)){w.readyState=1,c&&p.trigger("ajaxSend",[w,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},h.timeout));try{y=1,i.send(v,n)}catch(x){if(!(2>y))throw x;n(-1,x)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,n,i,r){return Z.isFunction(n)&&(r=r||i,i=n,n=void 0),Z.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Z.isFunction(e)?function(t){Z(this).wrapInner(e.call(this,t))}:function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var Sn=/%20/g,_n=/\[\]$/,En=/\r?\n/g,Tn=/^(?:submit|button|image|reset|file)$/i,On=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var n,i=[],r=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){r(this.name,this.value)});else for(n in e)H(n,e[n],t,r);return i.join("&").replace(Sn,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&On.test(this.nodeName)&&!Tn.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(En,"\r\n")}}):{name:t.name,value:n.replace(En,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var An=0,Pn={},Nn={0:200,1223:204},In=Z.ajaxSettings.xhr();e.ActiveXObject&&Z(e).on("unload",function(){for(var e in Pn)Pn[e]()}),X.cors=!!In&&"withCredentials"in In,X.ajax=In=!!In,Z.ajaxTransport(function(e){var t;return X.cors||In&&!e.crossDomain?{send:function(n,i){var r,o=e.xhr(),s=++An;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)o.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete Pn[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?i(o.status,o.statusText):i(Nn[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Pn[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Rn=[],Mn=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rn.pop()||Z.expando+"_"+un++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,s,a=t.jsonp!==!1&&(Mn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Mn.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Mn,"$1"+r):t.jsonp!==!1&&(t.url+=(hn.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||Z.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,Rn.push(r)),s&&Z.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var i=st.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=Z.buildFragment([e],t,r),r&&r.length&&Z(r).remove(),Z.merge([],i.childNodes))};var Dn=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&Dn)return Dn.apply(this,arguments);var i,r,o,s=this,a=e.indexOf(" ");return a>=0&&(i=Z.trim(e.slice(a)),e=e.slice(0,a)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&Z.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?Z("<div>").append(Z.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Ln=e.document.documentElement;Z.offset={setOffset:function(e,t,n){var i,r,o,s,a,l,c,u=Z.css(e,"position"),h=Z(e),d={};"static"===u&&(e.style.position="relative"),a=h.offset(),o=Z.css(e,"top"),l=Z.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(i=h.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),Z.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+r),"using"in t?t.using.call(e,d):h.css(d)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,Z.contains(t,i)?(typeof i.getBoundingClientRect!==St&&(r=i.getBoundingClientRect()),n=U(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===Z.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(i=e.offset()),i.top+=Z.css(e[0],"borderTopWidth",!0),i.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-Z.css(n,"marginTop",!0),left:t.left-i.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Ln;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Ln})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;Z.fn[t]=function(r){return gt(this,function(t,r,o){var s=U(t);return void 0===o?s?s[n]:t[r]:void(s?s.scrollTo(i?e.pageXOffset:o,i?o:e.pageYOffset):t[r]=o)},t,r,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=x(X.pixelPosition,function(e,n){return n?(n=w(e,t),qt.test(n)?Z(e).position()[t]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){Z.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return gt(this,function(t,n,i){var r;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?Z.css(t,n,s):Z.style(t,n,i,s)},t,o?i:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Fn=e.jQuery,jn=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=jn),t&&e.jQuery===Z&&(e.jQuery=Fn),Z},typeof t===St&&(e.jQuery=e.$=Z),Z}),define("jquery",function(){}),function(e,t,n){function i(e){return function(){var t,n,i=arguments[0],r="["+(e?e+":":"")+i+"] ",o=arguments[1],s=arguments,a=function(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e};for(t=r+o.replace(/\{\d+\}/g,function(e){var t,n=+e.slice(1,-1);return n+2<s.length?(t=s[n+2],"function"==typeof t?t.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof t?"undefined":"string"!=typeof t?z(t):t):e}),t=t+"\nhttp://errors.angularjs.org/1.3.0-build.3104+sha.addfc56/"+(e?e+"/":"")+i,n=2;n<arguments.length;n++)t=t+(2==n?"?":"&")+"p"+(n-2)+"="+encodeURIComponent(a(arguments[n]));return new Error(t)}}function r(e){if(null==e||S(e))return!1;var t=e.length;return 1===e.nodeType&&t?!0:b(e)||zi(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function o(e,t,n){var i,s;if(e)if(k(e))for(i in e)"prototype"==i||"length"==i||"name"==i||e.hasOwnProperty&&!e.hasOwnProperty(i)||t.call(n,e[i],i);else if(zi(e)||r(e)){var a="object"!=typeof e;for(i=0,s=e.length;s>i;i++)(a||i in e)&&t.call(n,e[i],i)}else if(e.forEach&&e.forEach!==o)e.forEach(t,n);else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i);return e}function s(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function a(e,t,n){for(var i=s(e),r=0;r<i.length;r++)t.call(n,e[i[r]],i[r]);return i}function l(e){return function(t,n){e(n,t)}}function c(){return++qi}function u(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function h(e){var t=e.$$hashKey;return o(arguments,function(t){t!==e&&o(t,function(t,n){e[n]=t})}),u(e,t),e}function d(e){return parseInt(e,10)}function p(e,t){return h(new(h(function(){},{prototype:e})),t)}function f(){}function m(e){return e}function g(e){return function(){return e}}function v(e){return"undefined"==typeof e}function $(e){return"undefined"!=typeof e}function y(e){return null!==e&&"object"==typeof e}function b(e){return"string"==typeof e}function w(e){return"number"==typeof e}function x(e){return"[object Date]"===ji.call(e)}function k(e){return"function"==typeof e}function C(e){return"[object RegExp]"===ji.call(e)}function S(e){return e&&e.window===e}function _(e){return e&&e.$evalAsync&&e.$watch}function E(e){return"[object File]"===ji.call(e)}function T(e){return"[object Blob]"===ji.call(e)}function O(e){return e&&k(e.then)}function A(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function P(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}function N(e,t,n){var i=[];return o(e,function(e,r,o){i.push(t.call(n,e,r,o))}),i}function I(e,t){return-1!=R(e,t)}function R(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}function M(e,t){var n=R(e,t);return n>=0&&e.splice(n,1),t}function D(e,t,n,i){if(S(e)||_(e))throw Hi("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw Hi("cpi","Can't copy! Source and destination are identical.");if(n=n||[],i=i||[],y(e)){var r=R(n,e);if(-1!==r)return i[r];n.push(e),i.push(t)}var s;if(zi(e)){t.length=0;for(var a=0;a<e.length;a++)s=D(e[a],null,n,i),y(e[a])&&(n.push(e[a]),i.push(s)),t.push(s)}else{var l=t.$$hashKey;zi(t)?t.length=0:o(t,function(e,n){delete t[n]});for(var c in e)e.hasOwnProperty(c)&&(s=D(e[c],null,n,i),y(e[c])&&(n.push(e[c]),i.push(s)),t[c]=s);u(t,l)}}else if(t=e,e)if(zi(e))t=D(e,[],n,i);else if(x(e))t=new Date(e.getTime());else if(C(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else if(y(e)){var h=Object.create(Object.getPrototypeOf(e));t=D(e,h,n,i)}return t}function L(e,t){if(zi(e)){t=t||[];for(var n=0,i=e.length;i>n;n++)t[n]=e[n]}else if(y(e)){t=t||{};for(var r in e)("$"!==r.charAt(0)||"$"!==r.charAt(1))&&(t[r]=e[r])}return t||e}function F(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var i,r,o,s=typeof e,a=typeof t;if(s==a&&"object"==s){if(!zi(e)){if(x(e))return x(t)?F(e.getTime(),t.getTime()):!1;if(C(e)&&C(t))return e.toString()==t.toString();if(_(e)||_(t)||S(e)||S(t)||zi(t))return!1;o={};for(r in e)if("$"!==r.charAt(0)&&!k(e[r])){if(!F(e[r],t[r]))return!1;o[r]=!0}for(r in t)if(!o.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t[r]!==n&&!k(t[r]))return!1;return!0}if(!zi(t))return!1;if((i=e.length)==t.length){for(r=0;i>r;r++)if(!F(e[r],t[r]))return!1;return!0}}return!1}function j(e,t,n){return e.concat(Li.call(t,n))}function H(e,t){return Li.call(e,t||0)}function U(e,t){var n=arguments.length>2?H(arguments,2):[];return!k(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,n.concat(Li.call(arguments,0))):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function q(e,i){var r=i;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=n:S(i)?r="$WINDOW":i&&t===i?r="$DOCUMENT":_(i)&&(r="$SCOPE"),r}function z(e,t){return"undefined"==typeof e?n:JSON.stringify(e,q,t?"  ":null)}function B(e){return b(e)?JSON.parse(e):e}function W(e){e=Ii(e).clone();try{e.empty()}catch(t){}var n=3,i=Ii("<div>").append(e).html();try{return e[0].nodeType===n?Ei(i):i.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Ei(t)})}catch(t){return Ei(i)}}function V(e){try{return decodeURIComponent(e)}catch(t){}}function K(e){var t,n,i={};return o((e||"").split("&"),function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),n=V(t[0]),$(n))){var r=$(t[1])?V(t[1]):!0;Ti.call(i,n)?zi(i[n])?i[n].push(r):i[n]=[i[n],r]:i[n]=r}}),i}function G(e){var t=[];return o(e,function(e,n){zi(e)?o(e,function(e){t.push(X(n,!0)+(e===!0?"":"="+X(e,!0)))}):t.push(X(n,!0)+(e===!0?"":"="+X(e,!0)))}),t.length?t.join("&"):""}function Y(e){return X(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function X(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function J(e,t){var n,i,r=Ki.length;for(e=Ii(e),i=0;r>i;++i)if(n=Ki[i]+t,b(n=e.attr(n)))return n;return null}function Q(e,t){var n,i,r={};o(Ki,function(t){var r=t+"app";!n&&e.hasAttribute&&e.hasAttribute(r)&&(n=e,i=e.getAttribute(r))}),o(Ki,function(t){var r,o=t+"app";!n&&(r=e.querySelector("["+o.replace(":","\\:")+"]"))&&(n=r,i=r.getAttribute(o))}),n&&(r.strictDi=null!==J(n,"strict-di"),t(n,i?[i]:[],r))}function Z(n,i,r){y(r)||(r={});var s={strictDi:!1};r=h(s,r);var a=function(){if(n=Ii(n),n.injector()){var e=n[0]===t?"document":W(n);throw Hi("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}i=i||[],i.unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.unshift("ng");var o=Ft(i,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),o},l=/^NG_DEFER_BOOTSTRAP!/;return e&&!l.test(e.name)?a():(e.name=e.name.replace(l,""),void(Ui.resumeBootstrap=function(e){o(e,function(e){i.push(e)}),a()}))}function et(e,t){return t=t||"_",e.replace(Gi,function(e,n){return(n?t:"")+e.toLowerCase()})}function tt(){var t;Yi||(Ri=e.jQuery,Ri&&Ri.fn.on?(Ii=Ri,h(Ri.fn,{scope:ur.scope,isolateScope:ur.isolateScope,controller:ur.controller,injector:ur.injector,inheritedData:ur.inheritedData}),t=Ri.cleanData,Ri.cleanData=function(e){if(Wi)Wi=!1;else for(var n,i=0;null!=(n=e[i]);i++)Ri(n).triggerHandler("$destroy");t(e)}):Ii=gt,Ui.element=Ii,Yi=!0)}function nt(e,t,n){if(!e)throw Hi("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function it(e,t,n){return n&&zi(e)&&(e=e[e.length-1]),nt(k(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function rt(e,t){if("hasOwnProperty"===e)throw Hi("badname","hasOwnProperty is not a valid {0} name",t)}function ot(e,t,n){if(!t)return e;for(var i,r=t.split("."),o=e,s=r.length,a=0;s>a;a++)i=r[a],e&&(e=(o=e)[i]);return!n&&k(e)?U(o,e):e}function st(e){var t=e[0],n=e[e.length-1],i=[t];do{if(t=t.nextSibling,!t)break;i.push(t)}while(t!==n);return Ii(i)}function at(){return Object.create(null)}function lt(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=i("$injector"),r=i("ng"),o=t(e,"angular",Object);return o.$$minErr=o.$$minErr||i,t(o,"module",function(){var e={};return function(i,o,s){var a=function(e,t){if("hasOwnProperty"===e)throw r("badname","hasOwnProperty is not a valid {0} name",t)};return a(i,"module"),o&&e.hasOwnProperty(i)&&(e[i]=null),t(e,i,function(){function e(e,n,i,r){return r||(r=t),function(){return r[i||"push"]([e,n,arguments]),c}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],a=[],l=e("$injector","invoke","push",r),c={_invokeQueue:t,_configBlocks:r,_runBlocks:a,requires:o,name:i,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:l,run:function(e){return a.push(e),this}};return s&&l(s),c})}})}function ct(t){h(t,{bootstrap:Z,copy:D,extend:h,equals:F,element:Ii,forEach:o,injector:Ft,noop:f,bind:U,toJson:z,fromJson:B,identity:m,isUndefined:v,isDefined:$,isString:b,isFunction:k,isObject:y,isNumber:w,isElement:A,isArray:zi,version:Xi,isDate:x,lowercase:Ei,uppercase:Oi,callbacks:{counter:0},$$minErr:i,$$csp:Vi}),Mi=lt(e);try{Mi("ngLocale")}catch(n){Mi("ngLocale",[]).provider("$locale",ln)}Mi("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Mn}),e.provider("$compile",Wt).directive({a:Vr,input:uo,textarea:uo,form:Jr,script:Qo,select:ts,style:is,option:ns,ngBind:Oo,ngBindHtml:Po,ngBindTemplate:Ao,ngClass:No,ngClassEven:Ro,ngClassOdd:Io,ngCloak:Mo,ngController:Do,ngForm:Qr,ngHide:Vo,ngIf:Fo,ngInclude:jo,ngInit:Uo,ngNonBindable:qo,ngPluralize:zo,ngRepeat:Bo,ngShow:Wo,ngStyle:Ko,ngSwitch:Go,ngSwitchWhen:Yo,ngSwitchDefault:Xo,ngOptions:es,ngTransclude:Jo,ngModel:yo,ngList:So,ngChange:bo,pattern:xo,ngPattern:xo,required:wo,ngRequired:wo,minlength:Co,ngMinlength:Co,maxlength:ko,ngMaxlength:ko,ngValue:Eo,ngModelOptions:To}).directive({ngInclude:Ho}).directive(Kr).directive(Lo),e.provider({$anchorScroll:jt,$animate:br,$browser:qt,$cacheFactory:zt,$controller:Gt,$document:Yt,$exceptionHandler:Xt,$filter:Vn,$interpolate:sn,$interval:an,$http:tn,$httpBackend:rn,$location:wn,$log:xn,$parse:On,$rootScope:Rn,$q:An,$$q:Pn,$sce:Hn,$sceDelegate:jn,$sniffer:Un,$templateCache:Bt,$timeout:qn,$window:Wn,$$rAF:In,$$asyncCallback:Ht})}])}function ut(){return++Qi}function ht(e){return e.replace(tr,function(e,t,n,i){return i?n.toUpperCase():n}).replace(nr,"Moz$1")}function dt(e){return!sr.test(e)}function pt(e){var t=e.nodeType;return 1===t||!t||9===t}function ft(e,t){var n,i,r,s,a=t.createDocumentFragment(),l=[];if(dt(e))l.push(t.createTextNode(e));else{for(n=n||a.appendChild(t.createElement("div")),i=(ar.exec(e)||["",""])[1].toLowerCase(),r=cr[i]||cr._default,n.innerHTML=r[1]+e.replace(lr,"<$1></$2>")+r[2],s=r[0];s--;)n=n.lastChild;l=j(l,n.childNodes),n=a.firstChild,n.textContent=""}return a.textContent="",a.innerHTML="",o(l,function(e){a.appendChild(e)}),a}function mt(e,n){n=n||t;var i;return(i=or.exec(e))?[n.createElement(i[1])]:(i=ft(e,n))?i.childNodes:[]}function gt(e){if(e instanceof gt)return e;var t;if(b(e)&&(e=Bi(e),t=!0),!(this instanceof gt)){if(t&&"<"!=e.charAt(0))throw rr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new gt(e)}t?_t(this,mt(e)):_t(this,e)}function vt(e){return e.cloneNode(!0)}function $t(e,t){if(t||bt(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),i=0,r=n.length;r>i;i++)bt(n[i])}function yt(e,t,n,i){if($(i))throw rr("offargs","jqLite#off() does not support the `selector` argument");
var r=wt(e),s=r&&r.events,a=r&&r.handle;if(a)if(t)o(t.split(" "),function(t){v(n)?(er(e,t,s[t]),delete s[t]):M(s[t]||[],n)});else for(t in s)"$destroy"!==t&&er(e,t,s[t]),delete s[t]}function bt(e,t){var i=e.ng339,r=i&&Ji[i];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),yt(e)),delete Ji[i],e.ng339=n}}function wt(e,t){var i=e.ng339,r=i&&Ji[i];return t&&!r&&(e.ng339=i=ut(),r=Ji[i]={events:{},data:{},handle:n}),r}function xt(e,t,n){if(pt(e)){var i=$(n),r=!i&&t&&!y(t),o=!t,s=wt(e,!r),a=s&&s.data;if(i)a[t]=n;else{if(o)return a;if(r)return a&&a[t];h(a,t)}}}function kt(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Ct(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",Bi((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Bi(t)+" "," ")))})}function St(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=Bi(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",Bi(n))}}function _t(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var i=0;n>i;i++)e[e.length++]=t[i]}else e[e.length++]=t}}function Et(e,t){return Tt(e,"$"+(t||"ngController")+"Controller")}function Tt(e,t,i){9==e.nodeType&&(e=e.documentElement);for(var r=zi(t)?t:[t];e;){for(var o=0,s=r.length;s>o;o++)if((i=Ii.data(e,r[o]))!==n)return i;e=e.parentNode||11===e.nodeType&&e.host}}function Ot(e){for($t(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function At(e,t){t||$t(e);var n=e.parentNode;n&&n.removeChild(e)}function Pt(e,t){var n=hr[t.toLowerCase()];return n&&dr[Di(e)]&&n}function Nt(e,t){var n=e.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&pr[t]}function It(e,t){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=t[i||n.type],o=r?r.length:0;if(o){o>1&&(r=L(r));for(var s=0;o>s;s++)r[s].call(e,n)}};return n.elem=e,n}function Rt(e,t){var i,r=typeof e;return"function"==r||"object"==r&&null!==e?"function"==typeof(i=e.$$hashKey)?i=e.$$hashKey():i===n&&(i=e.$$hashKey=(t||c)()):i=e,r+":"+i}function Mt(e,t){if(t){var n=0;this.nextUid=function(){return++n}}o(e,this.put,this)}function Dt(e){var t=e.toString().replace(vr,""),n=t.match(fr);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Lt(e,t,n){var i,r,s,a;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw b(n)&&n||(n=e.name||Dt(e)),$r("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);r=e.toString().replace(vr,""),s=r.match(fr),o(s[1].split(mr),function(e){e.replace(gr,function(e,t,n){i.push(n)})})}e.$inject=i}}else zi(e)?(a=e.length-1,it(e[a],"fn"),i=e.slice(0,a)):it(e,"fn",!0);return i}function Ft(e,t){function i(e){return function(t,n){return y(t)?void o(t,l(e)):e(t,n)}}function r(e,t){if(rt(e,"service"),(k(t)||zi(t))&&(t=C.instantiate(t)),!t.$get)throw $r("pget","Provider '{0}' must define $get factory method.",e);return x[e+v]=t}function s(e,t){return r(e,{$get:t})}function a(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function c(e,t){return s(e,g(t))}function u(e,t){rt(e,"constant"),x[e]=t,S[e]=t}function h(e,t){var n=C.get(e+v),i=n.$get;n.$get=function(){var e=_.invoke(i,n);return _.invoke(t,null,{$delegate:e})}}function d(e){var t,n=[];return o(e,function(e){function i(e){var t,n;for(t=0,n=e.length;n>t;t++){var i=e[t],r=C.get(i[0]);r[i[1]].apply(r,i[2])}}if(!w.get(e)){w.put(e,!0);try{b(e)?(t=Mi(e),n=n.concat(d(t.requires)).concat(t._runBlocks),i(t._invokeQueue),i(t._configBlocks)):k(e)?n.push(C.invoke(e)):zi(e)?n.push(C.invoke(e)):it(e,"module")}catch(r){throw zi(e)&&(e=e[e.length-1]),r.message&&r.stack&&-1==r.stack.indexOf(r.message)&&(r=r.message+"\n"+r.stack),$r("modulerr","Failed to instantiate module {0} due to:\n{1}",e,r.stack||r.message||r)}}}),n}function p(e,n){function i(t){if(e.hasOwnProperty(t)){if(e[t]===m)throw $r("cdep","Circular dependency found: {0}",t+" <- "+$.join(" <- "));return e[t]}try{return $.unshift(t),e[t]=m,e[t]=n(t)}catch(i){throw e[t]===m&&delete e[t],i}finally{$.shift()}}function r(e,n,r,o){"string"==typeof r&&(o=r,r=null);var s,a,l,c=[],u=Lt(e,t,o);for(a=0,s=u.length;s>a;a++){if(l=u[a],"string"!=typeof l)throw $r("itkn","Incorrect injection token! Expected service name as string, got {0}",l);c.push(r&&r.hasOwnProperty(l)?r[l]:i(l))}return zi(e)&&(e=e[s]),e.apply(n,c)}function o(e,t,n){var i,o,s=function(){};return s.prototype=(zi(e)?e[e.length-1]:e).prototype,i=new s,o=r(e,i,t,n),y(o)||k(o)?o:i}return{invoke:r,instantiate:o,get:i,annotate:Lt,has:function(t){return x.hasOwnProperty(t+v)||e.hasOwnProperty(t)}}}t=t===!0;var m={},v="Provider",$=[],w=new Mt([],!0),x={$provide:{provider:i(r),factory:i(s),service:i(a),value:i(c),constant:i(u),decorator:h}},C=x.$injector=p(x,function(){throw $r("unpr","Unknown provider: {0}",$.join(" <- "))},t),S={},_=S.$injector=p(S,function(e){var t=C.get(e+v);return _.invoke(t.$get,t,n,e)},t);return o(d(e),function(e){_.invoke(e||f)}),_}function jt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,i){function r(e){var t=null;return o(e,function(e){t||"a"!==Di(e)||(t=e)}),t}function s(){var e,i=n.hash();i?(e=a.getElementById(i))?e.scrollIntoView():(e=r(a.getElementsByName(i)))?e.scrollIntoView():"top"===i&&t.scrollTo(0,0):t.scrollTo(0,0)}var a=t.document;return e&&i.$watch(function(){return n.hash()},function(){i.$evalAsync(s)}),s}]}function Ht(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Ut(e,t,i,r){function s(e){try{e.apply(null,H(arguments,1))}finally{if($--,0===$)for(;y.length;)try{y.pop()()}catch(t){i.error(t)}}}function a(e,t){!function n(){o(x,function(e){e()}),w=t(n,e)}()}function l(){S=null,k!=c.url()&&(k=c.url(),o(_,function(e){e(c.url())}))}var c=this,u=t[0],h=e.location,d=e.history,p=e.setTimeout,m=e.clearTimeout,g={};c.isMock=!1;var $=0,y=[];c.$$completeOutstandingRequest=s,c.$$incOutstandingRequestCount=function(){$++},c.notifyWhenNoOutstandingRequests=function(e){o(x,function(e){e()}),0===$?e():y.push(e)};var w,x=[];c.addPollFn=function(e){return v(w)&&a(100,p),x.push(e),e};var k=h.href,C=t.find("base"),S=null;c.url=function(t,n){if(h!==e.location&&(h=e.location),d!==e.history&&(d=e.history),t){if(k==t)return;return k=t,r.history?n?d.replaceState(null,"",t):(d.pushState(null,"",t),C.attr("href",C.attr("href"))):(S=t,n?h.replace(t):h.href=t),c}return S||h.href.replace(/%27/g,"'")};var _=[],E=!1;c.onUrlChange=function(t){return E||(r.history&&Ii(e).on("popstate",l),r.hashchange?Ii(e).on("hashchange",l):c.addPollFn(l),E=!0),_.push(t),t},c.baseHref=function(){var e=C.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var T={},O="",A=c.baseHref();c.cookies=function(e,t){var r,o,s,a,l;if(!e){if(u.cookie!==O)for(O=u.cookie,o=O.split("; "),T={},a=0;a<o.length;a++)s=o[a],l=s.indexOf("="),l>0&&(e=decodeURIComponent(s.substring(0,l)),T[e]===n&&(T[e]=decodeURIComponent(s.substring(l+1))));return T}t===n?u.cookie=encodeURIComponent(e)+"=;path="+A+";expires=Thu, 01 Jan 1970 00:00:00 GMT":b(t)&&(r=(u.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+A).length+1,r>4096&&i.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+r+" > 4096 bytes)!"))},c.defer=function(e,t){var n;return $++,n=p(function(){delete g[n],s(e)},t||0),g[n]=!0,n},c.defer.cancel=function(e){return g[e]?(delete g[e],m(e),s(f),!0):!1}}function qt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new Ut(e,i,t,n)}]}function zt(){this.$get=function(){function e(e,n){function r(e){e!=d&&(p?p==e&&(p=e.n):p=e,o(e.n,e.p),o(e,d),d=e,d.n=null)}function o(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var s=0,a=h({},n,{id:e}),l={},c=n&&n.capacity||Number.MAX_VALUE,u={},d=null,p=null;return t[e]={put:function(e,t){if(c<Number.MAX_VALUE){var n=u[e]||(u[e]={key:e});r(n)}if(!v(t))return e in l||s++,l[e]=t,s>c&&this.remove(p.key),t},get:function(e){if(c<Number.MAX_VALUE){var t=u[e];if(!t)return;r(t)}return l[e]},remove:function(e){if(c<Number.MAX_VALUE){var t=u[e];if(!t)return;t==d&&(d=t.p),t==p&&(p=t.n),o(t.n,t.p),delete u[e]}delete l[e],s--},removeAll:function(){l={},s=0,u={},d=p=null},destroy:function(){l=null,a=null,u=null,delete t[e]},info:function(){return h({},a,{size:s})}}}var t={};return e.info=function(){var e={};return o(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function Bt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Wt(e,i){var r={},s="Directive",a=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,c=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,u=P("ngSrc,ngSrcset,src,srcset"),d=/^(on[a-z]+|formaction)$/;this.directive=function f(t,n){return rt(t,"directive"),b(t)?(nt(n,"directiveFactory"),r.hasOwnProperty(t)||(r[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,n){var i=[];return o(r[t],function(r,o){try{var s=e.invoke(r);k(s)?s={compile:g(s)}:!s.compile&&s.link&&(s.compile=g(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",i.push(s)}catch(a){n(a)}}),i}])),r[t].push(n)):o(t,l(f)),this},this.aHrefSanitizationWhitelist=function(e){return $(e)?(i.aHrefSanitizationWhitelist(e),this):i.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return $(e)?(i.imgSrcSanitizationWhitelist(e),this):i.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,i,l,f,g,v,$,w,x,C,S,E){function T(e,t,n,i,r){e instanceof Ii||(e=Ii(e)),o(e,function(t,n){3==t.nodeType&&t.nodeValue.match(/\S+/)&&(e[n]=Ii(t).wrap("<span></span>").parent()[0])});var s=P(e,t,e,n,i,r);A(e,"ng-scope");var a=null;return function(t,n,i,r,o){nt(t,"scope"),a||(a=O(o),"html"!==a&&(e=Ii(Y(a,Ii("<div>").append(e).html()))));var l=n?ur.clone.call(e):e;if(i)for(var c in i)l.data("$"+c+"Controller",i[c]);return l.data("$scope",t),n&&n(l,t),s&&s(t,l,l,r),l}}function O(e){var t=e&&e[0];return t&&"foreignobject"!==Di(t)&&t.toString().match(/SVG/)?"svg":"html"}function A(e,t){try{e.addClass(t)}catch(n){}}function P(e,t,i,r,o,s){function a(e,i,r,o){var s,a,l,c,u,h,d,p,g;if(f){var v=i.length;for(g=new Array(v),u=0;v>u;u++)g[u]=i[u]}else g=i;for(u=0,d=0,h=m.length;h>u;d++)l=g[d],s=m[u++],a=m[u++],s?(s.scope?(c=e.$new(),Ii.data(l,"$scope",c)):c=e,p=s.transcludeOnThisElement?N(e,s.transclude,o,s.elementTranscludeOnThisElement):!s.templateOnThisElement&&o?o:!o&&t?N(e,t):null,s(a,c,l,r,p)):a&&a(e,l.childNodes,n,o)}for(var l,c,u,h,d,p,f,m=[],g=0;g<e.length;g++)l=new it,c=I(e[g],[],l,0===g?r:n,o),u=c.length?L(c,e[g],l,t,i,null,[],[],s):null,u&&u.scope&&A(l.$$element,"ng-scope"),d=u&&u.terminal||!(h=e[g].childNodes)||!h.length?null:P(h,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),m.push(u,d),p=p||u||d,f=f||u,s=null;return p?a:null}function N(e,t,n,i){var r=function(r,o,s,a){var l=!1;r||(r=e.$new(),r.$$transcluded=!0,l=!0);var c=t(r,o,s,n,a);return l&&!i&&c.on("$destroy",function(){r.$destroy()}),c};return r}function I(e,t,n,i,r){var o,s,l=e.nodeType,u=n.$attr;switch(l){case 1:U(t,Vt(Di(e)),"E",i,r);for(var h,d,p,f,m,g,v=e.attributes,$=0,y=v&&v.length;y>$;$++){var w=!1,x=!1;if(h=v[$],!Ni||Ni>=8||h.specified){d=h.name,m=Bi(h.value),f=Vt(d),(g=at.test(f))&&(d=et(f.substr(6),"-"));var k=f.replace(/(Start|End)$/,"");q(k)&&f===k+"Start"&&(w=d,x=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),p=Vt(d.toLowerCase()),u[p]=d,(g||!n.hasOwnProperty(p))&&(n[p]=m,Pt(e,p)&&(n[p]=!0)),J(e,t,m,p,g),U(t,p,"A",i,r,w,x)}}if(s=e.className,b(s)&&""!==s)for(;o=c.exec(s);)p=Vt(o[2]),U(t,p,"C",i,r)&&(n[p]=Bi(o[3])),s=s.substr(o.index+o[0].length);break;case 3:G(t,e.nodeValue);break;case 8:try{o=a.exec(e.nodeValue),o&&(p=Vt(o[1]),U(t,p,"M",i,r)&&(n[p]=Bi(o[2])))}catch(C){}}return t.sort(V),t}function R(e,t,n){var i=[],r=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw wr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);1==e.nodeType&&(e.hasAttribute(t)&&r++,e.hasAttribute(n)&&r--),i.push(e),e=e.nextSibling}while(r>0)}else i.push(e);return Ii(i)}function D(e,t,n){return function(i,r,o,s,a){return r=R(r[0],t,n),e(i,r,o,s,a)}}function L(e,r,s,a,c,u,h,d,p){function f(e,t,n,i){e&&(n&&(e=D(e,n,i)),e.require=x.require,e.directiveName=C,(M===x||x.$$isolateScope)&&(e=Z(e,{isolateScope:!0})),h.push(e)),t&&(n&&(t=D(t,n,i)),t.require=x.require,t.directiveName=C,(M===x||x.$$isolateScope)&&(t=Z(t,{isolateScope:!0})),d.push(t))}function m(e,t,n,i){var r,s="data",a=!1;if(b(t)){for(;"^"==(r=t.charAt(0))||"?"==r;)t=t.substr(1),"^"==r&&(s="inheritedData"),a=a||"?"==r;if(r=null,i&&"data"===s&&(r=i[t]),r=r||n[s]("$"+t+"Controller"),!r&&!a)throw wr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return r}return zi(t)&&(r=[],o(t,function(t){r.push(m(e,t,n,i))})),r}function g(e,t,a,l,c){function u(e,t,i){var r;return _(e)||(i=t,t=e,e=n),G&&(r=w),i||(i=G?k.parent():k),c(e,t,r,i)}var p,f,g,y,b,w,x,k,C;if(r===a?(C=s,k=s.$$element):(k=Ii(a),C=new it(k,s)),M){var S=/^\s*([@=&])(\??)\s*(\w*)\s*$/;b=t.$new(!0),!L||L!==M&&L!==M.$$originalDirective?k.data("$isolateScopeNoTemplate",b):k.data("$isolateScope",b),A(k,"ng-isolate-scope"),o(M.scope,function(e,n){var r,o,s,a,l=e.match(S)||[],c=l[3]||n,u="?"==l[2],h=l[1];switch(b.$$isolateBindings[n]=h+c,h){case"@":C.$observe(c,function(e){b[n]=e}),C.$$observers[c].$$scope=t,C[c]&&(b[n]=i(C[c])(t));break;case"=":if(u&&!C[c])return;o=v(C[c]),a=o.literal?F:function(e,t){return e===t||e!==e&&t!==t},s=o.assign||function(){throw r=b[n]=o(t),wr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",C[c],M.name)},r=b[n]=o(t);var d=t.$watch(v(C[c],function(e){return a(e,b[n])||(a(e,r)?s(t,e=b[n]):b[n]=e),r=e}),null,o.literal);b.$on("$destroy",d);break;case"&":o=v(C[c]),b[n]=function(e){return o(t,e)};break;default:throw wr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",M.name,n,e)}})}for(x=c&&u,N&&(w={},o(N,function(e){var n,i={$scope:e===M||e.$$isolateScope?b:t,$element:k,$attrs:C,$transclude:x};y=e.controller,"@"==y&&(y=C[e.name]),n=$(y,i),w[e.name]=n,G||k.data("$"+e.name+"Controller",n),e.controllerAs&&(i.$scope[e.controllerAs]=n)})),p=0,f=h.length;f>p;p++)g=h[p],tt(g,g.isolateScope?b:t,k,C,g.require&&m(g.directiveName,g.require,k,w),x);var E=t;for(M&&(M.template||null===M.templateUrl)&&(E=b),e&&e(E,a.childNodes,n,c),p=d.length-1;p>=0;p--)g=d[p],tt(g,g.isolateScope?b:t,k,C,g.require&&m(g.directiveName,g.require,k,w),x)}p=p||{};for(var w,x,C,S,E,O,P=-Number.MAX_VALUE,N=p.controllerDirectives,M=p.newIsolateScopeDirective,L=p.templateDirective,U=p.nonTlbTranscludeDirective,q=!1,V=!1,G=p.hasElementTranscludeDirective,X=s.$$element=Ii(r),J=u,et=a,nt=0,rt=e.length;rt>nt;nt++){x=e[nt];var ot=x.$$start,at=x.$$end;if(ot&&(X=R(r,ot,at)),S=n,P>x.priority)break;if((O=x.scope)&&(x.templateUrl||(y(O)?(K("new/isolated scope",M||w,x,X),M=x):K("new/isolated scope",M,x,X)),w=w||x),C=x.name,!x.templateUrl&&x.controller&&(O=x.controller,N=N||{},K("'"+C+"' controller",N[C],x,X),N[C]=x),(O=x.transclude)&&(q=!0,x.$$tlb||(K("transclusion",U,x,X),U=x),"element"==O?(G=!0,P=x.priority,S=X,X=s.$$element=Ii(t.createComment(" "+C+": "+s[C]+" ")),r=X[0],Q(c,H(S),r),et=T(S,a,P,J&&J.name,{nonTlbTranscludeDirective:U})):(S=Ii(vt(r)).contents(),X.empty(),et=T(S,a))),x.template)if(V=!0,K("template",L,x,X),L=x,O=k(x.template)?x.template(X,s):x.template,O=st(O),x.replace){if(J=x,S=dt(O)?[]:Ii(Y(x.templateNamespace,Bi(O))),r=S[0],1!=S.length||1!==r.nodeType)throw wr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",C,"");Q(c,X,r);var lt={$attr:{}},ct=I(r,[],lt),ut=e.splice(nt+1,e.length-(nt+1));M&&j(ct),e=e.concat(ct).concat(ut),z(s,lt),rt=e.length}else X.html(O);if(x.templateUrl)V=!0,K("template",L,x,X),L=x,x.replace&&(J=x),g=B(e.splice(nt,e.length-nt),X,s,c,q&&et,h,d,{controllerDirectives:N,newIsolateScopeDirective:M,templateDirective:L,nonTlbTranscludeDirective:U}),rt=e.length;else if(x.compile)try{E=x.compile(X,s,et),k(E)?f(null,E,ot,at):E&&f(E.pre,E.post,ot,at)}catch(ht){l(ht,W(X))}x.terminal&&(g.terminal=!0,P=Math.max(P,x.priority))}return g.scope=w&&w.scope===!0,g.transcludeOnThisElement=q,g.elementTranscludeOnThisElement=G,g.templateOnThisElement=V,g.transclude=et,p.hasElementTranscludeDirective=G,g}function j(e){for(var t=0,n=e.length;n>t;t++)e[t]=p(e[t],{$$isolateScope:!0})}function U(t,i,o,a,c,u,h){if(i===c)return null;var d=null;if(r.hasOwnProperty(i))for(var f,m=e.get(i+s),g=0,v=m.length;v>g;g++)try{f=m[g],(a===n||a>f.priority)&&-1!=f.restrict.indexOf(o)&&(u&&(f=p(f,{$$start:u,$$end:h})),t.push(f),d=f)}catch($){l($)}return d}function q(t){if(r.hasOwnProperty(t))for(var n,i=e.get(t+s),o=0,a=i.length;a>o;o++)if(n=i[o],n.multiElement)return!0;return!1}function z(e,t){var n=t.$attr,i=e.$attr,r=e.$$element;o(e,function(i,r){"$"!=r.charAt(0)&&(t[r]&&t[r]!==i&&(i+=("style"===r?";":" ")+t[r]),e.$set(r,i,!0,n[r]))}),o(t,function(t,o){"class"==o?(A(r,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==o?(r.attr("style",r.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==o.charAt(0)||e.hasOwnProperty(o)||(e[o]=t,i[o]=n[o])})}function B(e,t,n,i,r,s,a,l){var c,u,d=[],p=t[0],m=e.shift(),v=h({},m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),$=k(m.templateUrl)?m.templateUrl(t,n):m.templateUrl,b=m.templateNamespace;return t.empty(),f.get(C.getTrustedResourceUrl($),{cache:g}).success(function(h){var f,g,w,x;if(h=st(h),m.replace){if(w=dt(h)?[]:Ii(Y(b,Bi(h))),f=w[0],1!=w.length||1!==f.nodeType)throw wr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,$);g={$attr:{}},Q(i,t,f);var k=I(f,[],g);y(m.scope)&&j(k),e=k.concat(e),z(n,g)}else f=p,t.html(h);for(e.unshift(v),c=L(e,f,n,r,t,m,s,a,l),o(i,function(e,n){e==f&&(i[n]=t[0])}),u=P(t[0].childNodes,r);d.length;){var C=d.shift(),S=d.shift(),_=d.shift(),E=d.shift(),T=t[0];if(S!==p){var O=S.className;l.hasElementTranscludeDirective&&m.replace||(T=vt(f)),Q(_,Ii(S),T),A(Ii(T),O)}x=c.transcludeOnThisElement?N(C,c.transclude,E):E,c(u,C,T,i,x)}d=null}).error(function(e,t,n,i){throw wr("tpload","Failed to load template: {0}",i.url)}),function(e,t,n,i,r){var o=r;d?(d.push(t),d.push(n),d.push(i),d.push(o)):(c.transcludeOnThisElement&&(o=N(t,c.transclude,r)),c(u,t,n,i,o))}}function V(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function K(e,t,n,i){if(t)throw wr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,W(i))}function G(e,t){var n=i(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),i=t.length;return i&&A(e.parent(),"ng-binding"),function(e,t){var r=t.parent(),o=r.data("$binding")||[];o.push(n),r.data("$binding",o),i||A(r,"ng-binding"),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function Y(e,n){switch(e=Ei(e||"html")){case"svg":case"math":var i=t.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function X(e,t){if("srcdoc"==t)return C.HTML;var n=Di(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?C.RESOURCE_URL:void 0}function J(e,t,n,r,o){var s=i(n,!0);if(s){if("multiple"===r&&"select"===Di(e))throw wr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",W(e));t.push({priority:100,compile:function(){return{pre:function(t,n,a){var l=a.$$observers||(a.$$observers={});if(d.test(r))throw wr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");s=i(a[r],!0,X(e,r),u[r]||o),s&&(a[r]=s(t),(l[r]||(l[r]=[])).$$inter=!0,(a.$$observers&&a.$$observers[r].$$scope||t).$watch(s,function(e,t){"class"===r&&e!=t?a.$updateClass(e,t):a.$set(r,e)}))}}}})}}function Q(e,n,i){var r,o,s=n[0],a=n.length,l=s.parentNode;if(e)for(r=0,o=e.length;o>r;r++)if(e[r]==s){e[r++]=i;for(var c=r,u=c+a-1,h=e.length;h>c;c++,u++)h>u?e[c]=e[u]:delete e[c];e.length-=a-1,e.context===s&&(e.context=i);break}l&&l.replaceChild(i,s);var d=t.createDocumentFragment();d.appendChild(s),Ii(i).data(Ii(s).data()),Ri?(Wi=!0,Ri.cleanData([s])):delete Ii.cache[s[Ii.expando]];for(var p=1,f=n.length;f>p;p++){var m=n[p];Ii(m).remove(),d.appendChild(m),delete n[p]}n[0]=i,n.length=1}function Z(e,t){return h(function(){return e.apply(null,arguments)},e,t)}function tt(e,t,n,i,r,o){try{e(t,n,i,r,o)}catch(s){l(s,W(n))}}var it=function(e,t){if(t){var n,i,r,o=Object.keys(t);for(n=0,i=o.length;i>n;n++)r=o[n],this[r]=t[r]}else this.$attr={};this.$$element=e};it.prototype={$normalize:Vt,$addClass:function(e){e&&e.length>0&&S.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&S.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Kt(e,t),i=Kt(t,e);0===n.length?S.removeClass(this.$$element,i):0===i.length?S.addClass(this.$$element,n):S.setClass(this.$$element,n,i)},$set:function(e,t,i,r){var s,a=this.$$element[0],c=Pt(a,e),u=Nt(a,e),h=e;c?(this.$$element.prop(e,t),r=c):u&&(this[u]=t,h=u),this[e]=t,r?this.$attr[e]=r:(r=this.$attr[e],r||(this.$attr[e]=r=et(e,"-"))),s=Di(this.$$element),("a"===s&&"href"===e||"img"===s&&"src"===e)&&(this[e]=t=E(t,"src"===e)),i!==!1&&(null===t||t===n?this.$$element.removeAttr(r):this.$$element.attr(r,t));var d=this.$$observers;d&&o(d[h],function(e){try{e(t)}catch(n){l(n)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers={}),r=i[e]||(i[e]=[]);return r.push(t),w.$evalAsync(function(){r.$$inter||t(n[e])}),function(){M(r,t)}}};var rt=i.startSymbol(),ot=i.endSymbol(),st="{{"==rt||"}}"==ot?m:function(e){return e.replace(/\{\{/g,rt).replace(/}}/g,ot)},at=/^ngAttr[A-Z]/;return T}]}function Vt(e){return ht(e.replace(xr,""))}function Kt(e,t){var n="",i=e.split(/\s+/),r=t.split(/\s+/);e:for(var o=0;o<i.length;o++){for(var s=i[o],a=0;a<r.length;a++)if(s==r[a])continue e;n+=(n.length>0?" ":"")+s}return n}function Gt(){var e={},t=!1,r=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){rt(t,"controller"),y(t)?h(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(o,s){return function(a,l){var c,u,h,d;if(b(a)&&(u=a.match(r),h=u[1],d=u[3],a=e.hasOwnProperty(h)?e[h]:ot(l.$scope,h,!0)||(t?ot(s,h,!0):n),it(a,h,!0)),c=o.instantiate(a,l,h),d){if(!l||"object"!=typeof l.$scope)throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",h||a.name,d);l.$scope[d]=c}return c}}]}function Yt(){this.$get=["$window",function(e){return Ii(e.document)}]}function Xt(){this.$get=["$log",function(e){return function(){e.error.apply(e,arguments)}}]}function Jt(e){var t,n,i,r={};return e?(o(e.split("\n"),function(e){i=e.indexOf(":"),t=Ei(Bi(e.substr(0,i))),n=Bi(e.substr(i+1)),t&&(r[t]=r[t]?r[t]+", "+n:n)}),r):r}function Qt(e){var t=y(e)?e:n;return function(n){return t||(t=Jt(e)),n?t[Ei(n)]||null:t}}function Zt(e,t,n){return k(n)?n(e,t):(o(n,function(n){e=n(e,t)}),e)}function en(e){return e>=200&&300>e}function tn(){var e=/^\s*(\[|\{[^\{])/,t=/[\}\]]\s*$/,i=/^\)\]\}',?\n/,r={"Content-Type":"application/json;charset=utf-8"},s=this.defaults={transformResponse:[function(n){return b(n)&&(n=n.replace(i,""),e.test(n)&&t.test(n)&&(n=B(n))),n}],transformRequest:[function(e){return!y(e)||E(e)||T(e)?e:z(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(r),put:L(r),patch:L(r)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},l=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(e,t,i,r,c,u){function d(e){function t(e){var t=h({},e,{data:Zt(e.data,e.headers,r.transformResponse)});return en(e.status)?t:c.reject(t)}function i(e){function t(e){var t;o(e,function(n,i){k(n)&&(t=n(),null!=t?e[i]=t:delete e[i])})}var n,i,r,a=s.headers,l=h({},e.headers);a=h({},a.common,a[Ei(e.method)]);e:for(n in a){i=Ei(n);for(r in l)if(Ei(r)===i)continue e;l[n]=a[n]}return t(l),l}var r={method:"get",transformRequest:s.transformRequest,transformResponse:s.transformResponse},a=i(e);h(r,e),r.headers=a,r.method=Oi(r.method);var l=function(e){a=e.headers;var n=Zt(e.data,Qt(a),e.transformRequest);return v(n)&&o(a,function(e,t){"content-type"===Ei(t)&&delete a[t]}),v(e.withCredentials)&&!v(s.withCredentials)&&(e.withCredentials=s.withCredentials),m(e,n,a).then(t,t)},u=[l,n],d=c.when(r);for(o(C,function(e){(e.request||e.requestError)&&u.unshift(e.request,e.requestError),(e.response||e.responseError)&&u.push(e.response,e.responseError)});u.length;){var p=u.shift(),f=u.shift();d=d.then(p,f)}return d.success=function(e){return d.then(function(t){e(t.data,t.status,t.headers,r)}),d},d.error=function(e){return d.then(null,function(t){e(t.data,t.status,t.headers,r)}),d},d}function p(){o(arguments,function(e){d[e]=function(t,n){return d(h(n||{},{method:e,url:t}))}})}function f(){o(arguments,function(e){d[e]=function(t,n,i){return d(h(i||{},{method:e,url:t,data:n}))}})}function m(i,o,a){function l(e,t,n,i){p&&(en(e)?p.put(x,[e,t,Jt(n),i]):p.remove(x)),u(t,e,n,i),r.$$phase||r.$apply()}function u(e,t,n,r){t=Math.max(t,0),(en(t)?m.resolve:m.reject)({data:e,status:t,headers:Qt(n),config:i,statusText:r})}function h(){var e=R(d.pendingRequests,i);-1!==e&&d.pendingRequests.splice(e,1)}var p,f,m=c.defer(),b=m.promise,x=g(i.url,i.params);if(d.pendingRequests.push(i),b.then(h,h),!i.cache&&!s.cache||i.cache===!1||"GET"!==i.method&&"JSONP"!==i.method||(p=y(i.cache)?i.cache:y(s.cache)?s.cache:w),p)if(f=p.get(x),$(f)){if(O(f))return f.then(h,h),f;zi(f)?u(f[1],f[0],L(f[2]),f[3]):u(f,200,{},"OK")}else p.put(x,b);if(v(f)){var k=Bn(i.url)?t.cookies()[i.xsrfCookieName||s.xsrfCookieName]:n;k&&(a[i.xsrfHeaderName||s.xsrfHeaderName]=k),e(i.method,x,o,l,a,i.timeout,i.withCredentials,i.responseType)}return b}function g(e,t){if(!t)return e;var n=[];return a(t,function(e,t){null===e||v(e)||(zi(e)||(e=[e]),o(e,function(e){y(e)&&(x(e)?e=e.toISOString():y(e)&&(e=z(e))),n.push(X(t)+"="+X(e))}))}),n.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e}var w=i("$http"),C=[];return o(l,function(e){C.unshift(b(e)?u.get(e):u.invoke(e))}),d.pendingRequests=[],p("get","delete","head","jsonp"),f("post","put","patch"),d.defaults=s,d}]}function nn(t){if(8>=Ni&&(!t.match(/^(get|post|head|put|delete|options)$/i)||!e.XMLHttpRequest))return new e.ActiveXObject("Microsoft.XMLHTTP");if(e.XMLHttpRequest)return new e.XMLHttpRequest;throw i("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function rn(){this.$get=["$browser","$window","$document",function(e,t,n){return on(e,nn,e.defer,t.angular.callbacks,n[0])}]}function on(e,t,n,i,r){function s(e,t,n){var o=r.createElement("script"),s=null;return o.type="text/javascript",o.src=e,o.async=!0,s=function(e){er(o,"load",s),er(o,"error",s),r.body.removeChild(o),o=null;var a=-1,l="unknown";e&&("load"!==e.type||i[t].called||(e={type:"error"}),l=e.type,a="error"===e.type?404:200),n&&n(a,l)},Zi(o,"load",s),Zi(o,"error",s),r.body.appendChild(o),s}var a=-1;return function(r,l,c,u,h,d,p,m){function g(){y=a,w&&w(),x&&x.abort()}function v(t,i,r,o,s){C&&n.cancel(C),w=x=null,0===i&&(i=r?200:"file"==zn(l).protocol?404:0),i=1223===i?204:i,s=s||"",t(i,r,o,s),e.$$completeOutstandingRequest(f)}var y;if(e.$$incOutstandingRequestCount(),l=l||e.url(),"jsonp"==Ei(r)){var b="_"+(i.counter++).toString(36);i[b]=function(e){i[b].data=e,i[b].called=!0};var w=s(l.replace("JSON_CALLBACK","angular.callbacks."+b),b,function(e,t){v(u,e,i[b].data,"",t),i[b]=f})}else{var x=t(r);if(x.open(r,l,!0),o(h,function(e,t){$(e)&&x.setRequestHeader(t,e)}),x.onreadystatechange=function(){if(x&&4==x.readyState){var e=null,t=null,n="";y!==a&&(e=x.getAllResponseHeaders(),t="response"in x?x.response:x.responseText),y===a&&10>Ni||(n=x.statusText),v(u,y||x.status,t,e,n)}},p&&(x.withCredentials=!0),m)try{x.responseType=m}catch(k){if("json"!==m)throw k}x.send(c||null)}if(d>0)var C=n(g,d);else O(d)&&d.then(g)}}function sn(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){function o(e){return"\\\\\\"+e}function s(o,s,d,p){function f(n){return n.replace(c,e).replace(u,t)}function m(e){try{return O(T(e))}catch(t){var n=kr("interr","Can't interpolate: {0}\n{1}",o,t.toString());i(n)}}p=!!p;for(var g,$,y,b=0,w=[],x=[],C=o.length,S=[],_=[];C>b;){if(-1==(g=o.indexOf(e,b))||-1==($=o.indexOf(t,g+a))){b!==C&&S.push(f(o.substring(b)));break}b!==g&&S.push(f(o.substring(b,g))),y=o.substring(g+a,$),w.push(y),x.push(n(y,m)),b=$+l,_.push(S.length),S.push("")}if(d&&S.length>1)throw kr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);if(!s||w.length){var E=function(e){for(var t=0,n=w.length;n>t;t++){if(p&&v(e[t]))return;S[_[t]]=e[t]}return S.join("")},T=function(e){return d?r.getTrusted(d,e):r.valueOf(e)},O=function(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=z(e)}return e};return h(function(e){var t=0,n=w.length,r=new Array(n);try{for(;n>t;t++)r[t]=x[t](e);return E(r)}catch(s){var a=kr("interr","Can't interpolate: {0}\n{1}",o,s.toString());i(a)}},{exp:o,expressions:w,$$watchDelegate:function(e,t,n){var i;return e.$watchGroup(x,function(n,r){var o=E(n);k(t)&&t.call(this,o,n!==r?i:o,e),i=o},n)}})}}var a=e.length,l=t.length,c=new RegExp(e.replace(/./g,o),"g"),u=new RegExp(t.replace(/./g,o),"g");return s.startSymbol=function(){return e},s.endSymbol=function(){return t},s}]}function an(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,i){function r(r,s,a,l){var c=t.setInterval,u=t.clearInterval,h=0,d=$(l)&&!l,p=(d?i:n).defer(),f=p.promise;return a=$(a)?a:0,f.then(null,null,r),f.$$intervalId=c(function(){p.notify(h++),a>0&&h>=a&&(p.resolve(h),u(f.$$intervalId),delete o[f.$$intervalId]),d||e.$apply()},s),o[f.$$intervalId]=p,f}var o={};return r.cancel=function(e){return e&&e.$$intervalId in o?(o[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete o[e.$$intervalId],!0):!1},r}]}function ln(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function cn(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=Y(t[n]);return t.join("/")}function un(e,t,n){var i=zn(e,n);t.$$protocol=i.protocol,t.$$host=i.hostname,t.$$port=d(i.port)||Sr[i.protocol]||null}function hn(e,t,n){var i="/"!==e.charAt(0);i&&(e="/"+e);var r=zn(e,n);t.$$path=decodeURIComponent(i&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=K(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)
}function dn(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function pn(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function fn(e){return e.substr(0,pn(e).lastIndexOf("/")+1)}function mn(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function gn(e,t){this.$$html5=!0,t=t||"";var i=fn(e);un(e,this,e),this.$$parse=function(t){var n=dn(i,t);if(!b(n))throw _r("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,i);hn(n,this,e),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=G(this.$$search),t=this.$$hash?"#"+Y(this.$$hash):"";this.$$url=cn(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+this.$$url.substr(1)},this.$$rewrite=function(r){var o,s;return(o=dn(e,r))!==n?(s=o,(o=dn(t,o))!==n?i+(dn("/",o)||o):e+s):(o=dn(i,r))!==n?i+o:i==r+"/"?i:void 0}}function vn(e,t){var n=fn(e);un(e,this,e),this.$$parse=function(i){function r(e,t,n){var i,r=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),r.exec(t)?e:(i=r.exec(e),i?i[1]:e)}var o=dn(e,i)||dn(n,i),s="#"==o.charAt(0)?dn(t,o):this.$$html5?o:"";if(!b(s))throw _r("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',i,t);hn(s,this,e),this.$$path=r(this.$$path,s,e),this.$$compose()},this.$$compose=function(){var n=G(this.$$search),i=this.$$hash?"#"+Y(this.$$hash):"";this.$$url=cn(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$rewrite=function(t){return pn(e)==pn(t)?t:void 0}}function $n(e,t){this.$$html5=!0,vn.apply(this,arguments);var n=fn(e);this.$$rewrite=function(i){var r;return e==pn(i)?i:(r=dn(n,i))?e+t+r:n===i+"/"?n:void 0},this.$$compose=function(){var n=G(this.$$search),i=this.$$hash?"#"+Y(this.$$hash):"";this.$$url=cn(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=e+t+this.$$url}}function yn(e){return function(){return this[e]}}function bn(e,t){return function(n){return v(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function wn(){var t="",n=!1;this.hashPrefix=function(e){return $(e)?(t=e,this):t},this.html5Mode=function(e){return $(e)?(n=e,this):n},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(i,r,o,s){function a(e){i.$broadcast("$locationChangeSuccess",l.absUrl(),e)}var l,c,u,h=r.baseHref(),d=r.url();n?(u=mn(d)+(h||"/"),c=o.history?gn:$n):(u=pn(d),c=vn),l=new c(u,"#"+t),l.$$parse(l.$$rewrite(d));var p=/^\s*(javascript|mailto):/i;s.on("click",function(n){if(!n.ctrlKey&&!n.metaKey&&2!=n.which){for(var o=Ii(n.target);"a"!==Di(o[0]);)if(o[0]===s[0]||!(o=o.parent())[0])return;var a=o.prop("href");if(y(a)&&"[object SVGAnimatedString]"===a.toString()&&(a=zn(a.animVal).href),!p.test(a)){if(c===$n){var h=o.attr("href")||o.attr("xlink:href");if(h&&h.indexOf("://")<0){var d="#"+t;if("/"==h[0])a=u+d+h;else if("#"==h[0])a=u+d+(l.path()||"/")+h;else{var f=l.path().split("/"),m=h.split("/");2!==f.length||f[1]||(f.length=1);for(var g=0;g<m.length;g++)"."!=m[g]&&(".."==m[g]?f.pop():m[g].length&&f.push(m[g]));a=u+d+f.join("/")}}}var v=l.$$rewrite(a);a&&!o.attr("target")&&v&&!n.isDefaultPrevented()&&(n.preventDefault(),v!=r.url()&&(l.$$parse(v),i.$apply(),e.angular["ff-684208-preventDefault"]=!0))}}}),l.absUrl()!=d&&r.url(l.absUrl(),!0),r.onUrlChange(function(e){l.absUrl()!=e&&(i.$evalAsync(function(){var t=l.absUrl();l.$$parse(e),i.$broadcast("$locationChangeStart",e,t).defaultPrevented?(l.$$parse(t),r.url(t)):a(t)}),i.$$phase||i.$digest())});var f=0;return i.$watch(function(){var e=r.url(),t=l.$$replace;return f&&e==l.absUrl()||(f++,i.$evalAsync(function(){i.$broadcast("$locationChangeStart",l.absUrl(),e).defaultPrevented?l.$$parse(e):(r.url(l.absUrl(),t),a(e))})),l.$$replace=!1,f}),l}]}function xn(){var e=!0,t=this;this.debugEnabled=function(t){return $(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function r(e){var t=n.console||{},r=t[e]||t.log||f,s=!1;try{s=!!r.apply}catch(a){}return s?function(){var e=[];return o(arguments,function(t){e.push(i(t))}),r.apply(t,e)}:function(e,t){r(e,null==t?"":t)}}return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:function(){var n=r("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function kn(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw Er("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Cn(e,t){if(e){if(e.constructor===e)throw Er("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw Er("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Er("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw Er("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function Sn(e,t){if(e){if(e.constructor===e)throw Er("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Tr||e===Or||e===Ar)throw Er("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function _n(e,t,n,i){for(var r,o=t.split("."),s=0;o.length>1;s++){r=kn(o.shift(),i);var a=e[r];a||(a={},e[r]=a),e=a}return r=kn(o.shift(),i),Cn(e,i),Cn(e[r],i),e[r]=n,n}function En(e,t,i,r,o,s){return kn(e,s),kn(t,s),kn(i,s),kn(r,s),kn(o,s),function(s,a){var l=a&&a.hasOwnProperty(e)?a:s;return null==l?l:(l=l[e],t?null==l?n:(l=l[t],i?null==l?n:(l=l[i],r?null==l?n:(l=l[r],o?null==l?n:l=l[o]:l):l):l):l)}}function Tn(e,t,i){var r=Mr[e];if(r)return r;var s=e.split("."),a=s.length;if(t.csp)r=6>a?En(s[0],s[1],s[2],s[3],s[4],i):function(e,t){var r,o=0;do r=En(s[o++],s[o++],s[o++],s[o++],s[o++],i)(e,t),t=n,e=r;while(a>o);return r};else{var l="";o(s,function(e,t){kn(e,i),l+="if(s == null) return undefined;\ns="+(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+"."+e+";\n"}),l+="return s;";var c=new Function("s","l",l);c.toString=g(l),r=c}return Mr[e]=r,r}function On(){var e=at(),t={csp:!1};this.$get=["$filter","$sniffer",function(n,i){function r(e,t,n,i){var r,o;return r=e.$watch(function(e){return i(e)},function(e,n,i){o=e,k(t)&&t.apply(this,arguments),$(e)&&i.$$postDigest(function(){$(o)&&r()})},n)}function s(e,t,n,i){function r(e){var t=!0;return o(e,function(e){$(e)||(t=!1)}),t}var s;return s=e.$watch(function(e){return i(e)},function(e,n,i){k(t)&&t.call(this,e,n,i),r(e)&&i.$$postDigest(function(){r(e)&&s()})},n)}function a(e,t,n,i){var r;return r=e.$watch(function(e){return i(e)},function(){k(t)&&t.apply(this,arguments),r()},n)}function l(e,t){if(!t)return e;var n=function(n,i){var r=e(n,i),o=t(r,n,i);return $(r)?o:r};return n.$$watchDelegate=e.$$watchDelegate,n}return t.csp=i.csp,function(i,o){var c,u,h;switch(typeof i){case"string":if(h=i=i.trim(),c=e[h],!c){":"===i.charAt(0)&&":"===i.charAt(1)&&(u=!0,i=i.substring(2));var d=new Ir(t),p=new Rr(d,n,t);c=p.parse(i),c.constant?c.$$watchDelegate=a:u&&(c.$$watchDelegate=c.literal?s:r),e[h]=c}return l(c,o);case"function":return l(i,o);default:return l(f,o)}}}]}function An(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Nn(function(t){e.$evalAsync(t)},t)}]}function Pn(){this.$get=["$browser","$exceptionHandler",function(e,t){return Nn(function(t){e.defer(t)},t)}]}function Nn(e,t){function i(e,t,n){function i(t){return function(n){r||(r=!0,t.call(e,n))}}var r=!1;return[i(t),i(n)]}function r(){this.$$state={status:0}}function s(e,t){return function(n){t.call(e,n)}}function a(e){var i,r,o;o=e.pending,e.processScheduled=!1,e.pending=n;for(var s=0,a=o.length;a>s;++s){r=o[s][0],i=o[s][e.status];try{k(i)?r.resolve(i(e.value)):1===e.status?r.resolve(e.value):r.reject(e.value)}catch(l){r.reject(l),t(l)}}}function l(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){a(t)}))}function c(){this.promise=new r,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function u(e){var t=new c,n=0,i=zi(e)?[]:{};return o(e,function(e,r){n++,m(e).then(function(e){i.hasOwnProperty(r)||(i[r]=e,--n||t.resolve(i))},function(e){i.hasOwnProperty(r)||t.reject(e)})}),0===n&&t.resolve(i),t.promise}var h=function(){return new c};r.prototype={then:function(e,t,n){var i=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,e,t,n]),this.$$state.status>0&&l(this.$$state),i.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return f(t,!0,e)},function(t){return f(t,!1,e)},t)}},c.prototype={resolve:function(e){if(!this.promise.$$state.status){if(e===this.promise)throw new TypeError("Cycle detected");this.$$resolve(e)}},$$resolve:function(e){var n,r;r=i(this,this.$$resolve,this.$$reject);try{(y(e)||k(e))&&(n=e&&e.then),k(n)?(this.promise.$$state.status=-1,n.call(e,r[0],r[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,l(this.promise.$$state))}catch(o){r[1](o),t(o)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&e(function(){for(var e,r,o=0,s=i.length;s>o;o++){r=i[o][0],e=i[o][3];try{r.notify(k(e)?e(n):n)}catch(a){t(a)}}})}};var d=function(e){var t=new c;return t.reject(e),t.promise},p=function(e,t){var n=new c;return t?n.resolve(e):n.reject(e),n.promise},f=function(e,t,n){var i=null;try{k(n)&&(i=n())}catch(r){return p(r,!1)}return O(i)?i.then(function(){return p(e,t)},function(e){return p(e,!1)}):p(e,t)},m=function(e,t,n,i){var r=new c;return r.resolve(e),r.promise.then(t,n,i)},g=function v(e){function t(e){i.resolve(e)}function n(e){i.reject(e)}if(!k(e))throw new TypeError("Expected resolverFn");if(!(this instanceof v))return new v(e);var i=new c;return e(t,n),i.promise};return g.defer=h,g.reject=d,g.when=m,g.all=u,g}function In(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(e){var t=n(e);return function(){i(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=r,o}]}function Rn(){var e=10,t=i("$rootScope"),n=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(i,s,a,l){function u(){this.$id=c(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function h(e){if(g.$$phase)throw t("inprog","{0} already in progress",g.$$phase);g.$$phase=e}function d(){g.$$phase=null}function p(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function m(){}u.prototype={constructor:u,$new:function(e){var t;return e?(t=new u,t.$root=this.$root,t.$$asyncQueue=this.$$asyncQueue,t.$$postDigestQueue=this.$$postDigestQueue):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=c(),this.$$ChildScope=null},this.$$ChildScope.prototype=this),t=new this.$$ChildScope),t["this"]=t,t.$parent=this,t.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=t,this.$$childTail=t):this.$$childHead=this.$$childTail=t,t},$watch:function(e,t,i){var r=a(e);if(r.$$watchDelegate)return r.$$watchDelegate(this,t,i,r);var o=this,s=o.$$watchers,l={fn:t,last:m,get:r,exp:e,eq:!!i};return n=null,k(t)||(l.fn=f),s||(s=o.$$watchers=[]),s.unshift(l),function(){M(s,l),n=null}},$watchGroup:function(e,t){function n(){l=!1,c?(c=!1,t(r,r,a)):t(r,i,a)}var i=new Array(e.length),r=new Array(e.length),s=[],a=this,l=!1,c=!0;if(!e.length){var u=!0;return a.$evalAsync(function(){u&&t(r,r,a)}),function(){u=!1}}return 1===e.length?this.$watch(e[0],function(e,n,o){r[0]=e,i[0]=n,t(r,e===n?r:i,o)}):(o(e,function(e,t){var o=a.$watch(e,function(e,o){r[t]=e,i[t]=o,l||(l=!0,a.$evalAsync(n))});s.push(o)}),function(){for(;s.length;)s.shift()()})},$watchCollection:function(e,t){function n(e){o=e;var t,n,i,a,l;if(y(o))if(r(o)){s!==p&&(s=p,g=s.length=0,h++),t=o.length,g!==t&&(h++,s.length=g=t);for(var c=0;t>c;c++)l=s[c],a=o[c],i=l!==l&&a!==a,i||l===a||(h++,s[c]=a)}else{s!==f&&(s=f={},g=0,h++),t=0;for(n in o)o.hasOwnProperty(n)&&(t++,a=o[n],l=s[n],n in s?(i=l!==l&&a!==a,i||l===a||(h++,s[n]=a)):(g++,s[n]=a,h++));if(g>t){h++;for(n in s)o.hasOwnProperty(n)||(g--,delete s[n])}}else s!==o&&(s=o,h++);return h}function i(){if(m?(m=!1,t(o,o,c)):t(o,l,c),u)if(y(o))if(r(o)){l=new Array(o.length);for(var e=0;e<o.length;e++)l[e]=o[e]}else{l={};for(var n in o)Ti.call(o,n)&&(l[n]=o[n])}else l=o}var o,s,l,c=this,u=t.length>1,h=0,d=a(e,n),p=[],f={},m=!0,g=0;return this.$watch(d,i)},$digest:function(){var i,r,o,a,l,c,u,p,f,g,v,$=this.$$asyncQueue,y=this.$$postDigestQueue,b=e,w=this,x=[];h("$digest"),n=null;do{for(c=!1,p=w;$.length;){try{v=$.shift(),v.scope.$eval(v.expression)}catch(C){s(C)}n=null}e:do{if(a=p.$$watchers)for(l=a.length;l--;)try{if(i=a[l])if((r=i.get(p))===(o=i.last)||(i.eq?F(r,o):"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))){if(i===n){c=!1;break e}}else c=!0,n=i,i.last=i.eq?D(r,null):r,i.fn(r,o===m?r:o,p),5>b&&(f=4-b,x[f]||(x[f]=[]),g=k(i.exp)?"fn: "+(i.exp.name||i.exp.toString()):i.exp,g+="; newVal: "+z(r)+"; oldVal: "+z(o),x[f].push(g))}catch(C){s(C)}if(!(u=p.$$childHead||p!==w&&p.$$nextSibling))for(;p!==w&&!(u=p.$$nextSibling);)p=p.$parent}while(p=u);if((c||$.length)&&!b--)throw d(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,z(x))}while(c||$.length);for(d();y.length;)try{y.shift()()}catch(C){s(C)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==g){for(var t in this.$$listenerCount)p(this,this.$$listenerCount[t],t);e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=f,this.$on=this.$watch=this.$watchGroup=function(){return f}}}},$eval:function(e,t){return a(e)(this,t)},$evalAsync:function(e){g.$$phase||g.$$asyncQueue.length||l.defer(function(){g.$$asyncQueue.length&&g.$digest()}),this.$$asyncQueue.push({scope:this,expression:e})},$$postDigest:function(e){this.$$postDigestQueue.push(e)},$apply:function(e){try{return h("$apply"),this.$eval(e)}catch(t){s(t)}finally{d();try{g.$digest()}catch(t){throw s(t),t}}},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var i=this;do i.$$listenerCount[e]||(i.$$listenerCount[e]=0),i.$$listenerCount[e]++;while(i=i.$parent);var r=this;return function(){n[R(n,t)]=null,p(r,1,e)}},$emit:function(e){var t,n,i,r=[],o=this,a=!1,l={name:e,targetScope:o,stopPropagation:function(){a=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=j([l],arguments,1);do{for(t=o.$$listeners[e]||r,l.currentScope=o,n=0,i=t.length;i>n;n++)if(t[n])try{t[n].apply(null,c)}catch(u){s(u)}else t.splice(n,1),n--,i--;if(a)return l.currentScope=null,l;o=o.$parent}while(o);return l.currentScope=null,l},$broadcast:function(e){var t=this,n=t,i=t,r={name:e,targetScope:t,preventDefault:function(){r.defaultPrevented=!0},defaultPrevented:!1};if(!t.$$listenerCount[e])return r;for(var o,a,l,c=j([r],arguments,1);n=i;){for(r.currentScope=n,o=n.$$listeners[e]||[],a=0,l=o.length;l>a;a++)if(o[a])try{o[a].apply(null,c)}catch(u){s(u)}else o.splice(a,1),a--,l--;if(!(i=n.$$listenerCount[e]&&n.$$childHead||n!==t&&n.$$nextSibling))for(;n!==t&&!(i=n.$$nextSibling);)n=n.$parent}return r.currentScope=null,r}};var g=new u;return g}]}function Mn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return $(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return $(e)?(t=e,this):t},this.$get=function(){return function(n,i){var r,o=i?t:e;return Ni&&!(Ni>=8)||(r=zn(n).href,""===r||r.match(o))?n:"unsafe:"+r}}}function Dn(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Ln(e){if("self"===e)return e;if(b(e)){if(e.indexOf("***")>-1)throw Dr("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Dn(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(C(e))return new RegExp("^"+e.source+"$");throw Dr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Fn(e){var t=[];return $(e)&&o(e,function(e){t.push(Ln(e))}),t}function jn(){this.SCE_CONTEXTS=Lr;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Fn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Fn(e)),t},this.$get=["$injector",function(i){function r(e,t){return"self"===e?Bn(t):!!e.exec(t.href)}function o(n){var i,o,s=zn(n.toString()),a=!1;for(i=0,o=e.length;o>i;i++)if(r(e[i],s)){a=!0;break}if(a)for(i=0,o=t.length;o>i;i++)if(r(t[i],s)){a=!1;break}return a}function s(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function a(e,t){var i=d.hasOwnProperty(e)?d[e]:null;if(!i)throw Dr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw Dr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new i(t)}function l(e){return e instanceof h?e.$$unwrapTrustedValue():e}function c(e,t){if(null===t||t===n||""===t)return t;var i=d.hasOwnProperty(e)?d[e]:null;if(i&&t instanceof i)return t.$$unwrapTrustedValue();if(e===Lr.RESOURCE_URL){if(o(t))return t;throw Dr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Lr.HTML)return u(t);throw Dr("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(){throw Dr("unsafe","Attempting to use an unsafe value in a safe context.")};i.has("$sanitize")&&(u=i.get("$sanitize"));var h=s(),d={};return d[Lr.HTML]=s(h),d[Lr.CSS]=s(h),d[Lr.URL]=s(h),d[Lr.JS]=s(h),d[Lr.RESOURCE_URL]=s(d[Lr.URL]),{trustAs:a,getTrusted:c,valueOf:l}}]}function Hn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sniffer","$sceDelegate",function(t,n,i){if(e&&n.msie&&n.msieDocumentMode<8)throw Dr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=L(Lr);r.isEnabled=function(){return e},r.trustAs=i.trustAs,r.getTrusted=i.getTrusted,r.valueOf=i.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=m),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,function(t){return r.getTrusted(e,t)})};var s=r.parseAs,a=r.getTrusted,l=r.trustAs;return o(Lr,function(e,t){var n=Ei(t);r[ht("parse_as_"+n)]=function(t){return s(e,t)},r[ht("get_trusted_"+n)]=function(t){return a(e,t)},r[ht("trust_as_"+n)]=function(t){return l(e,t)}}),r}]}function Un(){this.$get=["$window","$document",function(e,t){var n,i,r={},o=d((/android (\d+)/.exec(Ei((e.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((e.navigator||{}).userAgent),a=t[0]||{},l=a.documentMode,c=/^(Moz|webkit|O|ms)(?=[A-Z])/,u=a.body&&a.body.style,h=!1,p=!1;if(u){for(var f in u)if(i=c.exec(f)){n=i[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in u&&"webkit"),h=!!("transition"in u||n+"Transition"in u),p=!!("animation"in u||n+"Animation"in u),!o||h&&p||(h=b(a.body.style.webkitTransition),p=b(a.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>o||s),hashchange:"onhashchange"in e&&(!l||l>7),hasEvent:function(e){if("input"==e&&9==Ni)return!1;if(v(r[e])){var t=a.createElement("div");r[e]="on"+e in t}return r[e]},csp:Vi(),vendorPrefix:n,transitions:h,animations:p,android:o,msie:Ni,msieDocumentMode:l}}]}function qn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,i,r){function o(o,a,l){var c,u=$(l)&&!l,h=(u?i:n).defer(),d=h.promise;return c=t.defer(function(){try{h.resolve(o())}catch(t){h.reject(t),r(t)}finally{delete s[d.$$timeoutId]}u||e.$apply()},a),d.$$timeoutId=c,s[c]=h,d}var s={};return o.cancel=function(e){return e&&e.$$timeoutId in s?(s[e.$$timeoutId].reject("canceled"),delete s[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function zn(e){var t=e;return Ni&&(Fr.setAttribute("href",t),t=Fr.href),Fr.setAttribute("href",t),{href:Fr.href,protocol:Fr.protocol?Fr.protocol.replace(/:$/,""):"",host:Fr.host,search:Fr.search?Fr.search.replace(/^\?/,""):"",hash:Fr.hash?Fr.hash.replace(/^#/,""):"",hostname:Fr.hostname,port:Fr.port,pathname:"/"===Fr.pathname.charAt(0)?Fr.pathname:"/"+Fr.pathname}}function Bn(e){var t=b(e)?zn(e):e;return t.protocol===jr.protocol&&t.host===jr.host}function Wn(){this.$get=g(e)}function Vn(e){function t(i,r){if(y(i)){var s={};return o(i,function(e,n){s[n]=t(n,e)}),s}return e.factory(i+n,r)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Gn),t("date",oi),t("filter",Kn),t("json",si),t("limitTo",ai),t("lowercase",Br),t("number",Yn),t("orderBy",li),t("uppercase",Wr)}function Kn(){return function(e,t,n){if(!zi(e))return e;var i=typeof n,r=[];r.check=function(e){for(var t=0;t<r.length;t++)if(!r[t](e))return!1;return!0},"function"!==i&&(n="boolean"===i&&n?function(e,t){return Ui.equals(e,t)}:function(e,t){if(e&&t&&"object"==typeof e&&"object"==typeof t){for(var i in e)if("$"!==i.charAt(0)&&Ti.call(e,i)&&n(e[i],t[i]))return!0;return!1}return t=(""+t).toLowerCase(),(""+e).toLowerCase().indexOf(t)>-1});var o=function(e,t){if("string"==typeof t&&"!"===t.charAt(0))return!o(e,t.substr(1));switch(typeof e){case"boolean":case"number":case"string":return n(e,t);case"object":switch(typeof t){case"object":return n(e,t);default:for(var i in e)if("$"!==i.charAt(0)&&o(e[i],t))return!0}return!1;case"array":for(var r=0;r<e.length;r++)if(o(e[r],t))return!0;return!1;default:return!1}};switch(typeof t){case"boolean":case"number":case"string":t={$:t};case"object":for(var s in t)!function(e){"undefined"!=typeof t[e]&&r.push(function(n){return o("$"==e?n:n&&n[e],t[e])})}(s);break;case"function":r.push(t);break;default:return e}for(var a=[],l=0;l<e.length;l++){var c=e[l];r.check(c)&&a.push(c)}return a}}function Gn(e){var t=e.NUMBER_FORMATS;return function(e,n){return v(n)&&(n=t.CURRENCY_SYM),Xn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,2).replace(/\u00A4/g,n)}}function Yn(e){var t=e.NUMBER_FORMATS;return function(e,n){return Xn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Xn(e,t,n,i,r){if(null==e||!isFinite(e)||y(e))return"";var o=0>e;e=Math.abs(e);var s=e+"",a="",l=[],c=!1;if(-1!==s.indexOf("e")){var u=s.match(/([\d\.]+)e(-?)(\d+)/);u&&"-"==u[2]&&u[3]>r+1?(s="0",e=0):(a=s,c=!0)}if(c)r>0&&e>-1&&1>e&&(a=e.toFixed(r));else{var h=(s.split(Hr)[1]||"").length;v(r)&&(r=Math.min(Math.max(t.minFrac,h),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+r)).toString()+"e"+-r);var d=(""+e).split(Hr),p=d[0];d=d[1]||"";var f,m=0,g=t.lgSize,$=t.gSize;if(p.length>=g+$)for(m=p.length-g,f=0;m>f;f++)(m-f)%$===0&&0!==f&&(a+=n),a+=p.charAt(f);for(f=m;f<p.length;f++)(p.length-f)%g===0&&0!==f&&(a+=n),a+=p.charAt(f);for(;d.length<r;)d+="0";r&&"0"!==r&&(a+=i+d.substr(0,r))}return l.push(o?t.negPre:t.posPre),l.push(a),l.push(o?t.negSuf:t.posSuf),l.join("")}function Jn(e,t,n){var i="";for(0>e&&(i="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),i+e}function Qn(e,t,n,i){return n=n||0,function(r){var o=r["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),Jn(o,t,i)}}function Zn(e,t){return function(n,i){var r=n["get"+e](),o=Oi(t?"SHORT"+e:e);return i[o][r]}}function ei(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=Jn(Math[t>0?"floor":"ceil"](t/60),2)+Jn(Math.abs(t%60),2)}function ti(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function ni(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function ii(e){return function(t){var n=ti(t.getFullYear()),i=ni(t),r=+i-+n,o=1+Math.round(r/6048e5);return Jn(o,e)}}function ri(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function oi(e){function t(e){var t;if(t=e.match(n)){var i=new Date(0),r=0,o=0,s=t[8]?i.setUTCFullYear:i.setFullYear,a=t[8]?i.setUTCHours:i.setHours;t[9]&&(r=d(t[9]+t[10]),o=d(t[9]+t[11])),s.call(i,d(t[1]),d(t[2])-1,d(t[3]));var l=d(t[4]||0)-r,c=d(t[5]||0)-o,u=d(t[6]||0),h=Math.round(1e3*parseFloat("0."+(t[7]||0)));return a.call(i,l,c,u,h),i}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i){var r,s,a="",l=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,b(n)&&(n=zr.test(n)?d(n):t(n)),w(n)&&(n=new Date(n)),!x(n))return n;for(;i;)s=qr.exec(i),s?(l=j(l,s,1),i=l.pop()):(l.push(i),i=null);return o(l,function(t){r=Ur[t],a+=r?r(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function si(){return function(e){return z(e,!0)}}function ai(){return function(e,t){if(!zi(e)&&!b(e))return e;if(t=1/0===Math.abs(Number(t))?Number(t):d(t),b(e))return t?t>=0?e.slice(0,t):e.slice(t,e.length):"";var n,i,r=[];for(t>e.length?t=e.length:t<-e.length&&(t=-e.length),t>0?(n=0,i=t):(n=e.length+t,i=e.length);i>n;n++)r.push(e[n]);return r}}function li(e){return function(t,n,i){function r(e,t){for(var i=0;i<n.length;i++){var r=n[i](e,t);if(0!==r)return r}return 0}function o(e,t){return t?function(t,n){return e(n,t)}:e}function s(e,t){var n=typeof e,i=typeof t;return n==i?(x(e)&&x(t)&&(e=e.valueOf(),t=t.valueOf()),"string"==n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):i>n?-1:1}if(!zi(t))return t;if(!n)return t;n=zi(n)?n:[n],n=N(n,function(t){var n=!1,i=t||m;if(b(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),i=e(t),i.constant)){var r=i();return o(function(e,t){return s(e[r],t[r])},n)}return o(function(e,t){return s(i(e),i(t))},n)});for(var a=[],l=0;l<t.length;l++)a.push(t[l]);return a.sort(o(r,i))}}function ci(e){return k(e)&&(e={link:e}),e.restrict=e.restrict||"AC",g(e)}function ui(e,t,n,i){function r(t,n){n=n?"-"+et(n,"-"):"",i.removeClass(e,(t?po:ho)+n),i.addClass(e,(t?ho:po)+n)}var s=this,a=e.parent().controller("form")||Gr,l=0,c=s.$error={},u=[];s.$name=t.name||t.ngForm,s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,a.$addControl(s),e.addClass(fo),r(!0),s.$rollbackViewValue=function(){o(u,function(e){e.$rollbackViewValue()})},s.$commitViewValue=function(){o(u,function(e){e.$commitViewValue()})},s.$addControl=function(e){rt(e.$name,"input"),u.push(e),e.$name&&(s[e.$name]=e)},s.$removeControl=function(e){e.$name&&s[e.$name]===e&&delete s[e.$name],o(c,function(t,n){s.$setValidity(n,!0,e)}),M(u,e)},s.$setValidity=function(e,t,n){var i=c[e];if(t)i&&(M(i,n),i.length||(l--,l||(r(t),s.$valid=!0,s.$invalid=!1),c[e]=!1,r(!0,e),a.$setValidity(e,!0,s)));else{if(l||r(t),i){if(I(i,n))return}else c[e]=i=[],l++,r(!1,e),a.$setValidity(e,!1,s);i.push(n),s.$valid=!1,s.$invalid=!0}},s.$setDirty=function(){i.removeClass(e,fo),i.addClass(e,mo),s.$dirty=!0,s.$pristine=!1,a.$setDirty()},s.$setPristine=function(){i.setClass(e,fo,mo+" "+Yr),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,o(u,function(e){e.$setPristine()})},s.$setSubmitted=function(){i.addClass(e,Yr),s.$submitted=!0,a.$setSubmitted()}}function hi(e,t,i,r){return e.$setValidity(t,i),i?r:n}function di(e,t){var n,i;if(t)for(n=0;n<t.length;++n)if(i=t[n],e[i])return!0;return!1}function pi(e,t,n,i,r){if(y(r)){e.$$hasNativeValidators=!0;var o=function(o){return e.$error[t]||di(r,i)||!di(r,n)?o:void e.$setValidity(t,!1)};e.$parsers.push(o)}}function fi(e,t,n,i,r,o){var s=t.prop(_i),a=t[0].placeholder,l={},c=Ei(t[0].type);if(i.$$validityState=s,!r.android){var u=!1;t.on("compositionstart",function(){u=!0}),t.on("compositionend",function(){u=!1,h()})}var h=function(r){if(!u){var o=t.val(),h=r&&r.type;if(Ni&&"input"===(r||l).type&&t[0].placeholder!==a)return void(a=t[0].placeholder);"password"===c||n.ngTrim&&"false"===n.ngTrim||(o=Bi(o));var d=s&&i.$$hasNativeValidators;(i.$viewValue!==o||""===o&&d)&&(e.$$phase?i.$setViewValue(o,h,d):e.$apply(function(){i.$setViewValue(o,h,d)}))}};if(r.hasEvent("input"))t.on("input",h);else{var d,p=function(e){d||(d=o.defer(function(){h(e),d=null}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||p(e)}),r.hasEvent("paste")&&t.on("paste cut",p)}t.on("change",h),i.$render=function(){t.val(i.$isEmpty(i.$viewValue)?"":i.$viewValue)}}function mi(e){if(x(e))return e;if(b(e)){ro.lastIndex=0;var t=ro.exec(e);if(t){var n=+t[1],i=+t[2],r=ti(n),o=7*(i-1);return new Date(n,0,r.getDate()+o)}}return 0/0}function gi(e,t){return function(n){var i,r;return x(n)?n:b(n)&&(e.lastIndex=0,i=e.exec(n))?(i.shift(),r={yyyy:0,MM:1,dd:1,HH:0,mm:0},o(i,function(e,n){n<t.length&&(r[t[n]]=+e)}),new Date(r.yyyy,r.MM-1,r.dd,r.HH,r.mm)):0/0}}function vi(e,t,i,r){return function(o,s,a,l,c,u,h){if(fi(o,s,a,l,c,u),l.$parsers.push(function(r){return l.$isEmpty(r)?(l.$setValidity(e,!0),null):t.test(r)?(l.$setValidity(e,!0),i(r)):(l.$setValidity(e,!1),n)}),l.$formatters.push(function(e){return x(e)?h("date")(e,r):""}),a.min){var d=function(e){var t=l.$isEmpty(e)||i(e)>=i(a.min);return l.$setValidity("min",t),t?e:n};l.$parsers.push(d),l.$formatters.push(d)}if(a.max){var p=function(e){var t=l.$isEmpty(e)||i(e)<=i(a.max);return l.$setValidity("max",t),t?e:n};l.$parsers.push(p),l.$formatters.push(p)}}}function $i(e,t,i,r,o,s){if(fi(e,t,i,r,o,s),r.$parsers.push(function(e){var t=r.$isEmpty(e);return t||to.test(e)?(r.$setValidity("number",!0),""===e?null:t?e:parseFloat(e)):(r.$setValidity("number",!1),n)}),pi(r,"number",co,null,r.$$validityState),r.$formatters.push(function(e){return r.$isEmpty(e)?"":""+e}),i.min){var a=function(e){var t=parseFloat(i.min);return hi(r,"min",r.$isEmpty(e)||e>=t,e)};r.$parsers.push(a),r.$formatters.push(a)}if(i.max){var l=function(e){var t=parseFloat(i.max);return hi(r,"max",r.$isEmpty(e)||t>=e,e)};r.$parsers.push(l),r.$formatters.push(l)}r.$formatters.push(function(e){return hi(r,"number",r.$isEmpty(e)||w(e),e)})}function yi(e,t,n,i,r,o){fi(e,t,n,i,r,o),i.$validators.url=function(e,t){var n=e||t;return i.$isEmpty(n)||Zr.test(n)}}function bi(e,t,n,i,r,o){fi(e,t,n,i,r,o),i.$validators.email=function(e,t){var n=e||t;return i.$isEmpty(n)||eo.test(n)}}function wi(e,t,n,i){v(n.name)&&t.attr("name",c());var r=function(r){t[0].checked&&e.$apply(function(){i.$setViewValue(n.value,r&&r.type)})};t.on("click",r),i.$render=function(){var e=n.value;t[0].checked=e==i.$viewValue},n.$observe("value",i.$render)}function xi(e,t,n,r,o){var s;if($(r)){if(s=e(r),!s.constant)throw new i("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);
return s(t)}return o}function ki(e,t,n,i,r,o,s,a){var l=xi(a,e,"ngTrueValue",n.ngTrueValue,!0),c=xi(a,e,"ngFalseValue",n.ngFalseValue,!1),u=function(n){e.$apply(function(){i.$setViewValue(t[0].checked,n&&n.type)})};t.on("click",u),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return e!==l},i.$formatters.push(function(e){return F(e,l)}),i.$parsers.push(function(e){return e?l:c})}function Ci(e,t){return e="ngClass"+e,["$animate",function(n){function i(e,t){var n=[];e:for(var i=0;i<e.length;i++){for(var r=e[i],o=0;o<t.length;o++)if(r==t[o])continue e;n.push(r)}return n}function r(e){if(zi(e))return e;if(b(e))return e.split(" ");if(y(e)){var t=[];return o(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(s,a,l){function c(e){var t=h(e,1);l.$addClass(t)}function u(e){var t=h(e,-1);l.$removeClass(t)}function h(e,t){var n=a.data("$classCounts")||{},i=[];return o(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&i.push(e))}),a.data("$classCounts",n),i.join(" ")}function d(e,t){var r=i(t,e),o=i(e,t);o=h(o,-1),r=h(r,1),0===r.length?n.removeClass(a,o):0===o.length?n.addClass(a,r):n.setClass(a,r,o)}function p(e){if(t===!0||s.$index%2===t){var n=r(e||[]);if(f){if(!F(e,f)){var i=r(f);d(i,n)}}else c(n)}f=L(e)}var f;s.$watch(l[e],p,!0),l.$observe("class",function(){p(s.$eval(l[e]))}),"ngClass"!==e&&s.$watch("$index",function(n,i){var o=1&n;if(o!==(1&i)){var a=r(s.$eval(l[e]));o===t?c(a):u(a)}})}}}]}var Si=/^\/(.+)\/([a-z]*)$/,_i="validity",Ei=function(e){return b(e)?e.toLowerCase():e},Ti=Object.prototype.hasOwnProperty,Oi=function(e){return b(e)?e.toUpperCase():e},Ai=function(e){return b(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Pi=function(e){return b(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Ei=Ai,Oi=Pi);var Ni,Ii,Ri,Mi,Di,Li=[].slice,Fi=[].push,ji=Object.prototype.toString,Hi=i("ng"),Ui=e.angular||(e.angular={}),qi=0;Ni=d((/msie (\d+)/.exec(Ei(navigator.userAgent))||[])[1]),isNaN(Ni)&&(Ni=d((/trident\/.*; rv:(\d+)/.exec(Ei(navigator.userAgent))||[])[1])),f.$inject=[],m.$inject=[];var zi=Array.isArray,Bi=function(e){return b(e)?e.trim():e};Di=9>Ni?function(e){return e=e.nodeName?e:e[0],Ei(e.scopeName&&"HTML"!=e.scopeName?e.scopeName+":"+e.nodeName:e.nodeName)}:function(e){return Ei(e.nodeName?e.nodeName:e[0].nodeName)};var Wi,Vi=function(){if($(Vi.isActive_))return Vi.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(n){e=!0}return Vi.isActive_=e},Ki=["ng-","data-ng-","ng:","x-ng-"],Gi=/[A-Z]/g,Yi=!1,Xi={full:"1.3.0-build.3104+sha.addfc56",major:1,minor:3,dot:0,codeName:"snapshot"};gt.expando="ng339";var Ji=gt.cache={},Qi=1,Zi=function(e,t,n){e.addEventListener(t,n,!1)},er=function(e,t,n){e.removeEventListener(t,n,!1)};gt._data=function(e){return this.cache[e[this.expando]]||{}};var tr=/([\:\-\_]+(.))/g,nr=/^moz([A-Z])/,ir={mouseleave:"mouseout",mouseenter:"mouseover"},rr=i("jqLite"),or=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,sr=/<|&#?\w+;/,ar=/<([\w:]+)/,lr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,cr={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};cr.optgroup=cr.option,cr.tbody=cr.tfoot=cr.colgroup=cr.caption=cr.thead,cr.th=cr.td;var ur=gt.prototype={ready:function(n){function i(){r||(r=!0,n())}var r=!1;"complete"===t.readyState?setTimeout(i):(this.on("DOMContentLoaded",i),gt(e).on("load",i),this.on("DOMContentLoaded",i))},toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Ii(e>=0?this[e]:this[this.length+e])},length:0,push:Fi,sort:[].sort,splice:[].splice},hr={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){hr[Ei(e)]=e});var dr={};o("input,select,option,textarea,button,form,details".split(","),function(e){dr[e]=!0});var pr={ngMinlength:"minlength",ngMaxlength:"maxlength",ngPattern:"pattern"};o({data:xt,removeData:bt},function(e,t){gt[t]=e}),o({data:xt,inheritedData:Tt,scope:function(e){return Ii.data(e,"$scope")||Tt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Ii.data(e,"$isolateScope")||Ii.data(e,"$isolateScopeNoTemplate")},controller:Et,injector:function(e){return Tt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:kt,css:function(e,t,n){return t=ht(t),$(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,i){var r=Ei(t);if(hr[r]){if(!$(i))return e[t]||(e.attributes.getNamedItem(t)||f).specified?r:n;i?(e[t]=!0,e.setAttribute(t,r)):(e[t]=!1,e.removeAttribute(r))}else if($(i))e.setAttribute(t,i);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?n:o}},prop:function(e,t,n){return $(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(v(t)){var n=e.nodeType;return 1===n||3===n?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(v(t)){if(e.multiple&&"select"===Di(e)){var n=[];return o(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return v(t)?e.innerHTML:($t(e,!0),void(e.innerHTML=t))},empty:Ot},function(e,t){gt.prototype[t]=function(t,i){var r,o,s=this.length;if(e!==Ot&&(2==e.length&&e!==kt&&e!==Et?t:i)===n){if(y(t)){for(r=0;s>r;r++)if(e===xt)e(this[r],t);else for(o in t)e(this[r],o,t[o]);return this}for(var a=e.$dv,l=a===n?Math.min(s,1):s,c=0;l>c;c++){var u=e(this[c],t,i);a=a?a+u:u}return a}for(r=0;s>r;r++)e(this[r],t,i);return this}}),o({removeData:bt,on:function rs(e,t,n,i){if($(i))throw rr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(pt(e)){var r=wt(e,!0),o=r.events,s=r.handle;s||(s=r.handle=It(e,o));for(var a=t.indexOf(" ")>=0?t.split(" "):[t],l=a.length;l--;){t=a[l];var c=o[t];c||(o[t]=[],"mouseenter"===t||"mouseleave"===t?rs(e,ir[t],function(e){var n=this,i=e.relatedTarget;(!i||i!==n&&!n.contains(i))&&s(e,t)}):"$destroy"!==t&&Zi(e,t,s),c=o[t]),c.push(n)}}},off:yt,one:function(e,t,n){e=Ii(e),e.on(t,function i(){e.off(t,n),e.off(t,i)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;$t(e),o(new gt(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return o(e.childNodes,function(e){1===e.nodeType&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(1===n||11===n){t=new gt(t);for(var i=0,r=t.length;r>i;i++){var o=t[i];e.appendChild(o)}}},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;o(new gt(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=Ii(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:At,detach:function(e){At(e,!0)},after:function(e,t){var n=e,i=e.parentNode;t=new gt(t);for(var r=0,o=t.length;o>r;r++){var s=t[r];i.insertBefore(s,n.nextSibling),n=s}},addClass:St,removeClass:Ct,toggleClass:function(e,t,n){t&&o(t.split(" "),function(t){var i=n;v(i)&&(i=!kt(e,t)),(i?St:Ct)(e,t)})},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:vt,triggerHandler:function(e,t,n){var i,r,s,a=t.type||t,l=wt(e),c=l&&l.events,u=c&&c[a];u&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopPropagation:f,type:a,target:e},t.type&&(i=h(i,t)),r=L(u),s=n?[i].concat(n):[i],o(r,function(t){t.apply(e,s)}))}},function(e,t){gt.prototype[t]=function(t,n,i){for(var r,o=0,s=this.length;s>o;o++)v(r)?(r=e(this[o],t,n,i),$(r)&&(r=Ii(r))):_t(r,e(this[o],t,n,i));return $(r)?r:this},gt.prototype.bind=gt.prototype.on,gt.prototype.unbind=gt.prototype.off}),Mt.prototype={put:function(e,t){this[Rt(e,this.nextUid)]=t},get:function(e){return this[Rt(e,this.nextUid)]},remove:function(e){var t=this[e=Rt(e,this.nextUid)];return delete this[e],t}};var fr=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,mr=/,/,gr=/^\s*(_?)(\S+?)\1\s*$/,vr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$r=i("$injector");Ft.$$annotate=Lt;var yr=i("$animate"),br=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var i=t+"-animation";if(t&&"."!=t.charAt(0))throw yr("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=i,e.factory(i,n)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(e,t){function n(e){e&&t(e)}return{enter:function(e,t,i,r){return i?i.after(e):t.prepend(e),n(r),f},leave:function(e,t){return e.remove(),n(t),f},move:function(e,t,n,i){return this.enter(e,t,n,i)},addClass:function(e,t,i){return t=b(t)?t:zi(t)?t.join(" "):"",o(e,function(e){St(e,t)}),n(i),f},removeClass:function(e,t,i){return t=b(t)?t:zi(t)?t.join(" "):"",o(e,function(e){Ct(e,t)}),n(i),f},setClass:function(e,t,i,r){return o(e,function(e){St(e,t),Ct(e,i)}),n(r),f},enabled:f}}]}],wr=i("$compile");Wt.$inject=["$provide","$$sanitizeUriProvider"];var xr=/^(x[\:\-_]|data[\:\-_])/i,kr=i("$interpolate"),Cr=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Sr={http:80,https:443,ftp:21},_r=i("$location");$n.prototype=vn.prototype=gn.prototype={$$html5:!1,$$replace:!1,absUrl:yn("$$absUrl"),url:function(e,t){if(v(e))return this.$$url;var n=Cr.exec(e);return n[1]&&this.path(decodeURIComponent(n[1])),(n[2]||n[1])&&this.search(n[3]||""),this.hash(n[5]||"",t),this},protocol:yn("$$protocol"),host:yn("$$host"),port:yn("$$port"),path:bn("$$path",function(e){return"/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(b(e))this.$$search=K(e);else{if(!y(e))throw _r("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");o(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:v(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:bn("$$hash",m),replace:function(){return this.$$replace=!0,this}};var Er=i("$parse"),Tr=Function.prototype.call,Or=Function.prototype.apply,Ar=Function.prototype.bind,Pr=h(at(),{"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:f,"+":function(e,t,i,r){return i=i(e,t),r=r(e,t),$(i)?$(r)?i+r:i:$(r)?r:n},"-":function(e,t,n,i){return n=n(e,t),i=i(e,t),($(n)?n:0)-($(i)?i:0)},"*":function(e,t,n,i){return n(e,t)*i(e,t)},"/":function(e,t,n,i){return n(e,t)/i(e,t)},"%":function(e,t,n,i){return n(e,t)%i(e,t)},"^":function(e,t,n,i){return n(e,t)^i(e,t)},"=":f,"===":function(e,t,n,i){return n(e,t)===i(e,t)},"!==":function(e,t,n,i){return n(e,t)!==i(e,t)},"==":function(e,t,n,i){return n(e,t)==i(e,t)},"!=":function(e,t,n,i){return n(e,t)!=i(e,t)},"<":function(e,t,n,i){return n(e,t)<i(e,t)},">":function(e,t,n,i){return n(e,t)>i(e,t)},"<=":function(e,t,n,i){return n(e,t)<=i(e,t)},">=":function(e,t,n,i){return n(e,t)>=i(e,t)},"&&":function(e,t,n,i){return n(e,t)&&i(e,t)},"||":function(e,t,n,i){return n(e,t)||i(e,t)},"&":function(e,t,n,i){return n(e,t)&i(e,t)},"|":function(e,t,n,i){return i(e,t)(e,t,n(e,t))},"!":function(e,t,n){return!n(e,t)}}),Nr={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Ir=function(e){this.options=e};Ir.prototype={constructor:Ir,lex:function(e){for(this.text=e,this.index=0,this.ch=n,this.tokens=[];this.index<this.text.length;)if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else if(this.isWhitespace(this.ch))this.index++;else{var t=this.ch+this.peek(),i=t+this.peek(2),r=Pr[this.ch],o=Pr[t],s=Pr[i];s?(this.tokens.push({index:this.index,text:i,fn:s}),this.index+=3):o?(this.tokens.push({index:this.index,text:t,fn:o}),this.index+=2):r?(this.tokens.push({index:this.index,text:this.ch,fn:r}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(e){return-1!==e.indexOf(this.ch)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||" "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var i=$(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Er("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Ei(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}e=1*e,this.tokens.push({index:t,text:e,constant:!0,fn:function(){return e}})},readIdent:function(){for(var e,t,i,r,o=this,s="",a=this.index;this.index<this.text.length&&(r=this.text.charAt(this.index),"."===r||this.isIdent(r)||this.isNumber(r));)"."===r&&(e=this.index),s+=r,this.index++;if(e&&"."===s[s.length-1]&&(this.index--,s=s.slice(0,-1),e=s.lastIndexOf("."),-1===e&&(e=n)),e)for(t=this.index;t<this.text.length;){if(r=this.text.charAt(t),"("===r){i=s.substr(e-a+1),s=s.substr(0,e-a),this.index=t;break}if(!this.isWhitespace(r))break;t++}var l={index:a,text:s},c=Pr[s];if(c)l.fn=c,l.constant=!0;else{var u=Tn(s,this.options,this.text);l.fn=h(function(e,t){return u(e,t)},{assign:function(e,t){return _n(e,s,t,o.text)}})}this.tokens.push(l),i&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:i}))},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{var a=Nr[o];n+=a||o}r=!1}else if("\\"===o)r=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:i,string:n,constant:!0,fn:function(){return n}});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var Rr=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};Rr.ZERO=h(function(){return 0},{constant:!0}),Rr.prototype={constructor:Rr,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;if(this.expect("("))e=this.filterChain(),this.consume(")");else if(this.expect("["))e=this.arrayDeclaration();else if(this.expect("{"))e=this.object();else{var t=this.expect();e=t.fn,e||this.throwError("not a primary expression",t),t.constant&&(e.constant=!0,e.literal=!0)}for(var n,i;n=this.expect("(","[",".");)"("===n.text?(e=this.functionCall(e,i),i=null):"["===n.text?(i=e,e=this.objectIndex(e)):"."===n.text?(i=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw Er("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw Er("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,i){if(this.tokens.length>0){var r=this.tokens[0],o=r.text;if(o===e||o===t||o===n||o===i||!e&&!t&&!n&&!i)return r}return!1},expect:function(e,t,n,i){var r=this.peek(e,t,n,i);return r?(this.tokens.shift(),r):!1},consume:function(e){this.expect(e)||this.throwError("is unexpected, expecting ["+e+"]",this.peek())},unaryFn:function(e,t){return h(function(n,i){return e(n,i,t)},{constant:t.constant})},ternaryFn:function(e,t,n){return h(function(i,r){return e(i,r)?t(i,r):n(i,r)},{constant:e.constant&&t.constant&&n.constant})},binaryFn:function(e,t,n){return h(function(i,r){return t(i,r,e,n)},{constant:e.constant&&n.constant})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var i,r=0;r<e.length;r++){var o=e[r];o&&(i=o(t,n))}return i}},filterChain:function(){for(var e,t=this.expression();;){if(!(e=this.expect("|")))return t;t=this.binaryFn(t,e.fn,this.filter())}},filter:function(){var e,t,i=this.expect(),r=this.$filter(i.text);if(this.peek(":"))for(e=[],t=[];this.expect(":");)e.push(this.expression());return g(function(i,o,s){if(t){t[0]=s;for(var a=e.length;a--;)t[a+1]=e[a](i,o);return r.apply(n,t)}return r(s)})},expression:function(){return this.assignment()},assignment:function(){var e,t,n=this.ternary();return(t=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),function(t,i){return n.assign(t,e(t,i),i)}):n},ternary:function(){var e,t,n=this.logicalOR();return(t=this.expect("?"))?(e=this.assignment(),(t=this.expect(":"))?this.ternaryFn(n,e,this.assignment()):void this.throwError("expected :",t)):n},logicalOR:function(){for(var e,t=this.logicalAND();;){if(!(e=this.expect("||")))return t;t=this.binaryFn(t,e.fn,this.logicalAND())}},logicalAND:function(){var e,t=this.equality();return(e=this.expect("&&"))&&(t=this.binaryFn(t,e.fn,this.logicalAND())),t},equality:function(){var e,t=this.relational();return(e=this.expect("==","!=","===","!=="))&&(t=this.binaryFn(t,e.fn,this.equality())),t},relational:function(){var e,t=this.additive();return(e=this.expect("<",">","<=",">="))&&(t=this.binaryFn(t,e.fn,this.relational())),t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.fn,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.fn,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(Rr.ZERO,e.fn,this.unary()):(e=this.expect("!"))?this.unaryFn(e.fn,this.unary()):this.primary()},fieldAccess:function(e){var t=this,n=this.expect().text,i=Tn(n,this.options,this.text);return h(function(t,n,r){return i(r||e(t,n))},{assign:function(i,r,o){var s=e(i,o);return s||e.assign(i,s={}),_n(s,n,r,t.text)}})},objectIndex:function(e){var t=this,i=this.expression();return this.consume("]"),h(function(r,o){var s,a=e(r,o),l=i(r,o);return kn(l,t.text),a?s=Cn(a[l],t.text):n},{assign:function(n,r,o){var s=kn(i(n,o),t.text),a=Cn(e(n,o),t.text);return a||e.assign(n,a={}),a[s]=r}})},functionCall:function(e,t){var n=[];if(")"!==this.peekToken().text)do n.push(this.expression());while(this.expect(","));this.consume(")");var i=this.text,r=n.length?[]:null;return function(o,s){var a=t?t(o,s):o,l=e(o,s,a)||f;if(r)for(var c=n.length;c--;)r[c]=n[c](o,s);Cn(a,i),Sn(l,i);var u=l.apply?l.apply(a,r):l(r[0],r[1],r[2],r[3],r[4]);return Cn(u,i)}},arrayDeclaration:function(){var e=[],t=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var n=this.expression();e.push(n),n.constant||(t=!1)}while(this.expect(","));return this.consume("]"),h(function(t,n){for(var i=[],r=0;r<e.length;r++)i.push(e[r](t,n));return i},{literal:!0,constant:t})},object:function(){var e=[],t=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.expect(),i=n.string||n.text;this.consume(":");var r=this.expression();e.push({key:i,value:r}),r.constant||(t=!1)}while(this.expect(","));return this.consume("}"),h(function(t,n){for(var i={},r=0;r<e.length;r++){var o=e[r];i[o.key]=o.value(t,n)}return i},{literal:!0,constant:t})}};var Mr=at(),Dr=i("$sce"),Lr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Fr=t.createElement("a"),jr=zn(e.location.href,!0);Vn.$inject=["$provide"],Gn.$inject=["$locale"],Yn.$inject=["$locale"];var Hr=".",Ur={yyyy:Qn("FullYear",4),yy:Qn("FullYear",2,0,!0),y:Qn("FullYear",1),MMMM:Zn("Month"),MMM:Zn("Month",!0),MM:Qn("Month",2,1),M:Qn("Month",1,1),dd:Qn("Date",2),d:Qn("Date",1),HH:Qn("Hours",2),H:Qn("Hours",1),hh:Qn("Hours",2,-12),h:Qn("Hours",1,-12),mm:Qn("Minutes",2),m:Qn("Minutes",1),ss:Qn("Seconds",2),s:Qn("Seconds",1),sss:Qn("Milliseconds",3),EEEE:Zn("Day"),EEE:Zn("Day",!0),a:ri,Z:ei,ww:ii(2),w:ii(1)},qr=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,zr=/^\-?\d+$/;oi.$inject=["$locale"];var Br=g(Ei),Wr=g(Oi);li.$inject=["$parse"];var Vr=g({restrict:"E",compile:function(e,n){return 8>=Ni&&(n.href||n.name||n.$set("href",""),e.append(t.createComment("IE fix"))),n.href||n.xlinkHref||n.name?void 0:function(e,t){var n="[object SVGAnimatedString]"===ji.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}),Kr={};o(hr,function(e,t){if("multiple"!=e){var n=Vt("ng-"+t);Kr[n]=function(){return{restrict:"A",priority:100,link:function(e,i,r){e.$watch(r[n],function(e){r.$set(t,!!e)})}}}}}),o(pr,function(e,t){Kr[t]=function(){return{priority:100,link:function(e,n,i){if("ngPattern"===t&&"/"==i.ngPattern.charAt(0)){var r=i.ngPattern.match(Si);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}e.$watch(i[t],function(e){i.$set(t,e)})}}}}),o(["src","srcset","href"],function(e){var t=Vt("ng-"+e);Kr[t]=function(){return{priority:99,link:function(n,i,r){var o=e,s=e;"href"===e&&"[object SVGAnimatedString]"===ji.call(i.prop("href"))&&(s="xlinkHref",r.$attr[s]="xlink:href",o=null),r.$observe(t,function(t){return t?(r.$set(s,t),void(Ni&&o&&i.prop(o,r[s]))):void("href"===e&&r.$set(s,null))})}}}});var Gr={$addControl:f,$removeControl:f,$setValidity:f,$setDirty:f,$setPristine:f,$setSubmitted:f},Yr="ng-submitted";ui.$inject=["$element","$attrs","$scope","$animate"];var Xr=function(e){return["$timeout",function(t){var i={name:"form",restrict:e?"EAC":"E",controller:ui,compile:function(){return{pre:function(e,i,r,o){if(!r.action){var s=function(t){e.$apply(function(){o.$commitViewValue(),o.$setSubmitted()}),t.preventDefault?t.preventDefault():t.returnValue=!1};Zi(i[0],"submit",s),i.on("$destroy",function(){t(function(){er(i[0],"submit",s)},0,!1)})}var a=i.parent().controller("form"),l=r.name||r.ngForm;l&&_n(e,l,o,l),a&&i.on("$destroy",function(){a.$removeControl(o),l&&_n(e,l,n,l),h(o,Gr)})}}}};return i}]},Jr=Xr(),Qr=Xr(!0),Zr=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,eo=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,to=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,no=/^(\d{4})-(\d{2})-(\d{2})$/,io=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)$/,ro=/^(\d{4})-W(\d\d)$/,oo=/^(\d{4})-(\d\d)$/,so=/^(\d\d):(\d\d)$/,ao=/(\s+|^)default(\s+|$)/,lo={text:fi,date:vi("date",no,gi(no,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":vi("datetimelocal",io,gi(io,["yyyy","MM","dd","HH","mm"]),"yyyy-MM-ddTHH:mm"),time:vi("time",so,gi(so,["HH","mm"]),"HH:mm"),week:vi("week",ro,mi,"yyyy-Www"),month:vi("month",oo,gi(oo,["yyyy","MM"]),"yyyy-MM"),number:$i,url:yi,email:bi,radio:wi,checkbox:ki,hidden:f,button:f,submit:f,reset:f,file:f},co=["badInput"],uo=["$browser","$sniffer","$filter","$parse",function(e,t,n,i){return{restrict:"E",require:["?ngModel"],link:function(r,o,s,a){a[0]&&(lo[Ei(s.type)]||lo.text)(r,o,s,a[0],t,e,n,i)}}}],ho="ng-valid",po="ng-invalid",fo="ng-pristine",mo="ng-dirty",go="ng-untouched",vo="ng-touched",$o=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout",function(e,t,r,s,a,l,c){function u(e,t){t=t?"-"+et(t,"-"):"",l.removeClass(s,(e?po:ho)+t),l.addClass(s,(e?ho:po)+t)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$validators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=r.name;var h=a(r.ngModel),d=h.assign,p=null,m=this;if(!d)throw i("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,W(s));this.$render=f,this.$isEmpty=function(e){return v(e)||""===e||null===e||e!==e};var g=s.inheritedData("$formController")||Gr,y=0,b=this.$error={};s.addClass(fo).addClass(go),u(!0),this.$setValidity=function(e,t){b[e]!==!t&&(t?(b[e]&&y--,y||(u(!0),m.$valid=!0,m.$invalid=!1)):(u(!1),m.$invalid=!0,m.$valid=!1,y++),b[e]=!t,u(t,e),g.$setValidity(e,t,m))},this.$setPristine=function(){m.$dirty=!1,m.$pristine=!0,l.removeClass(s,mo),l.addClass(s,fo)},this.$setUntouched=function(){m.$touched=!1,m.$untouched=!0,l.setClass(s,go,vo)},this.$setTouched=function(){m.$touched=!0,m.$untouched=!1,l.setClass(s,vo,go)},this.$rollbackViewValue=function(){c.cancel(p),m.$viewValue=m.$$lastCommittedViewValue,m.$render()},this.$validate=function(){if(m.$modelValue===m.$modelValue){var e=m.$modelValue;m.$$runValidators(m.$$invalidModelValue||m.$modelValue,m.$viewValue),e!==m.$modelValue&&m.$$writeModelToScope()}},this.$$runValidators=function(e,t){o(m.$validators,function(n,i){m.$setValidity(i,n(e,t))}),m.$modelValue=m.$valid?e:n,m.$$invalidModelValue=m.$valid?n:e},this.$commitViewValue=function(e){var t=m.$viewValue;if(c.cancel(p),e||m.$$lastCommittedViewValue!==t){m.$$lastCommittedViewValue=t,m.$pristine&&(m.$dirty=!0,m.$pristine=!1,l.removeClass(s,fo),l.addClass(s,mo),g.$setDirty());var n=t;o(m.$parsers,function(e){n=e(n)}),m.$modelValue===n||!v(m.$$invalidModelValue)&&m.$$invalidModelValue==n||(m.$$runValidators(n,t),m.$$writeModelToScope())}},this.$$writeModelToScope=function(){var n;m.$options&&m.$options.getterSetter&&k(n=h(e))?n(m.$modelValue):d(e,m.$modelValue),o(m.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t,n){m.$viewValue=e,(!m.$options||m.$options.updateOnDefault)&&m.$$debounceViewValueCommit(t,n)},this.$$debounceViewValueCommit=function(e,t){var n,i=0,r=m.$options;r&&$(r.debounce)&&(n=r.debounce,w(n)?i=n:w(n[e])?i=n[e]:w(n["default"])&&(i=n["default"])),c.cancel(p),i?p=c(function(){m.$commitViewValue(t)},i):m.$commitViewValue(t)},e.$watch(function(){var t=h(e);if(m.$options&&m.$options.getterSetter&&k(t)&&(t=t()),m.$modelValue!==t&&(v(m.$$invalidModelValue)||m.$$invalidModelValue!=t)){for(var n=m.$formatters,i=n.length,r=t;i--;)r=n[i](r);m.$$runValidators(t,r),m.$viewValue!==r&&(m.$viewValue=m.$$lastCommittedViewValue=r,m.$render())}return t})}],yo=function(){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:$o,link:{pre:function(e,t,n,i){i[2]&&(i[0].$options=i[2].$options);var r=i[0],o=i[1]||Gr;o.$addControl(r),e.$on("$destroy",function(){o.$removeControl(r)})},post:function(e,t,n,i){var r=i[0];r.$options&&r.$options.updateOn&&t.on(r.$options.updateOn,function(t){e.$apply(function(){r.$$debounceViewValueCommit(t&&t.type)})}),t.on("blur",function(){r.$touched||e.$apply(function(){r.$setTouched()})})}}}},bo=g({restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),wo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){i&&(n.required=!0,i.$validators.required=function(e,t){return!n.required||!i.$isEmpty(t)},n.$observe("required",function(){i.$validate()}))}}},xo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,o){if(o){var s,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(b(e)&&e.length>0&&(e=new RegExp(e)),e&&!e.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,W(t));s=e||n,o.$validate()}),o.$validators.pattern=function(e){return o.$isEmpty(e)||v(s)||s.test(e)}}}}},ko=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=0;n.$observe("maxlength",function(e){r=d(e)||0,i.$validate()}),i.$validators.maxlength=function(e){return i.$isEmpty(e)||e.length<=r}}}}},Co=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=0;n.$observe("minlength",function(e){r=d(e)||0,i.$validate()}),i.$validators.minlength=function(e){return i.$isEmpty(e)||e.length>=r}}}}},So=function(){return{restrict:"A",require:"ngModel",link:function(e,t,i,r){var s=t.attr(i.$attr.ngList)||", ",a="false"!==i.ngTrim,l=a?Bi(s):s,c=function(e){if(!v(e)){var t=[];return e&&o(e.split(l),function(e){e&&t.push(a?Bi(e):e)}),t}};r.$parsers.push(c),r.$formatters.push(function(e){return zi(e)?e.join(s):n}),r.$isEmpty=function(e){return!e||!e.length}}}},_o=/^(true|false|\d+)$/,Eo=function(){return{restrict:"A",priority:100,compile:function(e,t){return _o.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},To=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var i=this;this.$options=e.$eval(t.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=Bi(this.$options.updateOn.replace(ao,function(){return i.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Oo=ci({compile:function(e){return e.addClass("ng-binding"),function(e,t,i){t.data("$binding",i.ngBind),t=t[0],e.$watch(i.ngBind,function(e){t.textContent=e==n?"":e})}}}),Ao=["$interpolate",function(e){return function(t,n,i){var r=e(n.attr(i.$attr.ngBindTemplate));n.addClass("ng-binding").data("$binding",r),i.$observe("ngBindTemplate",function(e){n.text(e)})}}],Po=["$sce","$parse",function(e,t){return{restrict:"A",compile:function(n){return n.addClass("ng-binding"),function(n,i,r){i.data("$binding",r.ngBindHtml);var o=t(r.ngBindHtml),s=t(r.ngBindHtml,function(e){return(e||"").toString()});n.$watch(s,function(){i.html(e.getTrustedHtml(o(n))||"")})}}}}],No=Ci("",!0),Io=Ci("Odd",0),Ro=Ci("Even",1),Mo=ci({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),Do=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Lo={};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Vt("ng-"+e);Lo[t]=["$parse",function(n){return{restrict:"A",compile:function(i,r){var o=n(r[t]);return function(t,n){n.on(Ei(e),function(e){t.$apply(function(){o(t,{$event:e})})})}}}}]});var Fo=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,s){var a,l,c;n.$watch(r.ngIf,function(n){n?l||s(function(n,o){l=o,n[n.length++]=t.createComment(" end ngIf: "+r.ngIf+" "),a={clone:n},e.enter(n,i.parent(),i)}):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),a&&(c=st(a.clone),e.leave(c,function(){c=null}),a=null))})}}}],jo=["$http","$templateCache","$anchorScroll","$animate","$sce",function(e,t,n,i,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Ui.noop,compile:function(o,s){var a=s.ngInclude||s.src,l=s.onload||"",c=s.autoscroll;return function(o,s,u,h,d){var p,f,m,g=0,v=function(){f&&(f.remove(),f=null),p&&(p.$destroy(),p=null),m&&(i.leave(m,function(){f=null}),f=m,m=null)};o.$watch(r.parseAsResourceUrl(a),function(r){var a=function(){!$(c)||c&&!o.$eval(c)||n()},u=++g;r?(e.get(r,{cache:t}).success(function(e){if(u===g){var t=o.$new();h.template=e;var n=d(t,function(e){v(),i.enter(e,null,s,a)});p=t,m=n,p.$emit("$includeContentLoaded"),o.$eval(l)}}).error(function(){u===g&&(v(),o.$emit("$includeContentError"))
}),o.$emit("$includeContentRequested")):(v(),h.template=null)})}}}}],Ho=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,n,i,r){n.html(r.template),e(n.contents())(t)}}}],Uo=ci({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),qo=ci({terminal:!0,priority:1e3}),zo=["$locale","$interpolate",function(e,t){var n=/{}/g;return{restrict:"EA",link:function(i,r,s){var a=s.count,l=s.$attr.when&&r.attr(s.$attr.when),c=s.offset||0,u=i.$eval(l)||{},h={},d=t.startSymbol(),p=t.endSymbol(),f=/^when(Minus)?(.+)$/;o(s,function(e,t){f.test(t)&&(u[Ei(t.replace("when","").replace("Minus","-"))]=r.attr(s.$attr[t]))}),o(u,function(e,i){h[i]=t(e.replace(n,d+a+"-"+c+p))}),i.$watch(function(){var t=parseFloat(i.$eval(a));return isNaN(t)?"":(t in u||(t=e.pluralCat(t-c)),h[t](i))},function(e){r.text(e)})}}}],Bo=["$parse","$animate",function(e,s){var a="$$NG_REMOVED",l=i("ngRepeat"),c=function(e,t,n,i,r,o,s){e[n]=i,r&&(e[r]=o),e.$index=t,e.$first=0===t,e.$last=t===s-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},u=function(e){return e.clone[0]},h=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,d){var p=d.ngRepeat,f=t.createComment(" end ngRepeat: "+p+" "),m=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw l("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var g=m[1],v=m[2],$=m[3],y=m[4];if(m=g.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!m)throw l("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var b=m[3]||m[1],w=m[2];if($&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test($)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test($)))throw l("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",$);var x,k,C,S,_={$id:Rt};return y?x=e(y):(C=function(e,t){return Rt(t)},S=function(e){return e}),function(e,t,i,d,m){x&&(k=function(t,n,i){return w&&(_[w]=t),_[b]=n,_.$index=i,x(e,_)});var g=at();e.$watchCollection(v,function(i){var d,v,y,x,_,E,T,O,A,P,N,I,R=t[0],M=at();if($&&(e[$]=i),r(i))A=i,O=k||C;else{O=k||S,A=[];for(var D in i)i.hasOwnProperty(D)&&"$"!=D.charAt(0)&&A.push(D);A.sort()}for(x=A.length,N=new Array(x),d=0;x>d;d++)if(_=i===A?d:A[d],E=i[_],T=O(_,E,d),g[T])P=g[T],delete g[T],M[T]=P,N[d]=P;else{if(M[T])throw o(N,function(e){e&&e.scope&&(g[e.id]=e)}),l("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",p,T);N[d]={id:T,scope:n,clone:n},M[T]=!0}for(var L in g){if(P=g[L],I=st(P.clone),s.leave(I),I[0].parent)for(d=0,v=I.length;v>d;d++)I[d][a]=!0;P.scope.$destroy()}for(d=0;x>d;d++)if(_=i===A?d:A[d],E=i[_],P=N[d],P.scope){y=R;do y=y.nextSibling;while(y&&y[a]);u(P)!=y&&s.move(st(P.clone),null,Ii(R)),R=h(P),c(P.scope,d,b,E,w,_,x)}else m(function(e,t){P.scope=t;var n=f.cloneNode();e[e.length++]=n,s.enter(e,null,Ii(R)),R=n,P.clone=e,M[P.id]=P,c(P.scope,d,b,E,w,_,x)});g=M})}}}}],Wo=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngShow,function(t){e[t?"removeClass":"addClass"](n,"ng-hide")})}}}],Vo=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngHide,function(t){e[t?"addClass":"removeClass"](n,"ng-hide")})}}}],Ko=ci(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&o(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),Go=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,s){var a=r.ngSwitch||r.on,l=[],c=[],u=[],h=[];n.$watch(a,function(i){var a,d;for(a=0,d=u.length;d>a;++a)u[a].remove();for(u.length=0,a=0,d=h.length;d>a;++a){var p=st(c[a].clone);h[a].$destroy(),u[a]=p,e.leave(p,function(){u.splice(a,1)})}c.length=0,h.length=0,(l=s.cases["!"+i]||s.cases["?"])&&(n.$eval(r.change),o(l,function(n){n.transclude(function(i,r){h.push(r);var o=n.element;i[i.length++]=t.createComment(" end ngSwitchWhen: ");var s={clone:i};c.push(s),e.enter(i,o.parent(),o)})}))})}}}],Yo=ci({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:t})}}),Xo=ci({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:t})}}),Jo=ci({restrict:"EAC",link:function(e,t,n,r,o){if(!o)throw i("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",W(t));o(function(e){t.empty(),t.append(e)})}}),Qo=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var i=n.id,r=t[0].text;e.put(i,r)}}}}],Zo=i("ngOptions"),es=g({restrict:"A",terminal:!0}),ts=["$compile","$parse",function(e,i){var r=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,a={$setViewValue:f};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var i,r,o=this,s={},l=a;o.databound=n.ngModel,o.init=function(e,t,n){l=e,i=t,r=n},o.addOption=function(t,n){rt(t,'"option value"'),s[t]=!0,l.$viewValue==t&&(e.val(t),r.parent()&&r.remove()),n[0].hasAttribute("selected")&&(n[0].selected=!0)},o.removeOption=function(e){this.hasOption(e)&&(delete s[e],l.$viewValue==e&&this.renderUnknownOption(e))},o.renderUnknownOption=function(t){var n="? "+Rt(t)+" ?";r.val(n),e.prepend(r),e.val(n),r.prop("selected",!0)},o.hasOption=function(e){return s.hasOwnProperty(e)},t.$on("$destroy",function(){o.renderUnknownOption=f})}],link:function(a,l,c,u){function h(e,t,n,i){n.$render=function(){var e=n.$viewValue;i.hasOption(e)?(C.parent()&&C.remove(),t.val(e),""===e&&f.prop("selected",!0)):v(e)&&f?t.val(""):i.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){C.parent()&&C.remove(),n.$setViewValue(t.val())})})}function d(e,t,n){var i;n.$render=function(){var e=new Mt(n.$viewValue);o(t.find("option"),function(t){t.selected=$(e.get(t.value))})},e.$watch(function(){F(i,n.$viewValue)||(i=L(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];o(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function p(t,o,a){function l(){var e=!1;if(y){var n=a.$modelValue;if(C&&zi(n)){e=new Mt([]);for(var i={},r=0;r<n.length;r++)i[d]=n[r],e.put(C(t,i),n[r])}else e=new Mt(n)}return e}function c(){var e,n,i,r,c,u,v,b,_,E,T,O,A,P,N,I={"":[]},R=[""],M=a.$modelValue,D=g(t)||[],L=p?s(D):D,F={},j=l();for(T=0;_=L.length,_>T;T++){if(v=T,p){if(v=L[T],"$"===v.charAt(0))continue;F[p]=v}if(F[d]=D[v],e=f(t,F)||"",(n=I[e])||(n=I[e]=[],R.push(e)),y)O=$(j.remove(C?C(t,F):m(t,F)));else{if(C){var H={};H[d]=M,O=C(t,H)===C(t,F)}else O=M===m(t,F);j=j||O}N=h(t,F),N=$(N)?N:"",n.push({id:C?C(t,F):p?L[T]:T,label:N,selected:O})}for(y||(w||null===M?I[""].unshift({id:"",label:"",selected:!j}):j||I[""].unshift({id:"?",label:"",selected:!0})),E=0,b=R.length;b>E;E++){for(e=R[E],n=I[e],S.length<=E?(r={element:k.clone().attr("label",e),label:n.label},c=[r],S.push(c),o.append(r.element)):(c=S[E],r=c[0],r.label!=e&&r.element.attr("label",r.label=e)),A=null,T=0,_=n.length;_>T;T++)i=n[T],(u=c[T+1])?(A=u.element,u.label!==i.label&&A.text(u.label=i.label),u.id!==i.id&&A.val(u.id=i.id),A[0].selected!==i.selected&&(A.prop("selected",u.selected=i.selected),Ni&&A.prop("selected",u.selected))):(""===i.id&&w?P=w:(P=x.clone()).val(i.id).prop("selected",i.selected).attr("selected",i.selected).text(i.label),c.push(u={element:P,label:i.label,id:i.id,selected:i.selected}),A?A.after(P):r.element.append(P),A=P);for(T++;c.length>T;)c.pop().element.remove()}for(;S.length>E;)S.pop()[0].element.remove()}var u;if(!(u=b.match(r)))throw Zo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",b,W(o));var h=i(u[2]||u[1]),d=u[4]||u[6],p=u[5],f=i(u[3]||""),m=i(u[2]?u[1]:d),g=i(u[7]),v=u[8],C=v?i(u[8]):null,S=[[{element:o,label:""}]];w&&(e(w)(t),w.removeClass("ng-scope"),w.remove()),o.empty(),o.on("change",function(){t.$apply(function(){var e,i,r,s,l,u,h,f,v,$=g(t)||[],b={};if(y){for(r=[],u=0,f=S.length;f>u;u++)for(e=S[u],l=1,h=e.length;h>l;l++)if((s=e[l].element)[0].selected){if(i=s.val(),p&&(b[p]=i),C)for(v=0;v<$.length&&(b[d]=$[v],C(t,b)!=i);v++);else b[d]=$[i];r.push(m(t,b))}}else if(i=o.val(),"?"==i)r=n;else if(""===i)r=null;else if(C){for(v=0;v<$.length;v++)if(b[d]=$[v],C(t,b)==i){r=m(t,b);break}}else b[d]=$[i],p&&(b[p]=i),r=m(t,b);a.$setViewValue(r),c()})}),a.$render=c,t.$watchCollection(g,c),y&&t.$watchCollection(function(){return a.$modelValue},c)}if(u[1]){for(var f,m=u[0],g=u[1],y=c.multiple,b=c.ngOptions,w=!1,x=Ii(t.createElement("option")),k=Ii(t.createElement("optgroup")),C=x.clone(),S=0,_=l.children(),E=_.length;E>S;S++)if(""===_[S].value){f=w=_.eq(S);break}m.init(g,w,C),y&&(g.$isEmpty=function(e){return!e||0===e.length}),b?p(a,l,g):y?d(a,l,g):h(a,l,g,m)}}}}],ns=["$interpolate",function(e){var t={addOption:f,removeOption:f};return{restrict:"E",priority:100,compile:function(n,i){if(v(i.value)){var r=e(n.text(),!0);r||i.$set("value",n.text())}return function(e,n,i){var o="$selectController",s=n.parent(),a=s.data(o)||s.parent().data(o);a&&a.databound?n.prop("selected",!1):a=t,r?e.$watch(r,function(e,t){i.$set("value",e),t!==e&&a.removeOption(t),a.addOption(e,n)}):a.addOption(i.value,n),n.on("$destroy",function(){a.removeOption(i.value)})}}}}],is=g({restrict:"E",terminal:!1});return e.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(tt(),ct(Ui),void Ii(t).ready(function(){Q(t,Z)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-animate){display:none !important;}ng\\:form{display:block;}</style>'),define("angular",["jquery"],function(e){return function(){var t;return t||e.angular}}(this)),function(){define("ctrl/edit",[],function(){return["$scope","$http","$location",function(e,t,n){return e.schema=schema,e.form=form,e.model=model,e.onSubmit=function(){return e.$broadcast("schemaFormValidate"),t.post(n.path(),{model:model}).success(function(e){var t;return null!=e.model&&(t=e.model),null!=e.message&&alert(e.message),window.location.href=e.url}).error(function(e){return alert(e)})}}]})}.call(this),function(e,t,n){function i(t){if(this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),this.support){this.supportDirectory=/WebKit/.test(e.navigator.userAgent),this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",prioritizeFirstAndLastChunk:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501],onDropStopPropagation:!1},this.opts={},this.events={};var n=this;this.onDrop=function(e){n.opts.onDropStopPropagation&&e.stopPropagation(),e.preventDefault();var t=e.dataTransfer;t.items&&t.items[0]&&t.items[0].webkitGetAsEntry?n.webkitReadDataTransfer(e):n.addFiles(t.files,e)},this.preventEvent=function(e){e.preventDefault()},this.opts=i.extend({},this.defaults,t||{})}}function r(e,t){this.flowObj=e,this.file=t,this.name=t.fileName||t.name,this.size=t.size,this.relativePath=t.relativePath||t.webkitRelativePath||this.name,this.uniqueIdentifier=e.generateUniqueIdentifier(t),this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function o(e,t,n){this.flowObj=e,this.fileObj=t,this.fileObjSize=t.size,this.offset=n,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.loaded=0,this.total=0;var i=this.flowObj.opts.chunkSize;this.startByte=this.offset*i,this.endByte=Math.min(this.fileObjSize,(this.offset+1)*i),this.xhr=null,this.fileObjSize-this.endByte<i&&!this.flowObj.opts.forceChunkSize&&(this.endByte=this.fileObjSize);var r=this;this.progressHandler=function(e){e.lengthComputable&&(r.loaded=e.loaded,r.total=e.total),r.fileObj.chunkEvent("progress")},this.testHandler=function(){var e=r.status();"success"===e?(r.tested=!0,r.fileObj.chunkEvent(e,r.message()),r.flowObj.uploadNextChunk()):r.fileObj.paused||(r.tested=!0,r.send())},this.doneHandler=function(){var e=r.status();if("success"===e||"error"===e)r.fileObj.chunkEvent(e,r.message()),r.flowObj.uploadNextChunk();else{r.fileObj.chunkEvent("retry",r.message()),r.pendingRetry=!0,r.abort(),r.retries++;var t=r.flowObj.opts.chunkRetryInterval;null!==t?setTimeout(function(){r.send()},t):r.send()}}}function s(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function a(e,t){return"function"==typeof e&&(t=Array.prototype.slice.call(arguments),e=e.apply(null,t.slice(1))),e}function l(e,t){setTimeout(e.bind(t),0)}function c(e){return u(arguments,function(t){t!==e&&u(t,function(t,n){e[n]=t})}),e}function u(e,t,n){if(e){var i;if("undefined"!=typeof e.length){for(i=0;i<e.length;i++)if(t.call(n,e[i],i)===!1)return}else for(i in e)if(e.hasOwnProperty(i)&&t.call(n,e[i],i)===!1)return}}i.prototype={on:function(e,t){e=e.toLowerCase(),this.events.hasOwnProperty(e)||(this.events[e]=[]),this.events[e].push(t)},off:function(e,t){e!==n?(e=e.toLowerCase(),t!==n?this.events.hasOwnProperty(e)&&s(this.events[e],t):delete this.events[e]):this.events={}},fire:function(e,t){t=Array.prototype.slice.call(arguments),e=e.toLowerCase();var n=!1;return this.events.hasOwnProperty(e)&&u(this.events[e],function(e){n=e.apply(this,t.slice(1))===!1||n}),"catchall"!=e&&(t.unshift("catchAll"),n=this.fire.apply(this,t)===!1||n),!n},webkitReadDataTransfer:function(e){function t(e){s+=e.length,u(e,function(e){if(e.isFile){var r=e.fullPath;e.file(function(e){n(e,r)},i)}else e.isDirectory&&e.createReader().readEntries(t,i)}),r()}function n(e,t){e.relativePath=t.substring(1),a.push(e),r()}function i(e){throw e}function r(){0==--s&&o.addFiles(a,e)}var o=this,s=e.dataTransfer.items.length,a=[];u(e.dataTransfer.items,function(e){var o=e.webkitGetAsEntry();return o?void(o.isFile?n(e.getAsFile(),o.fullPath):o.createReader().readEntries(t,i)):void r()})},generateUniqueIdentifier:function(e){var t=this.opts.generateUniqueIdentifier;if("function"==typeof t)return t(e);var n=e.relativePath||e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},uploadNextChunk:function(e){var t=!1;if(this.opts.prioritizeFirstAndLastChunk&&(u(this.files,function(e){return!e.paused&&e.chunks.length&&"pending"===e.chunks[0].status()&&0===e.chunks[0].preprocessState?(e.chunks[0].send(),t=!0,!1):!e.paused&&e.chunks.length>1&&"pending"===e.chunks[e.chunks.length-1].status()&&0===e.chunks[0].preprocessState?(e.chunks[e.chunks.length-1].send(),t=!0,!1):void 0}),t))return t;if(u(this.files,function(e){return e.paused||u(e.chunks,function(e){return"pending"===e.status()&&0===e.preprocessState?(e.send(),t=!0,!1):void 0}),t?!1:void 0}),t)return!0;var n=!1;return u(this.files,function(e){return e.isComplete()?void 0:(n=!0,!1)}),n||e||l(function(){this.fire("complete")},this),!1},assignBrowse:function(e,n,i,r){"undefined"==typeof e.length&&(e=[e]),u(e,function(e){var o;"INPUT"===e.tagName&&"file"===e.type?o=e:(o=t.createElement("input"),o.setAttribute("type","file"),c(o.style,{visibility:"hidden",position:"absolute"}),e.appendChild(o),e.addEventListener("click",function(){o.click()},!1)),this.opts.singleFile||i||o.setAttribute("multiple","multiple"),n&&o.setAttribute("webkitdirectory","webkitdirectory"),u(r,function(e,t){o.setAttribute(t,e)});var s=this;o.addEventListener("change",function(e){s.addFiles(e.target.files,e),e.target.value=""},!1)},this)},assignDrop:function(e){"undefined"==typeof e.length&&(e=[e]),u(e,function(e){e.addEventListener("dragover",this.preventEvent,!1),e.addEventListener("dragenter",this.preventEvent,!1),e.addEventListener("drop",this.onDrop,!1)},this)},unAssignDrop:function(e){"undefined"==typeof e.length&&(e=[e]),u(e,function(e){e.removeEventListener("dragover",this.preventEvent),e.removeEventListener("dragenter",this.preventEvent),e.removeEventListener("drop",this.onDrop)},this)},isUploading:function(){var e=!1;return u(this.files,function(t){return t.isUploading()?(e=!0,!1):void 0}),e},_shouldUploadNext:function(){var e=0,t=!0,n=this.opts.simultaneousUploads;return u(this.files,function(i){u(i.chunks,function(i){return"uploading"===i.status()&&(e++,e>=n)?(t=!1,!1):void 0})}),t&&e},upload:function(){var e=this._shouldUploadNext();if(e!==!1){this.fire("uploadStart");for(var t=!1,n=1;n<=this.opts.simultaneousUploads-e;n++)t=this.uploadNextChunk(!0)||t;t||l(function(){this.fire("complete")},this)}},resume:function(){u(this.files,function(e){e.resume()})},pause:function(){u(this.files,function(e){e.pause()})},cancel:function(){for(var e=this.files.length-1;e>=0;e--)this.files[e].cancel()},progress:function(){var e=0,t=0;return u(this.files,function(n){e+=n.progress()*n.size,t+=n.size}),t>0?e/t:0},addFile:function(e,t){this.addFiles([e],t)},addFiles:function(e,t){var n=[];u(e,function(e){if((e.size%4096!==0||"."!==e.name&&"."!==e.fileName)&&!this.getFromUniqueIdentifier(this.generateUniqueIdentifier(e))){var i=new r(this,e);this.fire("fileAdded",i,t)&&n.push(i)}},this),this.fire("filesAdded",n,t)&&u(n,function(e){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(e)},this),this.fire("filesSubmitted",n,t)},removeFile:function(e){for(var t=this.files.length-1;t>=0;t--)this.files[t]===e&&(this.files.splice(t,1),e.abort())},getFromUniqueIdentifier:function(e){var t=!1;return u(this.files,function(n){n.uniqueIdentifier===e&&(t=n)}),t},getSize:function(){var e=0;return u(this.files,function(t){e+=t.size}),e},sizeUploaded:function(){var e=0;return u(this.files,function(t){e+=t.sizeUploaded()}),e},timeRemaining:function(){var e=0,t=0;return u(this.files,function(n){n.paused||n.error||(e+=n.size-n.sizeUploaded(),t+=n.averageSpeed)}),e&&!t?Number.POSITIVE_INFINITY:e||t?Math.floor(e/t):0}},r.prototype={measureSpeed:function(){var e=Date.now()-this._lastProgressCallback;if(e){var t=this.flowObj.opts.speedSmoothingFactor,n=this.sizeUploaded();this.currentSpeed=Math.max((n-this._prevUploadedSize)/e*1e3,0),this.averageSpeed=t*this.currentSpeed+(1-t)*this.averageSpeed,this._prevUploadedSize=n}},chunkEvent:function(e,t){switch(e){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,t),this.flowObj.fire("error",t,this);break;case"success":if(this.error)return;this.measureSpeed(),this.flowObj.fire("fileProgress",this),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now(),this.isComplete()&&(this.currentSpeed=0,this.averageSpeed=0,this.flowObj.fire("fileSuccess",this,t));break;case"retry":this.flowObj.fire("fileRetry",this)}},pause:function(){this.paused=!0,this.abort()},resume:function(){this.paused=!1,this.flowObj.upload()},abort:function(e){this.currentSpeed=0,this.averageSpeed=0;var t=this.chunks;e&&(this.chunks=[]),u(t,function(e){"uploading"===e.status()&&(e.abort(),this.flowObj.uploadNextChunk())},this)},cancel:function(){this.flowObj.removeFile(this)},retry:function(){this.bootstrap(),this.flowObj.upload()},bootstrap:function(){this.abort(!0),this.error=!1,this._prevProgress=0;for(var e=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor,t=Math.max(e(this.file.size/this.flowObj.opts.chunkSize),1),n=0;t>n;n++)this.chunks.push(new o(this.flowObj,this,n))},progress:function(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;var e=0;u(this.chunks,function(t){e+=t.progress()*(t.endByte-t.startByte)});var t=e/this.size;return this._prevProgress=Math.max(this._prevProgress,t>.999?1:t),this._prevProgress},isUploading:function(){var e=!1;return u(this.chunks,function(t){return"uploading"===t.status()?(e=!0,!1):void 0}),e},isComplete:function(){var e=!1;return u(this.chunks,function(t){var n=t.status();return"pending"===n||"uploading"===n||1===t.preprocessState?(e=!0,!1):void 0}),!e},sizeUploaded:function(){var e=0;return u(this.chunks,function(t){e+=t.sizeUploaded()}),e},timeRemaining:function(){if(this.paused||this.error)return 0;var e=this.size-this.sizeUploaded();return e&&!this.averageSpeed?Number.POSITIVE_INFINITY:e||this.averageSpeed?Math.floor(e/this.averageSpeed):0},getType:function(){return this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.name.substr((~-this.name.lastIndexOf(".")>>>0)+2).toLowerCase()}},o.prototype={getParams:function(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.flowObj.opts.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObjSize,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}},getTarget:function(e,t){return e+=e.indexOf("?")<0?"?":"&",e+t.join("&")},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);var e=this.prepareXhrRequest("GET",!0);this.xhr.send(e)},preprocessFinished:function(){this.preprocessState=2,this.send()},send:function(){var e=this.flowObj.opts.preprocess;if("function"==typeof e)switch(this.preprocessState){case 0:return this.preprocessState=1,void e(this);case 1:return}if(this.flowObj.opts.testChunks&&!this.tested)return void this.test();this.loaded=0,this.total=0,this.pendingRetry=!1;var t=this.fileObj.file.slice?"slice":this.fileObj.file.mozSlice?"mozSlice":this.fileObj.file.webkitSlice?"webkitSlice":"slice",n=this.fileObj.file[t](this.startByte,this.endByte,this.fileObj.file.type);this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);var i=this.prepareXhrRequest("POST",!1,this.flowObj.opts.method,n);this.xhr.send(i)},abort:function(){var e=this.xhr;this.xhr=null,e&&e.abort()},status:function(){return this.pendingRetry||1===this.preprocessState?"uploading":this.xhr?this.xhr.readyState<4?"uploading":200==this.xhr.status?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var e=this.status();return"success"===e||"error"===e?1:"pending"===e?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var e=this.endByte-this.startByte;return"success"!==this.status()&&(e=this.progress()*e),e},prepareXhrRequest:function(e,t,n,i){var r=a(this.flowObj.opts.query,this.fileObj,this,t);r=c(this.getParams(),r);var o=a(this.flowObj.opts.target,this.fileObj,this,t),s=null;if("GET"===e||"octet"===n){var l=[];u(r,function(e,t){l.push([encodeURIComponent(t),encodeURIComponent(e)].join("="))}),o=this.getTarget(o,l),s=i||null}else s=new FormData,u(r,function(e,t){s.append(t,e)}),s.append(this.flowObj.opts.fileParameterName,i,this.fileObj.file.name);return this.xhr.open(e,o,!0),this.xhr.withCredentials=this.flowObj.opts.withCredentials,u(a(this.flowObj.opts.headers,this.fileObj,this,t),function(e,t){this.xhr.setRequestHeader(t,e)},this),s}},i.evalOpts=a,i.extend=c,i.each=u,i.FlowFile=r,i.FlowChunk=o,i.version="2.6.2","object"==typeof module&&module&&"object"==typeof module.exports?module.exports=i:(e.Flow=i,"function"==typeof define&&define.amd&&define("flow",[],function(){return i}))}(window,document),angular.module("flow.provider",[]).provider("flowFactory",function(){this.defaults={},this.factory=function(e){return new Flow(e)},this.events=[],this.on=function(e,t){this.events.push([e,t])},this.$get=function(){var e=this.factory,t=this.defaults,n=this.events;return{create:function(i){var r=e(angular.extend({},t,i));return angular.forEach(n,function(e){r.on(e[0],e[1])}),r}}}}),angular.module("flow.init",["flow.provider"]).controller("flowCtrl",["$scope","$attrs","$parse","flowFactory",function(e,t,n,i){var r=angular.extend({},e.$eval(t.flowInit)),o=e.$eval(t.flowObject)||i.create(r);o.on("catchAll",function(t){var n=Array.prototype.slice.call(arguments);n.shift();var i=e.$broadcast.apply(e,["flow::"+t,o].concat(n));return{progress:1,filesSubmitted:1,fileSuccess:1,fileError:1,complete:1}[t]&&e.$apply(),i.defaultPrevented?!1:void 0}),e.$flow=o,t.hasOwnProperty("flowName")&&(n(t.flowName).assign(e,o),e.$on("$destroy",function(){n(t.flowName).assign(e)}))}]).directive("flowInit",[function(){return{scope:!0,controller:"flowCtrl"}}]),angular.module("flow.btn",["flow.init"]).directive("flowBtn",[function(){return{restrict:"EA",scope:!1,require:"^flowInit",link:function(e,t,n){var i=n.hasOwnProperty("flowDirectory"),r=n.hasOwnProperty("flowSingleFile"),o=n.hasOwnProperty("flowAttrs")&&e.$eval(n.flowAttrs);e.$flow.assignBrowse(t,i,r,o)}}}]),angular.module("flow.dragEvents",["flow.init"]).directive("flowPreventDrop",function(){return{scope:!1,link:function(e,t){t.bind("drop dragover",function(e){e.preventDefault()})}}}).directive("flowDragEnter",["$timeout",function(e){return{scope:!1,link:function(t,n,i){function r(e){var t=!1,n=e.dataTransfer||e.originalEvent.dataTransfer;return angular.forEach(n&&n.types,function(e){"Files"===e&&(t=!0)}),t}var o,s=!1;n.bind("dragover",function(n){r(n)&&(s||(t.$apply(i.flowDragEnter),s=!0),e.cancel(o),n.preventDefault())}),n.bind("dragleave drop",function(){o=e(function(){t.$eval(i.flowDragLeave),o=null,s=!1},100)})}}}]),angular.module("flow.drop",["flow.init"]).directive("flowDrop",function(){return{scope:!1,require:"^flowInit",link:function(e,t,n){function i(){e.$flow.assignDrop(t)}function r(){e.$flow.unAssignDrop(t)}n.flowDropEnabled?e.$watch(n.flowDropEnabled,function(e){e?i():r()}):i()}}}),!function(e){function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}var n=e.module("flow.events",["flow.init"]),i={fileSuccess:["$file","$message"],fileProgress:["$file"],fileAdded:["$file","$event"],filesAdded:["$files","$event"],filesSubmitted:["$files","$event"],fileRetry:["$file"],fileError:["$file","$message"],uploadStart:[],complete:[],progress:[],error:["$message","$file"]};e.forEach(i,function(i,r){var o="flow"+t(r);"flowUploadStart"==o&&(o="flowUploadStarted"),n.directive(o,[function(){return{require:"^flowInit",controller:["$scope","$attrs",function(t,n){t.$on("flow::"+r,function(){var r=Array.prototype.slice.call(arguments),s=r.shift();if(t.$flow===r.shift()){var a={};e.forEach(i,function(e,t){a[e]=r[t]}),t.$eval(n[o],a)===!1&&s.preventDefault()}})}]}}])})}(angular),angular.module("flow.img",["flow.init"]).directive("flowImg",[function(){return{scope:!1,require:"^flowInit",link:function(e,t,n){var i=n.flowImg;e.$watch(i,function(t){if(t){var i=new FileReader;i.readAsDataURL(t.file),i.onload=function(t){e.$apply(function(){n.$set("src",t.target.result)})}}})}}}]),angular.module("flow.transfers",["flow.init"]).directive("flowTransfers",[function(){return{scope:!0,require:"^flowInit",link:function(e){e.transfers=e.$flow.files}}}]),angular.module("flow",["flow.provider","flow.init","flow.events","flow.btn","flow.drop","flow.transfers","flow.img","flow.dragEvents"]),define("ng-flow",function(){}),function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(e=i(String(e||"").toLowerCase()),!e||!e.length)return[];var t,n,o,a,l=[],c=e.split(/ +/);for(t=0,n=c.length;n>t;t++){if(o=r(c[t]),this.settings.diacritics)for(a in s)s.hasOwnProperty(a)&&(o=o.replace(new RegExp(a,"g"),s[a]));l.push({string:c[t],regex:new RegExp(o,"i")})}return l},e.prototype.iterator=function(e,t){var n;n=o(e)?Array.prototype.forEach||function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},n.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var n,i,r,o;n=this,e=n.prepareSearch(e,t),r=e.tokens,i=e.options.fields,o=r.length;var s=function(e,t){var n,i;return e?(e=String(e||""),i=e.search(t.regex),-1===i?0:(n=t.string.length/e.length,0===i&&(n+=.5),n)):0},a=function(){var e=i.length;return e?1===e?function(e,t){return s(t[i[0]],e)}:function(t,n){for(var r=0,o=0;e>r;r++)o+=s(n[i[r]],t);return o/e}:function(){return 0}}();return o?1===o?function(e){return a(r[0],e)}:"and"===e.options.conjunction?function(e){for(var t,n=0,i=0;o>n;n++){if(t=a(r[n],e),0>=t)return 0;i+=t}return i/o}:function(e){for(var t=0,n=0;o>t;t++)n+=a(r[t],e);return n/o}:function(){return 0}},e.prototype.getSortFunction=function(e,n){var i,r,o,s,a,l,c,u,h,d,p;if(o=this,e=o.prepareSearch(e,n),p=!e.query&&n.sort_empty||n.sort,h=function(e,t){return"$score"===e?t.score:o.items[t.id][e]},a=[],p)for(i=0,r=p.length;r>i;i++)(e.query||"$score"!==p[i].field)&&a.push(p[i]);if(e.query){for(d=!0,i=0,r=a.length;r>i;i++)if("$score"===a[i].field){d=!1;break}d&&a.unshift({field:"$score",direction:"desc"})}else for(i=0,r=a.length;r>i;i++)if("$score"===a[i].field){a.splice(i,1);break}for(u=[],i=0,r=a.length;r>i;i++)u.push("desc"===a[i].direction?-1:1);return l=a.length,l?1===l?(s=a[0].field,c=u[0],function(e,n){return c*t(h(s,e),h(s,n))}):function(e,n){var i,r,o;for(i=0;l>i;i++)if(o=a[i].field,r=u[i]*t(h(o,e),h(o,n)))return r;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;t=n({},t);var i=t.fields,r=t.sort,s=t.sort_empty;return i&&!o(i)&&(t.fields=[i]),r&&!o(r)&&(t.sort=[r]),s&&!o(s)&&(t.sort_empty=[s]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var n,i,r,o,s=this;return i=this.prepareSearch(e,t),t=i.options,e=i.query,o=t.score||s.getScoreFunction(i),e.length?s.iterator(s.items,function(e,r){n=o(e),(t.filter===!1||n>0)&&i.items.push({score:n,id:r})}):s.iterator(s.items,function(e,t){i.items.push({score:1,id:t})}),r=s.getSortFunction(i,t),r&&i.items.sort(r),i.total=i.items.length,"number"==typeof t.limit&&(i.items=i.items.slice(0,t.limit)),i};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:t>e?-1:0:(e=String(e||"").toLowerCase(),t=String(t||"").toLowerCase(),e>t?1:t>e?-1:0)},n=function(e){var t,n,i,r;for(t=1,n=arguments.length;n>t;t++)if(r=arguments[t])for(i in r)r.hasOwnProperty(i)&&(e[i]=r[i]);return e},i=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},r=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},o=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s={a:"[aÀÁÂÃÄÅàáâãäåĀā]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒē]",i:"[iÌÍÎÏìíîïĪī]",n:"[nÑñňŇ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠš]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽž]"};
return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var n,i,r,o=this,s=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(n=0,i=e.length;i>n;n++)"string"==typeof e[n]?s.push(e[n]):(o.plugins.settings[e[n].name]=e[n].options,s.push(e[n].name));else if(e)for(r in e)e.hasOwnProperty(r)&&(o.plugins.settings[r]=e[r],s.push(r));for(;s.length;)o.require(s.shift())},e.prototype.loadPlugin=function(t){var n=this,i=n.plugins,r=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=r.fn.apply(n,[n.plugins.settings[t]||{}]),i.names.push(t)},e.prototype.require=function(e){var t=this,n=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(n.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return n.loaded[e]},e.define=function(t,n){e.plugins[t]={name:t,fn:n}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,n){var i=function(e,t){if("string"!=typeof t||t.length){var n="string"==typeof t?new RegExp(t,"i"):t,i=function(e){var t=0;if(3===e.nodeType){var r=e.data.search(n);if(r>=0&&e.data.length>0){var o=e.data.match(n),s=document.createElement("span");s.className="highlight";var a=e.splitText(r),l=(a.splitText(o[0].length),a.cloneNode(!0));s.appendChild(l),a.parentNode.replaceChild(s,a),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=i(e.childNodes[c]);return t};return e.each(function(){i(this)})}},r=function(){};r.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},r.mixin=function(e){for(var t=["on","off","trigger"],n=0;n<t.length;n++)e.prototype[t[n]]=r.prototype[t[n]]};var o=/Mac/.test(navigator.userAgent),s=65,a=13,l=27,c=37,u=38,h=80,d=39,p=40,f=78,m=8,g=46,v=16,$=o?91:17,y=o?18:17,b=9,w=1,x=2,k=function(e){return"undefined"!=typeof e},C=function(e){return"undefined"==typeof e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},S=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},_=function(e){return(e+"").replace(/\$/g,"$$$$")},E={};E.before=function(e,t,n){var i=e[t];e[t]=function(){return n.apply(e,arguments),i.apply(e,arguments)}},E.after=function(e,t,n){var i=e[t];e[t]=function(){var t=i.apply(e,arguments);return n.apply(e,arguments),t}};var T=function(t,n){if(!e.isArray(n))return n;var i,r,o={};for(i=0,r=n.length;r>i;i++)n[i].hasOwnProperty(t)&&(o[n[i][t]]=n[i]);return o},O=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},A=function(e,t){var n;return function(){var i=this,r=arguments;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(i,r)},t)}},P=function(e,t,n){var i,r=e.trigger,o={};e.trigger=function(){var n=arguments[0];return-1===t.indexOf(n)?r.apply(e,arguments):void(o[n]=arguments)},n.apply(e,[]),e.trigger=r;for(i in o)o.hasOwnProperty(i)&&r.apply(e,o[i])},N=function(e,t,n,i){e.on(t,n,function(t){for(var n=t.target;n&&n.parentNode!==e[0];)n=n.parentNode;return t.currentTarget=n,i.apply(this,[t])})},I=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-e.value.length),t.start=n.text.length-i,t.length=i}return t},R=function(e,t,n){var i,r,o={};if(n)for(i=0,r=n.length;r>i;i++)o[n[i]]=e.css(n[i]);else o=e.css();t.css(o)},M=function(t,n){if(!t)return 0;var i=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");R(n,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var r=i.width();return i.remove(),r},D=function(e){var t=null,n=function(n,i){var r,o,s,a,l,c,u,h;n=n||window.event||{},i=i||{},n.metaKey||n.altKey||(i.force||e.data("grow")!==!1)&&(r=e.val(),n.type&&"keydown"===n.type.toLowerCase()&&(o=n.keyCode,s=o>=97&&122>=o||o>=65&&90>=o||o>=48&&57>=o||32===o,o===g||o===m?(h=I(e[0]),h.length?r=r.substring(0,h.start)+r.substring(h.start+h.length):o===m&&h.start?r=r.substring(0,h.start-1)+r.substring(h.start+1):o===g&&"undefined"!=typeof h.start&&(r=r.substring(0,h.start)+r.substring(h.start+1))):s&&(c=n.shiftKey,u=String.fromCharCode(n.keyCode),u=c?u.toUpperCase():u.toLowerCase(),r+=u)),a=e.attr("placeholder"),!r&&a&&(r=a),l=M(r,e)+4,l!==t&&(t=l,e.width(l),e.triggerHandler("resize")))};e.on("keydown keyup update blur",n),n()},L=function(n,i){var r,o,s=this;o=n[0],o.selectize=s,r=window.getComputedStyle?window.getComputedStyle(o,null).getPropertyValue("direction"):o.currentStyle&&o.currentStyle.direction,r=r||n.parents("[dir]:first").attr("dir")||"",e.extend(s,{settings:i,$input:n,tagType:"select"===o.tagName.toLowerCase()?w:x,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++L.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:n.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===i.loadThrottle?s.onSearchChange:A(s.onSearchChange,i.loadThrottle)}),s.sifter=new t(this.options,{diacritics:i.diacritics}),e.extend(s.options,T(i.valueField,i.options)),delete s.settings.options,e.extend(s.optgroups,T(i.optgroupValueField,i.optgroups)),delete s.settings.optgroups,s.settings.mode=s.settings.mode||(1===s.settings.maxItems?"single":"multi"),"boolean"!=typeof s.settings.hideSelected&&(s.settings.hideSelected="multi"===s.settings.mode),s.settings.create&&(s.canCreate=function(e){var t=s.settings.createFilter;return!(!e.length||"function"==typeof t&&!t.apply(s,[e])||"string"==typeof t&&!new RegExp(t).test(e)||t instanceof RegExp&&!t.test(e))}),s.initializePlugins(s.settings.plugins),s.setupCallbacks(),s.setupTemplates(),s.setup()};return r.mixin(L),n.mixin(L),e.extend(L.prototype,{setup:function(){var t,n,i,r,s,a,l,c,u,h,d=this,p=d.settings,f=d.eventNS,m=e(window),g=e(document),b=d.$input;l=d.settings.mode,c=b.attr("tabindex")||"",u=b.attr("class")||"",t=e("<div>").addClass(p.wrapperClass).addClass(u).addClass(l),n=e("<div>").addClass(p.inputClass).addClass("items").appendTo(t),i=e('<input type="text" autocomplete="off" />').appendTo(n).attr("tabindex",c),a=e(p.dropdownParent||t),r=e("<div>").addClass(p.dropdownClass).addClass(u).addClass(l).hide().appendTo(a),s=e("<div>").addClass(p.dropdownContentClass).appendTo(r),t.css({width:b[0].style.width}),d.plugins.names.length&&(h="plugin-"+d.plugins.names.join(" plugin-"),t.addClass(h),r.addClass(h)),(null===p.maxItems||p.maxItems>1)&&d.tagType===w&&b.attr("multiple","multiple"),d.settings.placeholder&&i.attr("placeholder",p.placeholder),b.attr("autocorrect")&&i.attr("autocorrect",b.attr("autocorrect")),b.attr("autocapitalize")&&i.attr("autocapitalize",b.attr("autocapitalize")),d.$wrapper=t,d.$control=n,d.$control_input=i,d.$dropdown=r,d.$dropdown_content=s,r.on("mouseenter","[data-selectable]",function(){return d.onOptionHover.apply(d,arguments)}),r.on("mousedown","[data-selectable]",function(){return d.onOptionSelect.apply(d,arguments)}),N(n,"mousedown","*:not(input)",function(){return d.onItemSelect.apply(d,arguments)}),D(i),n.on({mousedown:function(){return d.onMouseDown.apply(d,arguments)},click:function(){return d.onClick.apply(d,arguments)}}),i.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return d.onKeyDown.apply(d,arguments)},keyup:function(){return d.onKeyUp.apply(d,arguments)},keypress:function(){return d.onKeyPress.apply(d,arguments)},resize:function(){d.positionDropdown.apply(d,[])},blur:function(){return d.onBlur.apply(d,arguments)},focus:function(){return d.ignoreBlur=!1,d.onFocus.apply(d,arguments)},paste:function(){return d.onPaste.apply(d,arguments)}}),g.on("keydown"+f,function(e){d.isCmdDown=e[o?"metaKey":"ctrlKey"],d.isCtrlDown=e[o?"altKey":"ctrlKey"],d.isShiftDown=e.shiftKey}),g.on("keyup"+f,function(e){e.keyCode===y&&(d.isCtrlDown=!1),e.keyCode===v&&(d.isShiftDown=!1),e.keyCode===$&&(d.isCmdDown=!1)}),g.on("mousedown"+f,function(e){if(d.isFocused){if(e.target===d.$dropdown[0]||e.target.parentNode===d.$dropdown[0])return!1;d.$control.has(e.target).length||e.target===d.$control[0]||d.blur()}}),m.on(["scroll"+f,"resize"+f].join(" "),function(){d.isOpen&&d.positionDropdown.apply(d,arguments)}),m.on("mousemove"+f,function(){d.ignoreHover=!1}),this.revertSettings={$children:b.children().detach(),tabindex:b.attr("tabindex")},b.attr("tabindex",-1).hide().after(d.$wrapper),e.isArray(p.items)&&(d.setValue(p.items),delete p.items),b[0].validity&&b.on("invalid"+f,function(e){e.preventDefault(),d.isInvalid=!0,d.refreshState()}),d.updateOriginalInput(),d.refreshItems(),d.refreshState(),d.updatePlaceholder(),d.isSetup=!0,b.is(":disabled")&&d.disable(),d.on("change",this.onChange),b.data("selectize",d),b.addClass("selectized"),d.trigger("initialize"),p.preload===!0&&d.onSearchChange("")},setupTemplates:function(){var t=this,n=t.settings.labelField,i=t.settings.optgroupLabelField,r={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[i])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[n])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[n])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},r,t.settings.render)},setupCallbacks:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType"};for(e in n)n.hasOwnProperty(e)&&(t=this.settings[n[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(t){{var n=this,i=t.isDefaultPrevented();e(t.target)}if(n.isFocused){if(t.target!==n.$control_input[0])return"single"===n.settings.mode?n.isOpen?n.close():n.open():i||n.setActiveItem(null),!1}else i||window.setTimeout(function(){n.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var t=this;(t.isFull()||t.isInputHidden||t.isLocked)&&e.preventDefault()},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target===this.$control_input[0],this);if(t.isLocked)return void(e.keyCode!==b&&e.preventDefault());switch(e.keyCode){case s:if(t.isCmdDown)return void t.selectAll();break;case l:return void t.close();case f:if(!e.ctrlKey||e.altKey)break;case p:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case h:if(!e.ctrlKey||e.altKey)break;case u:if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,-1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case a:return t.isOpen&&t.$activeOption&&t.onOptionSelect({currentTarget:t.$activeOption}),void e.preventDefault();case c:return void t.advanceSelection(-1,e);case d:return void t.advanceSelection(1,e);case b:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case m:case g:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(o?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var n=t.$control_input.val()||"";t.lastValue!==n&&(t.lastValue=n,t.onSearchChange(n),t.refreshOptions(),t.trigger("type",n))},onSearchChange:function(e){var t=this,n=t.settings.load;n&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(i){n.apply(t,[e,i])})))},onFocus:function(e){var t=this;return t.isFocused=!0,t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||("focus"===t.settings.preload&&t.onSearchChange(""),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e){var t=this;if(t.isFocused=!1,!t.ignoreFocus){if(!t.ignoreBlur&&document.activeElement===t.$dropdown_content[0])return t.ignoreBlur=!0,void t.onFocus(e);t.settings.create&&t.settings.createOnBlur&&t.createItem(!1),t.close(),t.setTextboxValue(""),t.setActiveItem(null),t.setActiveOption(null),t.setCaret(t.items.length),t.refreshState()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var n,i,r=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),i=e(t.currentTarget),i.hasClass("create")?r.createItem():(n=i.attr("data-value"),"undefined"!=typeof n&&(r.lastQuery=null,r.setTextboxValue(""),r.addItem(n),!r.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&r.setActiveOption(r.getOption(n))))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,n=t.$wrapper.addClass("loading");t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||n.removeClass("loading"),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input,n=t.val()!==e;n&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===w&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e){P(this,["change"],function(){this.clear(),this.addItems(e)})},setActiveItem:function(t,n){var i,r,o,s,a,l,c,u,h=this;if("single"!==h.settings.mode){if(t=e(t),!t.length)return e(h.$activeItems).removeClass("active"),h.$activeItems=[],void(h.isFocused&&h.showInput());if(i=n&&n.type.toLowerCase(),"mousedown"===i&&h.isShiftDown&&h.$activeItems.length){for(u=h.$control.children(".active:last"),s=Array.prototype.indexOf.apply(h.$control[0].childNodes,[u[0]]),a=Array.prototype.indexOf.apply(h.$control[0].childNodes,[t[0]]),s>a&&(c=s,s=a,a=c),r=s;a>=r;r++)l=h.$control[0].childNodes[r],-1===h.$activeItems.indexOf(l)&&(e(l).addClass("active"),h.$activeItems.push(l));n.preventDefault()}else"mousedown"===i&&h.isCtrlDown||"keydown"===i&&this.isShiftDown?t.hasClass("active")?(o=h.$activeItems.indexOf(t[0]),h.$activeItems.splice(o,1),t.removeClass("active")):h.$activeItems.push(t.addClass("active")[0]):(e(h.$activeItems).removeClass("active"),h.$activeItems=[t.addClass("active")[0]]);h.hideInput(),this.isFocused||h.focus()}},setActiveOption:function(t,n,i){var r,o,s,a,l,c=this;c.$activeOption&&c.$activeOption.removeClass("active"),c.$activeOption=null,t=e(t),t.length&&(c.$activeOption=t.addClass("active"),(n||!k(n))&&(r=c.$dropdown_content.height(),o=c.$activeOption.outerHeight(!0),n=c.$dropdown_content.scrollTop()||0,s=c.$activeOption.offset().top-c.$dropdown_content.offset().top+n,a=s,l=s-r+o,s+o>r+n?c.$dropdown_content.stop().animate({scrollTop:l},i?c.settings.scrollDuration:0):n>s&&c.$dropdown_content.stop().animate({scrollTop:a},i?c.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(){this.$control_input.trigger("blur")},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t={field:t}),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var n,i,r,o=this,s=o.settings,a=this.getSearchOptions();if(s.score&&(r=o.settings.score.apply(this,[t]),"function"!=typeof r))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==o.lastQuery?(o.lastQuery=t,i=o.sifter.search(t,e.extend(a,{score:r})),o.currentResults=i):i=e.extend(!0,{},o.currentResults),s.hideSelected)for(n=i.items.length-1;n>=0;n--)-1!==o.items.indexOf(C(i.items[n].id))&&i.items.splice(n,1);return i},refreshOptions:function(t){var n,r,o,s,a,l,c,u,h,d,p,f,m,g,v,$;"undefined"==typeof t&&(t=!0);var y=this,b=y.$control_input.val(),w=y.search(b),x=y.$dropdown_content,k=y.$activeOption&&C(y.$activeOption.attr("data-value"));if(s=w.items.length,"number"==typeof y.settings.maxOptions&&(s=Math.min(s,y.settings.maxOptions)),a={},y.settings.optgroupOrder)for(l=y.settings.optgroupOrder,n=0;n<l.length;n++)a[l[n]]=[];else l=[];for(n=0;s>n;n++)for(c=y.options[w.items[n].id],u=y.render("option",c),h=c[y.settings.optgroupField]||"",d=e.isArray(h)?h:[h],r=0,o=d&&d.length;o>r;r++)h=d[r],y.optgroups.hasOwnProperty(h)||(h=""),a.hasOwnProperty(h)||(a[h]=[],l.push(h)),a[h].push(u);for(p=[],n=0,s=l.length;s>n;n++)h=l[n],y.optgroups.hasOwnProperty(h)&&a[h].length?(f=y.render("optgroup_header",y.optgroups[h])||"",f+=a[h].join(""),p.push(y.render("optgroup",e.extend({},y.optgroups[h],{html:f})))):p.push(a[h].join(""));if(x.html(p.join("")),y.settings.highlight&&w.query.length&&w.tokens.length)for(n=0,s=w.tokens.length;s>n;n++)i(x,w.tokens[n].regex);if(!y.settings.hideSelected)for(n=0,s=y.items.length;s>n;n++)y.getOption(y.items[n]).addClass("selected");m=y.settings.create&&y.canCreate(w.query),m&&(x.prepend(y.render("option_create",{input:b})),$=e(x[0].childNodes[0])),y.hasOptions=w.items.length>0||m,y.hasOptions?(w.items.length>0?(v=k&&y.getOption(k),v&&v.length?g=v:"single"===y.settings.mode&&y.items.length&&(g=y.getOption(y.items[0])),g&&g.length||(g=$&&!y.settings.addPrecedence?y.getAdjacentOption($,1):x.find("[data-selectable]:first"))):g=$,y.setActiveOption(g),t&&!y.isOpen&&y.open()):(y.setActiveOption(null),t&&y.isOpen&&y.close())},addOption:function(t){var n,i,r,o=this;if(e.isArray(t))for(n=0,i=t.length;i>n;n++)o.addOption(t[n]);else r=C(t[o.settings.valueField]),"string"!=typeof r||o.options.hasOwnProperty(r)||(o.userOptions[r]=!0,o.options[r]=t,o.lastQuery=null,o.trigger("option_add",r,t))},addOptionGroup:function(e,t){this.optgroups[e]=t,this.trigger("optgroup_add",e,t)},updateOption:function(t,n){var i,r,o,s,a,l,c=this;if(t=C(t),o=C(n[c.settings.valueField]),null!==t&&c.options.hasOwnProperty(t)){if("string"!=typeof o)throw new Error("Value must be set in option data");o!==t&&(delete c.options[t],s=c.items.indexOf(t),-1!==s&&c.items.splice(s,1,o)),c.options[o]=n,a=c.renderCache.item,l=c.renderCache.option,a&&(delete a[t],delete a[o]),l&&(delete l[t],delete l[o]),-1!==c.items.indexOf(o)&&(i=c.getItem(t),r=e(c.render("item",n)),i.hasClass("active")&&r.addClass("active"),i.replaceWith(r)),c.isOpen&&c.refreshOptions(!1)}},removeOption:function(e){var t=this;e=C(e);var n=t.renderCache.item,i=t.renderCache.option;n&&delete n[e],i&&delete i[e],delete t.userOptions[e],delete t.options[e],t.lastQuery=null,t.trigger("option_remove",e),t.removeItem(e)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,n){var i=this.$dropdown.find("[data-selectable]"),r=i.index(t)+n;return r>=0&&r<i.length?i.eq(r):e()},getElementWithValue:function(t,n){if(t=C(t),"undefined"!=typeof t&&null!==t)for(var i=0,r=n.length;r>i;i++)if(n[i].getAttribute("data-value")===t)return e(n[i]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t){for(var n=e.isArray(t)?t:[t],i=0,r=n.length;r>i;i++)this.isPending=r-1>i,this.addItem(n[i])},addItem:function(t){P(this,["change"],function(){var n,i,r,o,s,a=this,l=a.settings.mode;return t=C(t),-1!==a.items.indexOf(t)?void("single"===l&&a.close()):void(a.options.hasOwnProperty(t)&&("single"===l&&a.clear(),"multi"===l&&a.isFull()||(n=e(a.render("item",a.options[t])),s=a.isFull(),a.items.splice(a.caretPos,0,t),a.insertAtCaret(n),(!a.isPending||!s&&a.isFull())&&a.refreshState(),a.isSetup&&(r=a.$dropdown_content.find("[data-selectable]"),a.isPending||(i=a.getOption(t),o=a.getAdjacentOption(i,1).attr("data-value"),a.refreshOptions(a.isFocused&&"single"!==l),o&&a.setActiveOption(a.getOption(o))),!r.length||a.isFull()?a.close():a.positionDropdown(),a.updatePlaceholder(),a.trigger("item_add",t,n),a.updateOriginalInput()))))})},removeItem:function(e){var t,n,i,r=this;t="object"==typeof e?e:r.getItem(e),e=C(t.attr("data-value")),n=r.items.indexOf(e),-1!==n&&(t.remove(),t.hasClass("active")&&(i=r.$activeItems.indexOf(t[0]),r.$activeItems.splice(i,1)),r.items.splice(n,1),r.lastQuery=null,!r.settings.persist&&r.userOptions.hasOwnProperty(e)&&r.removeOption(e),n<r.caretPos&&r.setCaret(r.caretPos-1),r.refreshState(),r.updatePlaceholder(),r.updateOriginalInput(),r.positionDropdown(),r.trigger("item_remove",e))},createItem:function(t){var n=this,i=e.trim(n.$control_input.val()||""),r=n.caretPos;if(!n.canCreate(i))return!1;n.lock(),"undefined"==typeof t&&(t=!0);var o="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},s=O(function(e){if(n.unlock(),e&&"object"==typeof e){var i=C(e[n.settings.valueField]);"string"==typeof i&&(n.setTextboxValue(""),n.addOption(e),n.setCaret(r),n.addItem(i),n.refreshOptions(t&&"single"!==n.settings.mode))}}),a=o.apply(this,[i,s]);return"undefined"!=typeof a&&s(a),!0},refreshItems:function(){if(this.lastQuery=null,this.isSetup)for(var e=0;e<this.items.length;e++)this.addItem(this.items);this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e,t=this;t.isRequired&&(t.items.length&&(t.isInvalid=!1),t.$control_input.prop("required",e)),t.refreshClasses()},refreshClasses:function(){var t=this,n=t.isFull(),i=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",i).toggleClass("full",n).toggleClass("not-full",!n).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!n&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(){var e,t,n,i=this;if(i.tagType===w){for(n=[],e=0,t=i.items.length;t>e;e++)n.push('<option value="'+S(i.items[e])+'" selected="selected"></option>');n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),i.$input.html(n.join(""))}else i.$input.val(i.getValue()),i.$input.attr("value",i.$input.val());i.isSetup&&i.trigger("change",i.$input.val())},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(){var e=this;e.items.length&&(e.$control.children(":not(input)").remove(),e.items=[],e.lastQuery=null,e.setCaret(0),e.setActiveItem(null),e.updatePlaceholder(),e.updateOriginalInput(),e.refreshState(),e.showInput(),e.trigger("clear"))},insertAtCaret:function(t){var n=Math.min(this.caretPos,this.items.length);0===n?this.$control.prepend(t):e(this.$control[0].childNodes[n]).before(t),this.setCaret(n+1)},deleteSelection:function(t){var n,i,r,o,s,a,l,c,u,h=this;if(r=t&&t.keyCode===m?-1:1,o=I(h.$control_input[0]),h.$activeOption&&!h.settings.hideSelected&&(l=h.getAdjacentOption(h.$activeOption,-1).attr("data-value")),s=[],h.$activeItems.length){for(u=h.$control.children(".active:"+(r>0?"last":"first")),a=h.$control.children(":not(input)").index(u),r>0&&a++,n=0,i=h.$activeItems.length;i>n;n++)s.push(e(h.$activeItems[n]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(h.isFocused||"single"===h.settings.mode)&&h.items.length&&(0>r&&0===o.start&&0===o.length?s.push(h.items[h.caretPos-1]):r>0&&o.start===h.$control_input.val().length&&s.push(h.items[h.caretPos]));if(!s.length||"function"==typeof h.settings.onDelete&&h.settings.onDelete.apply(h,[s])===!1)return!1;for("undefined"!=typeof a&&h.setCaret(a);s.length;)h.removeItem(s.pop());return h.showInput(),h.positionDropdown(),h.refreshOptions(!0),l&&(c=h.getOption(l),c.length&&h.setActiveOption(c)),!0},advanceSelection:function(e,t){var n,i,r,o,s,a,l=this;0!==e&&(l.rtl&&(e*=-1),n=e>0?"last":"first",i=I(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(o=l.$control_input.val().length,s=0>e?0===i.start&&0===i.length:i.start===o,s&&!o&&l.advanceCaret(e,t)):(a=l.$control.children(".active:"+n),a.length&&(r=l.$control.children(":not(input)").index(a),l.setActiveItem(null),l.setCaret(e>0?r+1:r))))},advanceCaret:function(e,t){var n,i,r=this;0!==e&&(n=e>0?"next":"prev",r.isShiftDown?(i=r.$control_input[n](),i.length&&(r.hideInput(),r.setActiveItem(i),t&&t.preventDefault())):r.setCaret(r.caretPos+e))},setCaret:function(t){var n=this;if(t="single"===n.settings.mode?n.items.length:Math.max(0,Math.min(n.items.length,t)),!n.isPending){var i,r,o,s;for(o=n.$control.children(":not(input)"),i=0,r=o.length;r>i;i++)s=e(o[i]).detach(),t>i?n.$control_input.before(s):n.$control.append(s)}n.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,n=t.eventNS,i=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(n),e(document).off(n),e(document.body).off(n),delete t.$input[0].selectize},render:function(e,t){var n,i,r="",o=!1,s=this,a=/^[\t ]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===e||"item"===e)&&(n=C(t[s.settings.valueField]),o=!!n),o&&(k(s.renderCache[e])||(s.renderCache[e]={}),s.renderCache[e].hasOwnProperty(n))?s.renderCache[e][n]:(r=s.settings.render[e].apply(this,[t,S]),("option"===e||"option_create"===e)&&(r=r.replace(a,"<$1 data-selectable")),"optgroup"===e&&(i=t[s.settings.optgroupValueField]||"",r=r.replace(a,'<$1 data-group="'+_(S(i))+'"')),("option"===e||"item"===e)&&(r=r.replace(a,'<$1 data-value="'+_(S(n||""))+'"')),o&&(s.renderCache[e][n]=r),r)},clearCache:function(e){var t=this;"undefined"==typeof e?t.renderCache={}:delete t.renderCache[e]}}),L.count=0,L.defaults={plugins:[],delimiter:",",persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,scrollDuration:60,loadThrottle:300,dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",optgroupOrder:null,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,render:{}},e.fn.selectize=function(t){var n=e.fn.selectize.defaults,i=e.extend({},n,t),r=i.dataAttr,o=i.labelField,s=i.valueField,a=i.optgroupField,l=i.optgroupLabelField,c=i.optgroupValueField,u=function(t,n){var r,a,l,c,u=e.trim(t.val()||"");if(i.allowEmptyOption||u.length){for(l=u.split(i.delimiter),r=0,a=l.length;a>r;r++)c={},c[o]=l[r],c[s]=l[r],n.options[l[r]]=c;n.items=l}},h=function(t,n){var u,h,d,p,f=0,m=n.options,g=function(e){var t=r&&e.attr(r);return"string"==typeof t&&t.length?JSON.parse(t):null},v=function(t,r){var l,c;if(t=e(t),l=t.attr("value")||"",l.length||i.allowEmptyOption){if(m.hasOwnProperty(l))return void(r&&(m[l].optgroup?e.isArray(m[l].optgroup)?m[l].optgroup.push(r):m[l].optgroup=[m[l].optgroup,r]:m[l].optgroup=r));c=g(t)||{},c[o]=c[o]||t.text(),c[s]=c[s]||l,c[a]=c[a]||r,c.$order=++f,m[l]=c,t.is(":selected")&&n.items.push(l)}},$=function(t){var i,r,o,s,a;for(t=e(t),o=t.attr("label"),o&&(s=g(t)||{},s[l]=o,s[c]=o,n.optgroups[o]=s),a=e("option",t),i=0,r=a.length;r>i;i++)v(a[i],o)};for(n.maxItems=t.attr("multiple")?null:1,p=t.children(),u=0,h=p.length;h>u;u++)d=p[u].tagName.toLowerCase(),"optgroup"===d?$(p[u]):"option"===d&&v(p[u])};return this.each(function(){if(!this.selectize){var r,o=e(this),s=this.tagName.toLowerCase(),a=o.attr("placeholder")||o.attr("data-placeholder");a||i.allowEmptyOption||(a=o.children('option[value=""]').text());var l={placeholder:a,options:{},optgroups:{},items:[]};"select"===s?h(o,l):u(o,l),r=new L(o,e.extend(!0,{},n,l,t))}})},e.fn.selectize.defaults=L.defaults,L.define("drag_drop",function(){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var t=this;t.lock=function(){var e=t.lock;return function(){var n=t.$control.data("sortable");return n&&n.disable(),e.apply(t,arguments)}}(),t.unlock=function(){var e=t.unlock;
return function(){var n=t.$control.data("sortable");return n&&n.enable(),e.apply(t,arguments)}}(),t.setup=function(){var n=t.setup;return function(){n.apply(this,arguments);var i=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),i.css({overflow:"visible"})},stop:function(){i.css({overflow:"hidden"});var n=t.$activeItems?t.$activeItems.slice():null,r=[];i.children("[data-value]").each(function(){r.push(e(this).attr("data-value"))}),t.setValue(r),t.setActiveItem(n)}})}}()}}),L.define("dropdown_header",function(t){var n=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),n.setup=function(){var i=n.setup;return function(){i.apply(n,arguments),n.$dropdown_header=e(t.html(t)),n.$dropdown.prepend(n.$dropdown_header)}}()}),L.define("optgroup_columns",function(t){var n=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,n){var i=t.closest("[data-group]").find("[data-selectable]"),r=i.index(t)+n;return r>=0&&r<i.length?i.eq(r):e()},this.onKeyDown=function(){var e=n.onKeyDown;return function(t){var i,r,o,s;return!this.isOpen||t.keyCode!==c&&t.keyCode!==d?e.apply(this,arguments):(n.ignoreHover=!0,s=this.$activeOption.closest("[data-group]"),i=s.find("[data-selectable]").index(this.$activeOption),s=t.keyCode===c?s.prev("[data-group]"):s.next("[data-group]"),o=s.find("[data-selectable]"),r=o.eq(Math.min(o.length-1,i)),void(r.length&&this.setActiveOption(r)))}}();var i=function(){var e,t=i.width,n=document;return"undefined"==typeof t&&(e=n.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,n.body.appendChild(e),t=i.width=e.offsetWidth-e.clientWidth,n.body.removeChild(e)),t},r=function(){var r,o,s,a,l,c,u;if(u=e("[data-group]",n.$dropdown_content),o=u.length,o&&n.$dropdown_content.width()){if(t.equalizeHeight){for(s=0,r=0;o>r;r++)s=Math.max(s,u.eq(r).height());u.css({height:s})}t.equalizeWidth&&(c=n.$dropdown_content.innerWidth()-i(),a=Math.round(c/o),u.css({width:a}),o>1&&(l=c-a*(o-1),u.eq(o-1).css({width:l})))}};(t.equalizeHeight||t.equalizeWidth)&&(E.after(this,"positionDropdown",r),E.after(this,"refreshOptions",r))}),L.define("remove_button",function(t){if("single"!==this.settings.mode){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var n=this,i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+S(t.title)+'">'+t.label+"</a>",r=function(e,t){var n=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,n)+t+e.substring(n)};this.setup=function(){var o=n.setup;return function(){if(t.append){var s=n.settings.render.item;n.settings.render.item=function(){return r(s.apply(this,arguments),i)}}o.apply(this,arguments),this.$control.on("click","."+t.className,function(t){if(t.preventDefault(),!n.isLocked){var i=e(t.currentTarget).parent();n.setActiveItem(i),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()}}),L.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var n=t.onKeyDown;return function(t){var i,r;return t.keyCode===m&&""===this.$control_input.val()&&!this.$activeItems.length&&(i=this.caretPos-1,i>=0&&i<this.items.length)?(r=this.options[this.items[i]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[r])),this.refreshOptions(!0)),void t.preventDefault()):n.apply(this,arguments)}}()}),L}),function(e){"function"==typeof define&&define.amd?define("core",["jquery"],e):e(jQuery)}(function(e){function t(t,i){var r,o,s,a=t.nodeName.toLowerCase();return"area"===a?(r=t.parentNode,o=r.name,t.href&&o&&"map"===r.nodeName.toLowerCase()?(s=e("img[usemap='#"+o+"']")[0],!!s&&n(s)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),i="absolute"===n,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return i&&"static"===t.css("position")?!1:r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var i=e.attr(n,"tabindex"),r=isNaN(i);return(r||i>=0)&&t(n,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function i(t,n,i,o){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?s["inner"+n].call(this):this.each(function(){e(this).css(o,i(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return"number"!=typeof t?s["outer"+n].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,i,r=e(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(i=parseInt(r.css("zIndex"),10),!isNaN(i)&&0!==i))return i;r=r.parent()}return 0}}),e.ui.plugin={add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}}}),function(e){"function"==typeof define&&define.amd?define("widget",["jquery"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;return e.cleanData=function(t){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=e._data(r,"events"),i&&i.remove&&e(r).triggerHandler("remove")}catch(s){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var r,o,s,a,l={},c=t.split(".")[0];return t=t.split(".")[1],r=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[c]=e[c]||{},o=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new n,a.options=e.widget.extend({},a.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(l[t]=i)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix||t:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete o._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var i,r,o=n.call(arguments,1),s=0,a=o.length;a>s;s++)for(i in o[s])r=o[s][i],o[s].hasOwnProperty(i)&&void 0!==r&&(t[i]=e.isPlainObject(r)?e.isPlainObject(t[i])?e.widget.extend({},t[i],r):e.widget.extend({},r):r);return t},e.widget.bridge=function(t,i){var r=i.prototype.widgetFullName||t;e.fn[t]=function(o){var s="string"==typeof o,a=n.call(arguments,1),l=this;return o=!s&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,this.each(s?function(){var n,i=e.data(this,r);return"instance"===o?(l=i,!1):i?e.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,a),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}:function(){var t=e.data(this,r);t?(t.option(o||{}),t._init&&t._init()):e.data(this,r,new i(o,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,o,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},i=t.split("."),t=i.shift(),i.length){for(r=s[t]=e.widget.extend({},this.options[t]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,s){function a(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?r.delegate(u,c,a):n.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&e.effects&&e.effects.effect[a]?i[t](r):a!==t&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}}),e.widget}),function(e){"function"==typeof define&&define.amd?define("mouse",["jquery","./widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):t.which?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(n){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),t=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){"function"==typeof define&&define.amd?define("jui-sortable",["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&t+n>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var i=null,r=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(i=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),i&&(!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),r))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,i){var r,o,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(o)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,o,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-e(document).scrollTop()<s.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed)),t.pageX-e(document).scrollLeft()<s.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],o=this._intersectsWithPointer(i),o&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,s={};o&&"x"!==o||(s.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(s.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||i+c>a&&l>i+c,d="y"===this.options.axis||t+u>o&&s>t+u,p=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&n,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&"right"===o||"down"===r?2:1:r&&("down"===r?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){a.push(this)}var i,r,o,s,a=[],l=[],c=this._connectWith();if(c&&t)for(i=c.length-1;i>=0;i--)for(o=e(c[i]),r=o.length-1;r>=0;r--)s=e.data(o[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&l.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,o,s,a,l,c,u=this.items,h=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(r=e(d[n]),i=r.length-1;i>=0;i--)o=e.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(h.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=h.length-1;n>=0;n--)for(s=h[n][1],a=h[n][0],i=0,c=a.length;c>i;i++)l=e(a[i]),l.data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,o;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,i,r,o,s,a,l,c,u,h,d=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&e.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(r=1e4,o=null,u=d.floating||this._isFloating(this.currentItem),s=u?"left":"top",a=u?"width":"height",h=u?"clientX":"clientY",i=this.items.length-1;i>=0;i--)e.contains(this.containers[p].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[s],c=!1,t[h]-l>this.items[i][a]/2&&(c=!0),Math.abs(t[h]-l)<r&&(r=Math.abs(t[h]-l),o=this.items[i],this.direction=c?"up":"down"));
if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,o=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function n(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<r.length;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<r.length;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}),function(e,t){t.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(e,n,i){return{require:"?ngModel",link:function(r,o,s,a){function l(e,t){return t&&"function"==typeof t?function(n,i){e(n,i),t(n,i)}:e}function c(e,t){var n=e.sortable("option","helper");return"clone"===n||"function"==typeof n&&t.item.sortable.isCustomHelperUsed()}var u,h={},d={receive:null,remove:null,start:null,stop:null,update:null},p={helper:null};return t.extend(h,e,r.$eval(s.uiSortable)),t.element.fn&&t.element.fn.jquery?(a?(r.$watch(s.ngModel+".length",function(){n(function(){o.data("ui-sortable")&&o.sortable("refresh")})}),d.start=function(e,t){t.item.sortable={index:t.item.index(),cancel:function(){t.item.sortable._isCanceled=!0},isCanceled:function(){return t.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!t.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:t.item.sortable._isCustomHelperUsed}},d.activate=function(){u=o.contents();var e=o.sortable("option","placeholder");if(e&&e.element&&"function"==typeof e.element){var n=e.element();n=t.element(n);var i=o.find('[class="'+n.attr("class")+'"]');u=u.not(i)}},d.update=function(e,t){t.item.sortable.received||(t.item.sortable.dropindex=t.item.index(),t.item.sortable.droptarget=t.item.parent(),o.sortable("cancel")),c(o,t)&&!t.item.sortable.received&&"parent"===o.sortable("option","appendTo")&&(u=u.not(u.last())),u.appendTo(o),t.item.sortable.received&&(u=null),t.item.sortable.received&&!t.item.sortable.isCanceled()&&r.$apply(function(){a.$modelValue.splice(t.item.sortable.dropindex,0,t.item.sortable.moved)})},d.stop=function(e,t){!t.item.sortable.received&&"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()?r.$apply(function(){a.$modelValue.splice(t.item.sortable.dropindex,0,a.$modelValue.splice(t.item.sortable.index,1)[0])}):"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()||c(o,t)||u.appendTo(o),u=null},d.receive=function(e,t){t.item.sortable.received=!0},d.remove=function(e,t){"dropindex"in t.item.sortable||(o.sortable("cancel"),t.item.sortable.cancel()),t.item.sortable.isCanceled()||r.$apply(function(){t.item.sortable.moved=a.$modelValue.splice(t.item.sortable.index,1)[0]})},p.helper=function(e){return e&&"function"==typeof e?function(t,n){var i=e(t,n);return n.sortable._isCustomHelperUsed=n!==i,i}:e},r.$watch(s.uiSortable,function(e){o.data("ui-sortable")&&t.forEach(e,function(e,t){d[t]?("stop"===t&&(e=l(e,function(){r.$apply()})),e=l(d[t],e)):p[t]&&(e=p[t](e)),o.sortable("option",t,e)})},!0),t.forEach(d,function(e,t){h[t]=l(e,h[t])})):i.info("ui.sortable: ngModel not provided!",o),void o.sortable(h)):void i.error("ui.sortable: jQuery should be included before AngularJS!")}}}])}(window,window.angular),define("ui-sortable",["jui-sortable"],function(){}),!function(){var e={parse:function(e){if("string"!=typeof e)throw new TypeError("ObjectPath.parse must be passed a string");for(var t,n,i,r,o=0,s=[];o<e.length;)if(t=e.indexOf(".",o),n=e.indexOf("[",o),-1===t&&-1===n)s.push(e.slice(o,e.length)),o=e.length;else if(-1===n||-1!==t&&n>t)s.push(e.slice(o,t)),o=t+1;else if(n>o&&(s.push(e.slice(o,n)),o=n),i=e.slice(n+1,n+2),'"'!==i&&"'"!==i)r=e.indexOf("]",n),-1===r&&(r=e.length),s.push(e.slice(o+1,r)),o="."===e.slice(r+1,r+2)?r+2:r+1;else{for(r=e.indexOf(i+"]",n),-1===r&&(r=e.length);"\\"===e.slice(r-1,r)&&n<e.length;)n++,r=e.indexOf(i+"]",n);s.push(e.slice(o+2,r).replace(new RegExp("\\"+i,"g"),i)),o="."===e.slice(r+2,r+3)?r+3:r+2}return s},stringify:function(e,t){return Array.isArray(e)||(e=[e.toString()]),t='"'===t?'"':"'",e.map(function(e){return"["+t+e.toString().replace(new RegExp(t,"g"),"\\"+t)+t+"]"}).join("")},normalize:function(t,n){return e.stringify(Array.isArray(t)?t:e.parse(t),n)}};"function"==typeof define&&define.amd?define("objectpath",[],function(){return e}):"object"==typeof exports?exports.ObjectPath=e:"object"==typeof angular?angular.module("ObjectPath",[]).provider("ObjectPath",function(){this.parse=e.parse,this.stringify=e.stringify,this.normalize=e.normalize,this.$get=function(){return e}}):window.ObjectPath=e}(),function(e,t){"function"==typeof define&&define.amd?define("tv4",[],t):"undefined"!=typeof module&&module.exports?module.exports=t():e.tv4=t()}(this,function(){function e(t,n){if(t===n)return!0;if("object"==typeof t&&"object"==typeof n){if(Array.isArray(t)!==Array.isArray(n))return!1;if(Array.isArray(t)){if(t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(!e(t[i],n[i]))return!1}else{var r;for(r in t)if(void 0===n[r]&&void 0!==t[r])return!1;for(r in n)if(void 0===t[r]&&void 0!==n[r])return!1;for(r in t)if(!e(t[r],n[r]))return!1}return!0}return!1}function t(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function n(e,n){function i(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return n=t(n||""),e=t(e||""),n&&e?(n.protocol||e.protocol)+(n.protocol||n.authority?n.authority:e.authority)+i(n.protocol||n.authority||"/"===n.pathname.charAt(0)?n.pathname:n.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+n.pathname:e.pathname)+(n.protocol||n.authority||n.pathname?n.search:n.search||e.search)+n.hash:null}function i(e){return e.split("#")[0]}function r(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=n(t,e.id),e.id=t),Array.isArray(e))for(var i=0;i<e.length;i++)r(e[i],t);else{"string"==typeof e.$ref&&(e.$ref=n(t,e.$ref));for(var o in e)"enum"!==o&&r(e[o],t)}}function o(e,t,n,i,r){if(Error.call(this),void 0===e)throw new Error("No code supplied for error: "+t);this.message=t,this.code=e,this.dataPath=n||"",this.schemaPath=i||"",this.subErrors=r||null;var o=new Error(this.message);if(this.stack=o.stack||o.stacktrace,!this.stack)try{throw o}catch(o){this.stack=o.stack||o.stacktrace}}function s(e,t){if(t.substring(0,e.length)===e){var n=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===n.charAt(0)||"?"===n.charAt(0))return!0}return!1}function a(e){var t=new l,o=e||"en",s={addFormat:function(){t.addFormat.apply(t,arguments)},language:function(e){return e?(p[e]||(e=e.split("-")[0]),p[e]?(o=e,e):!1):o},addLanguage:function(e,t){var n;for(n in c)t[n]&&!t[c[n]]&&(t[c[n]]=t[n]);var i=e.split("-")[0];if(p[i]){p[e]=Object.create(p[i]);for(n in t)"undefined"==typeof p[i][n]&&(p[i][n]=t[n]),p[e][n]=t[n]}else p[e]=t,p[i]=t;return this},freshApi:function(e){var t=a();return e&&t.language(e),t},validate:function(e,n,i,r){var s=new l(t,!1,p[o],i,r);"string"==typeof n&&(n={$ref:n}),s.addSchema("",n);var a=s.validateAll(e,n,null,null,"");return!a&&r&&(a=s.banUnknownProperties()),this.error=a,this.missing=s.missing,this.valid=null===a,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,n,i,r){var s=new l(t,!0,p[o],i,r);"string"==typeof n&&(n={$ref:n}),s.addSchema("",n),s.validateAll(e,n,null,null,""),r&&s.banUnknownProperties();var a={};return a.errors=s.errors,a.missing=s.missing,a.valid=0===a.errors.length,a},addSchema:function(){return t.addSchema.apply(t,arguments)},getSchema:function(){return t.getSchema.apply(t,arguments)},getSchemaMap:function(){return t.getSchemaMap.apply(t,arguments)},getSchemaUris:function(){return t.getSchemaUris.apply(t,arguments)},getMissingUris:function(){return t.getMissingUris.apply(t,arguments)},dropSchemas:function(){t.dropSchemas.apply(t,arguments)},defineKeyword:function(){t.defineKeyword.apply(t,arguments)},defineError:function(e,t,n){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!==0||1e4>t)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof c[e])throw new Error("Error already defined: "+e+" as "+c[e]);if("undefined"!=typeof u[t])throw new Error("Error code already used: "+u[t]+" as "+t);c[e]=t,u[t]=e,d[e]=d[t]=n;for(var i in p){var r=p[i];r[e]&&(r[t]=r[t]||r[e])}},reset:function(){t.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:r,resolveUrl:n,getDocumentUri:i,errorCodes:c};return s}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(r){if("object"!=typeof r&&"function"!=typeof r||null===r)throw new TypeError("Object.keys called on non-object");var o=[];for(var s in r)e.call(r,s)&&o.push(s);if(t)for(var a=0;i>a;a++)e.call(r,n[a])&&o.push(n[a]);return o}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&1/0!==i&&i!==-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var r=i>=0?i:Math.max(n-Math.abs(i),0);n>r;r++)if(r in t&&t[r]===e)return r;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(n){return!0}});var l=function(e,t,n,i,r){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,i&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),r&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=n,this.definedKeywords={},e)for(var o in e.definedKeywords)this.definedKeywords[o]=e.definedKeywords[o].slice(0)};l.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},l.prototype.createError=function(e,t,n,i,r){var s=this.errorMessages[e]||d[e];if("string"!=typeof s)return new o(e,"Unknown error code "+e+": "+JSON.stringify(t),n,i,r);var a=s.replace(/\{([^{}]*)\}/g,function(e,n){var i=t[n];return"string"==typeof i||"number"==typeof i?i:e});return new o(e,a,n,i,r)},l.prototype.returnError=function(e){return e},l.prototype.collectError=function(e){return e&&this.errors.push(e),null},l.prototype.prefixErrors=function(e,t,n){for(var i=e;i<this.errors.length;i++)this.errors[i]=this.errors[i].prefixWith(t,n);return this},l.prototype.banUnknownProperties=function(){for(var e in this.unknownPropertyPaths){var t=this.createError(c.UNKNOWN_PROPERTY,{path:e},e,""),n=this.handleError(t);if(n)return n}return null},l.prototype.addFormat=function(e,t){if("object"==typeof e){for(var n in e)this.addFormat(n,e[n]);return this}this.formatValidators[e]=t},l.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(c.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","");t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},l.prototype.getSchema=function(e,t){var n;if(void 0!==this.schemas[e])return n=this.schemas[e],this.resolveRefs(n,t);var i=e,r="";if(-1!==e.indexOf("#")&&(r=e.substring(e.indexOf("#")+1),i=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[i]){n=this.schemas[i];var o=decodeURIComponent(r);if(""===o)return this.resolveRefs(n,t);if("/"!==o.charAt(0))return void 0;for(var s=o.split("/").slice(1),a=0;a<s.length;a++){var l=s[a].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===n[l]){n=void 0;break}n=n[l]}if(void 0!==n)return this.resolveRefs(n,t)}void 0===this.missing[i]&&(this.missing.push(i),this.missing[i]=i,this.missingMap[i]=i)},l.prototype.searchSchemas=function(e,t){if(e&&"object"==typeof e){"string"==typeof e.id&&s(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var n in e)if("enum"!==n)if("object"==typeof e[n])this.searchSchemas(e[n],t);else if("$ref"===n){var r=i(e[n]);r&&void 0===this.schemas[r]&&void 0===this.missingMap[r]&&(this.missingMap[r]=r)}}},l.prototype.addSchema=function(e,t){if("string"!=typeof e||"undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}(e=i(e)+"#")&&(e=i(e)),this.schemas[e]=t,delete this.missingMap[e],r(t,e),this.searchSchemas(t,e)},l.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},l.prototype.getSchemaUris=function(e){var t=[];for(var n in this.schemas)(!e||e.test(n))&&t.push(n);return t},l.prototype.getMissingUris=function(e){var t=[];for(var n in this.missingMap)(!e||e.test(n))&&t.push(n);return t},l.prototype.dropSchemas=function(){this.schemas={},this.reset()},l.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},l.prototype.validateAll=function(e,t,n,i,r){var s;if(t=this.resolveRefs(t),!t)return null;if(t instanceof o)return this.errors.push(t),t;var a,l=this.errors.length,c=null,u=null;if(this.checkRecursive&&e&&"object"==typeof e){if(s=!this.scanned.length,e[this.validatedSchemasKey]){var h=e[this.validatedSchemasKey].indexOf(t);if(-1!==h)return this.errors=this.errors.concat(e[this.validationErrorsKey][h]),null}if(Object.isFrozen(e)&&(a=this.scannedFrozen.indexOf(e),-1!==a)){var d=this.scannedFrozenSchemas[a].indexOf(t);if(-1!==d)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[a][d]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===a&&(a=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),c=this.scannedFrozenSchemas[a].length,this.scannedFrozenSchemas[a][c]=t,this.scannedFrozenValidationErrors[a][c]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(p){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}u=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][u]=t,e[this.validationErrorsKey][u]=[]}}var f=this.errors.length,m=this.validateBasic(e,t,r)||this.validateNumeric(e,t,r)||this.validateString(e,t,r)||this.validateArray(e,t,r)||this.validateObject(e,t,r)||this.validateCombinations(e,t,r)||this.validateFormat(e,t,r)||this.validateDefinedKeywords(e,t,r)||null;if(s){for(;this.scanned.length;){var g=this.scanned.pop();delete g[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(m||f!==this.errors.length)for(;n&&n.length||i&&i.length;){var v=n&&n.length?""+n.pop():null,$=i&&i.length?""+i.pop():null;m&&(m=m.prefixWith(v,$)),this.prefixErrors(f,v,$)}return null!==c?this.scannedFrozenValidationErrors[a][c]=this.errors.slice(l):null!==u&&(e[this.validationErrorsKey][u]=this.errors.slice(l)),this.handleError(m)},l.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var n=this.formatValidators[t.format].call(null,e,t);return"string"==typeof n||"number"==typeof n?this.createError(c.FORMAT_CUSTOM,{message:n}).prefixWith(null,"format"):n&&"object"==typeof n?this.createError(c.FORMAT_CUSTOM,{message:n.message||"?"},n.dataPath||null,n.schemaPath||"/format"):null},l.prototype.validateDefinedKeywords=function(e,t){for(var n in this.definedKeywords)for(var i=this.definedKeywords[n],r=0;r<i.length;r++){var o=i[r],s=o(e,t[n],t);if("string"==typeof s||"number"==typeof s)return this.createError(c.KEYWORD_CUSTOM,{key:n,message:s}).prefixWith(null,"format");if(s&&"object"==typeof s){var a=s.code||c.KEYWORD_CUSTOM;if("string"==typeof a){if(!c[a])throw new Error("Undefined error code (use defineError): "+a);a=c[a]}var l="object"==typeof s.message?s.message:{key:n,message:s.message||"?"},u=s.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(a,l,s.dataPath||null,u)}}return null},l.prototype.validateBasic=function(e,t,n){var i;return(i=this.validateType(e,t,n))?i.prefixWith(null,"type"):(i=this.validateEnum(e,t,n))?i.prefixWith(null,"type"):null},l.prototype.validateType=function(e,t){if(void 0===t.type)return null;var n=typeof e;null===e?n="null":Array.isArray(e)&&(n="array");var i=t.type;"object"!=typeof i&&(i=[i]);for(var r=0;r<i.length;r++){var o=i[r];if(o===n||"integer"===o&&"number"===n&&e%1===0)return null}return this.createError(c.INVALID_TYPE,{type:n,expected:i.join("/")})},l.prototype.validateEnum=function(t,n){if(void 0===n["enum"])return null;for(var i=0;i<n["enum"].length;i++){var r=n["enum"][i];if(e(t,r))return null}return this.createError(c.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(t):t})},l.prototype.validateNumeric=function(e,t,n){return this.validateMultipleOf(e,t,n)||this.validateMinMax(e,t,n)||null},l.prototype.validateMultipleOf=function(e,t){var n=t.multipleOf||t.divisibleBy;return void 0===n?null:"number"==typeof e&&e%n!==0?this.createError(c.NUMBER_MULTIPLE_OF,{value:e,multipleOf:n}):null},l.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(c.NUMBER_MINIMUM,{value:e,minimum:t.minimum}).prefixWith(null,"minimum");if(t.exclusiveMinimum&&e===t.minimum)return this.createError(c.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(c.NUMBER_MAXIMUM,{value:e,maximum:t.maximum}).prefixWith(null,"maximum");if(t.exclusiveMaximum&&e===t.maximum)return this.createError(c.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum}).prefixWith(null,"exclusiveMaximum")}return null},l.prototype.validateString=function(e,t,n){return this.validateStringLength(e,t,n)||this.validateStringPattern(e,t,n)||null},l.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(c.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength}).prefixWith(null,"minLength"):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(c.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength}).prefixWith(null,"maxLength"):null},l.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||void 0===t.pattern)return null;var n=new RegExp(t.pattern);return n.test(e)?null:this.createError(c.STRING_PATTERN,{pattern:t.pattern}).prefixWith(null,"pattern")},l.prototype.validateArray=function(e,t,n){return Array.isArray(e)?this.validateArrayLength(e,t,n)||this.validateArrayUniqueItems(e,t,n)||this.validateArrayItems(e,t,n)||null:null},l.prototype.validateArrayLength=function(e,t){var n;return void 0!==t.minItems&&e.length<t.minItems&&(n=this.createError(c.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems}).prefixWith(null,"minItems"),this.handleError(n))?n:void 0!==t.maxItems&&e.length>t.maxItems&&(n=this.createError(c.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems}).prefixWith(null,"maxItems"),this.handleError(n))?n:null},l.prototype.validateArrayUniqueItems=function(t,n){if(n.uniqueItems)for(var i=0;i<t.length;i++)for(var r=i+1;r<t.length;r++)if(e(t[i],t[r])){var o=this.createError(c.ARRAY_UNIQUE,{match1:i,match2:r}).prefixWith(null,"uniqueItems");if(this.handleError(o))return o}return null},l.prototype.validateArrayItems=function(e,t,n){if(void 0===t.items)return null;var i,r;if(Array.isArray(t.items)){for(r=0;r<e.length;r++)if(r<t.items.length){if(i=this.validateAll(e[r],t.items[r],[r],["items",r],n+"/"+r))return i}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(i=this.createError(c.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+r,"additionalItems"),this.handleError(i)))return i}else if(i=this.validateAll(e[r],t.additionalItems,[r],["additionalItems"],n+"/"+r))return i}else for(r=0;r<e.length;r++)if(i=this.validateAll(e[r],t.items,[r],["items"],n+"/"+r))return i;return null},l.prototype.validateObject=function(e,t,n){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,n)||this.validateObjectRequiredProperties(e,t,n)||this.validateObjectProperties(e,t,n)||this.validateObjectDependencies(e,t,n)||null},l.prototype.validateObjectMinMaxProperties=function(e,t){var n,i=Object.keys(e);return void 0!==t.minProperties&&i.length<t.minProperties&&(n=this.createError(c.OBJECT_PROPERTIES_MINIMUM,{propertyCount:i.length,minimum:t.minProperties}).prefixWith(null,"minProperties"),this.handleError(n))?n:void 0!==t.maxProperties&&i.length>t.maxProperties&&(n=this.createError(c.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:i.length,maximum:t.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(n))?n:null},l.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var n=0;n<t.required.length;n++){var i=t.required[n];if(void 0===e[i]){var r=this.createError(c.OBJECT_REQUIRED,{key:i}).prefixWith(null,""+n).prefixWith(null,"required");if(this.handleError(r))return r}}return null},l.prototype.validateObjectProperties=function(e,t,n){var i;for(var r in e){var o=n+"/"+r.replace(/~/g,"~0").replace(/\//g,"~1"),s=!1;if(void 0!==t.properties&&void 0!==t.properties[r]&&(s=!0,i=this.validateAll(e[r],t.properties[r],[r],["properties",r],o)))return i;if(void 0!==t.patternProperties)for(var a in t.patternProperties){var l=new RegExp(a);if(l.test(r)&&(s=!0,i=this.validateAll(e[r],t.patternProperties[a],[r],["patternProperties",a],o)))return i}if(s)this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(i=this.createError(c.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(r,"additionalProperties"),this.handleError(i)))return i}else if(i=this.validateAll(e[r],t.additionalProperties,[r],["additionalProperties"],o))return i}else this.trackUnknownProperties&&!this.knownPropertyPaths[o]&&(this.unknownPropertyPaths[o]=!0)}return null},l.prototype.validateObjectDependencies=function(e,t,n){var i;
if(void 0!==t.dependencies)for(var r in t.dependencies)if(void 0!==e[r]){var o=t.dependencies[r];if("string"==typeof o){if(void 0===e[o]&&(i=this.createError(c.OBJECT_DEPENDENCY_KEY,{key:r,missing:o}).prefixWith(null,r).prefixWith(null,"dependencies"),this.handleError(i)))return i}else if(Array.isArray(o))for(var s=0;s<o.length;s++){var a=o[s];if(void 0===e[a]&&(i=this.createError(c.OBJECT_DEPENDENCY_KEY,{key:r,missing:a}).prefixWith(null,""+s).prefixWith(null,r).prefixWith(null,"dependencies"),this.handleError(i)))return i}else if(i=this.validateAll(e,o,[],["dependencies",r],n))return i}return null},l.prototype.validateCombinations=function(e,t,n){return this.validateAllOf(e,t,n)||this.validateAnyOf(e,t,n)||this.validateOneOf(e,t,n)||this.validateNot(e,t,n)||null},l.prototype.validateAllOf=function(e,t,n){if(void 0===t.allOf)return null;for(var i,r=0;r<t.allOf.length;r++){var o=t.allOf[r];if(i=this.validateAll(e,o,[],["allOf",r],n))return i}return null},l.prototype.validateAnyOf=function(e,t,n){if(void 0===t.anyOf)return null;var i,r,o=[],s=this.errors.length;this.trackUnknownProperties&&(i=this.unknownPropertyPaths,r=this.knownPropertyPaths);for(var a=!0,l=0;l<t.anyOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.anyOf[l],h=this.errors.length,d=this.validateAll(e,u,[],["anyOf",l],n);if(null===d&&h===this.errors.length){if(this.errors=this.errors.slice(0,s),this.trackUnknownProperties){for(var p in this.knownPropertyPaths)r[p]=!0,delete i[p];for(var f in this.unknownPropertyPaths)r[f]||(i[f]=!0);a=!1;continue}return null}d&&o.push(d.prefixWith(null,""+l).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=i,this.knownPropertyPaths=r),a?(o=o.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(c.ANY_OF_MISSING,{},"","/anyOf",o)):void 0},l.prototype.validateOneOf=function(e,t,n){if(void 0===t.oneOf)return null;var i,r,o=null,s=[],a=this.errors.length;this.trackUnknownProperties&&(i=this.unknownPropertyPaths,r=this.knownPropertyPaths);for(var l=0;l<t.oneOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.oneOf[l],h=this.errors.length,d=this.validateAll(e,u,[],["oneOf",l],n);if(null===d&&h===this.errors.length){if(null!==o)return this.errors=this.errors.slice(0,a),this.createError(c.ONE_OF_MULTIPLE,{index1:o,index2:l},"","/oneOf");if(o=l,this.trackUnknownProperties){for(var p in this.knownPropertyPaths)r[p]=!0,delete i[p];for(var f in this.unknownPropertyPaths)r[f]||(i[f]=!0)}}else d&&s.push(d.prefixWith(null,""+l).prefixWith(null,"oneOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=i,this.knownPropertyPaths=r),null===o?(s=s.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(c.ONE_OF_MISSING,{},"","/oneOf",s)):(this.errors=this.errors.slice(0,a),null)},l.prototype.validateNot=function(e,t,n){if(void 0===t.not)return null;var i,r,o=this.errors.length;this.trackUnknownProperties&&(i=this.unknownPropertyPaths,r=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var s=this.validateAll(e,t.not,null,null,n),a=this.errors.slice(o);return this.errors=this.errors.slice(0,o),this.trackUnknownProperties&&(this.unknownPropertyPaths=i,this.knownPropertyPaths=r),null===s&&0===a.length?this.createError(c.NOT_PASSED,{},"","/not"):null};var c={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},u={};for(var h in c)u[c[h]]=h;var d={INVALID_TYPE:"invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.name="ValidationError",o.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var n=0;n<this.subErrors.length;n++)this.subErrors[n].prefixWith(e,t);return this};var p={},f=a();return f.addLanguage("en-gb",d),f.tv4=f,f}),function(e,t){function n(){this.$get=["$$sanitizeUri",function(e){return function(t){var n=[];return o(t,l(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function i(e){var n=[],i=l(n,t.noop);return i.chars(e),n.join("")}function r(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}function o(e,n){function i(e,i,o,a){if(i=t.lowercase(i),C[i])for(;y.last()&&S[y.last()];)r("",y.last());k[i]&&y.last()==i&&r("",i),a=b[i]||!!a,a||y.push(i);var l={};o.replace(d,function(e,t,n,i,r){var o=n||i||r||"";l[t]=s(o)}),n.start&&n.start(i,l,a)}function r(e,i){var r,o=0;if(i=t.lowercase(i))for(o=y.length-1;o>=0&&y[o]!=i;o--);if(o>=0){for(r=y.length-1;r>=o;r--)n.end&&n.end(y[r]);y.length=o}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var o,a,l,$,y=[],w=e;for(y.last=function(){return y[y.length-1]};e;){if($="",a=!0,y.last()&&_[y.last()]?(e=e.replace(new RegExp("(.*)<\\s*\\/\\s*"+y.last()+"[^>]*>","i"),function(e,t){return t=t.replace(m,"$1").replace(v,"$1"),n.chars&&n.chars(s(t)),""}),r("",y.last())):(0===e.indexOf("<!--")?(o=e.indexOf("--",4),o>=0&&e.lastIndexOf("-->",o)===o&&(n.comment&&n.comment(e.substring(4,o)),e=e.substring(o+3),a=!1)):g.test(e)?(l=e.match(g),l&&(e=e.replace(l[0],""),a=!1)):f.test(e)?(l=e.match(h),l&&(e=e.substring(l[0].length),l[0].replace(h,r),a=!1)):p.test(e)&&(l=e.match(u),l?(l[4]&&(e=e.substring(l[0].length),l[0].replace(u,i)),a=!1):($+="<",e=e.substring(1))),a&&(o=e.indexOf("<"),$+=0>o?e:e.substring(0,o),e=0>o?"":e.substring(o),n.chars&&n.chars(s($)))),e==w)throw c("badparse","The sanitizer was unable to parse the following block of html: {0}",e);w=e}r()}function s(e){if(!e)return"";var t=P.exec(e),n=t[1],i=t[3],r=t[2];return r&&(A.innerHTML=r.replace(/</g,"&lt;"),r="textContent"in A?A.textContent:A.innerText),n+r+i}function a(e){return e.replace(/&/g,"&amp;").replace($,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(y,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(e,n){var i=!1,r=t.bind(e,e.push);return{start:function(e,o,s){e=t.lowercase(e),!i&&_[e]&&(i=e),i||E[e]!==!0||(r("<"),r(e),t.forEach(o,function(i,o){var s=t.lowercase(o),l="img"===e&&"src"===s||"background"===s;O[s]!==!0||T[s]===!0&&!n(i,l)||(r(" "),r(o),r('="'),r(a(i)),r('"'))}),r(s?"/>":">"))},end:function(e){e=t.lowercase(e),i||E[e]!==!0||(r("</"),r(e),r(">")),e==i&&(i=!1)},chars:function(e){i||r(a(e))}}}var c=t.$$minErr("$sanitize"),u=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,h=/^<\/\s*([\w:-]+)[^>]*>/,d=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,f=/^<\//,m=/<!--(.*?)-->/g,g=/<!DOCTYPE([^>]*?)>/i,v=/<!\[CDATA\[(.*?)]]>/g,$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,y=/([^\#-~| |!])/g,b=r("area,br,col,hr,img,wbr"),w=r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=r("rp,rt"),k=t.extend({},x,w),C=t.extend({},w,r("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),S=t.extend({},x,r("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),_=r("script,style"),E=t.extend({},b,C,S,k),T=r("background,cite,href,longdesc,src,usemap"),O=t.extend({},T,r("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),A=document.createElement("pre"),P=/^(\s*)([\s\S]*?)(\s*)$/;t.module("ngSanitize",[]).provider("$sanitize",n),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,r=/^mailto:/;return function(o,s){function a(e){e&&p.push(i(e))}function l(e,n){p.push("<a "),t.isDefined(s)&&(p.push('target="'),p.push(s),p.push('" ')),p.push('href="'),p.push(e),p.push('">'),a(n),p.push("</a>")}if(!o)return o;for(var c,u,h,d=o,p=[];c=d.match(n);)u=c[0],c[2]==c[3]&&(u="mailto:"+u),h=c.index,a(d.substr(0,h)),l(u,c[0].replace(r,"")),d=d.substring(h+c[0].length);return a(d),e(p.join(""))}}])}(window,window.angular),define("angular-sanitize",function(){}),define("schema-form",["objectpath","tv4","angular-sanitize"],function(e,t){angular.module("ObjectPath",[]).provider("ObjectPath",function(){this.parse=e.parse,this.stringify=e.stringify,this.normalize=e.normalize,this.$get=function(){return e}});var n=["ObjectPath"];try{angular.module("ngSanitize"),n.push("ngSanitize")}catch(i){}try{angular.module("ui.sortable"),n.push("ui.sortable")}catch(i){}try{angular.module("angularSpectrumColorpicker"),n.push("angularSpectrumColorpicker")}catch(i){}angular.module("schemaForm",n),angular.module("schemaForm").provider("sfPath",["ObjectPathProvider",function(e){var t={parse:e.parse};t.stringify=1===angular.version.major&&angular.version.minor<3?function(e){return Array.isArray(e)?e.join("."):e.toString()}:e.stringify,t.normalize=function(e,n){return t.stringify(Array.isArray(e)?e:t.parse(e),n)},this.parse=t.parse,this.stringify=t.stringify,this.normalize=t.normalize,this.$get=function(){return t}}]),angular.module("schemaForm").factory("sfSelect",["sfPath",function(e){var t=/^\d+$/;return function(n,i,r){i||(i=this);var o="string"==typeof n?e.parse(n):n;if("undefined"!=typeof r&&1===o.length)return i[o[0]]=r,i;"undefined"!=typeof r&&"undefined"==typeof i[o[0]]&&(i[o[0]]=o.length>2&&t.test(o[1])?[]:{});for(var s=i[o[0]],a=1;a<o.length;a++){if(""===o[a])return void 0;if("undefined"!=typeof r){if(a===o.length-1)return s[o[a]]=r,r;var l=s[o[a]];("undefined"==typeof l||null===l)&&(l=t.test(o[a+1])?[]:{},s[o[a]]=l),s=l}else s&&(s=s[o[a]])}return s}}]),angular.module("schemaForm").provider("schemaFormDecorators",["$compileProvider","sfPathProvider",function(e,t){var n="",i={},r=function(e,t){"sfDecorator"===e&&(e=n);for(var r=i[e],o=r.rules,s=0;s<o.length;s++){var a=o[s](t);if(a)return a}return r.mappings[t.type]?r.mappings[t.type]:r.mappings["default"]},o=function(n){e.directive(n,["$parse","$compile","$http","$templateCache",function(e,i,o,s){return{restrict:"AE",replace:!1,transclude:!1,scope:!0,require:"?^sfSchema",link:function(e,a,l,c){var u=e.$watch(l.form,function(l){if(l){e.form=l;var c=r(n,l);o.get(c,{cache:s}).then(function(n){var r=l.key?t.stringify(l.key).replace(/"/g,"&quot;"):"",o=n.data.replace(/\$\$value\$\$/g,"model"+("["!==r[0]?".":"")+r);a.html(o),i(a.contents())(e)}),u()}});e.showTitle=function(){return e.form&&e.form.notitle!==!0&&e.form.title},e.listToCheckboxValues=function(e){var t={};return angular.forEach(e,function(e){t[e]=!0}),t},e.checkboxValuesToList=function(e){var t=[];return angular.forEach(e,function(e,n){e&&t.push(n)}),t},e.buttonClick=function(t,n){angular.isFunction(n.onClick)?n.onClick(t,n):angular.isString(n.onClick)&&(c?c.evalInParentScope(n.onClick,{$event:t,form:n}):e.$eval(n.onClick,{$event:t,form:n}))},e.evalExpr=function(t,n){return c?c.evalInParentScope(t,n):e.$eval(t,n)},e.evalInScope=function(t,n){return t?e.$eval(t,n):void 0},e.errorMessage=function(t){return e.form.validationMessage?t?angular.isString(e.form.validationMessage)?e.form.validationMessage:e.form.validationMessage[t.code]||e.form.validationMessage["default"]:e.form.validationMessage.required||e.form.validationMessage["default"]||e.form.validationMessage:t?t.message:"Required"}}}}])},s=function(t,n,i){i=angular.isDefined(i)?i:!1,e.directive("sf"+angular.uppercase(t[0])+t.substr(1),function(){return{restrict:"EAC",scope:!0,replace:!0,transclude:i,template:'<sf-decorator form="form"></sf-decorator>',link:function(e,n,i){var r={items:"c",titleMap:"c",schema:"c"},o={type:t},s=!0;angular.forEach(i,function(t,n){if("$"!==n[0]&&0!==n.indexOf("ng")&&"sfField"!==n){var a=function(t){angular.isDefined(t)&&t!==o[n]&&(o[n]=t,s&&o.type&&(o.key||angular.isUndefined(i.key))&&(e.form=o,s=!1))};"model"===n?e.$watch(t,function(t){t&&e.model!==t&&(e.model=t)}):"c"===r[n]?e.$watchCollection(t,a):i.$observe(n,a)}})}}})};this.createDecorator=function(e,t,r){i[e]={mappings:t||{},rules:r||[]},i[n]||(n=e),o(e)},this.createDirective=s,this.createDirectives=function(e){angular.forEach(e,function(e,t){s(t,e)})},this.directive=function(e){return e=e||n,i[e]},this.addMapping=function(e,t,n){i[e]&&(i[e].mappings[t]=n)},this.$get=function(){return{directive:function(e){return i[e]},defaultDecorator:n}},o("sfDecorator")}]),angular.module("schemaForm").provider("schemaForm",["sfPathProvider",function(e){var t=function(e){var t=[];return e.forEach(function(e){t.push({name:e,value:e})}),t},n=function(e){if(!angular.isArray(e)){var t=[];return angular.forEach(e,function(e,n){t.push({name:e,value:n})}),t}return e},i=function(e,t,n){var i=p[t.type];if(i)for(var r,o=0;o<i.length;o++)if(r=i[o](e,t,n))return r},r=function(e,t,i){i=i||{};var r=i.global&&i.global.formDefaults?angular.copy(i.global.formDefaults):{};return r.title=i.global&&i.global.supressPropertyTitles===!0?t.title:t.title||e,t.description&&(r.description=t.description),(i.required===!0||t.required===!0)&&(r.required=!0),t.maxLength&&(r.maxlength=t.maxLength),t.minLength&&(r.minlength=t.maxLength),(t.readOnly||t.readonly)&&(r.readonly=!0),t.minimum&&(r.minimum=t.minimum+(t.exclusiveMinimum?1:0)),t.maximum&&(r.maximum=t.maximum-(t.exclusiveMaximum?1:0)),t.validationMessage&&(r.validationMessage=t.validationMessage),t.enumNames&&(r.titleMap=n(t.enumNames)),r.schema=t,r.ngModelOptions=r.ngModelOptions||{},r},o=function(t,n,i){if("string"===n.type&&!n.enum){var o=r(t,n,i);return o.key=i.path,o.type="text",i.lookup[e.stringify(i.path)]=o,o}},s=function(t,n,i){if("number"===n.type){var o=r(t,n,i);return o.key=i.path,o.type="number",i.lookup[e.stringify(i.path)]=o,o}},a=function(t,n,i){if("integer"===n.type){var o=r(t,n,i);return o.key=i.path,o.type="number",i.lookup[e.stringify(i.path)]=o,o}},l=function(t,n,i){if("boolean"===n.type){var o=r(t,n,i);return o.key=i.path,o.type="checkbox",i.lookup[e.stringify(i.path)]=o,o}},c=function(n,i,o){if("string"===i.type&&i.enum){var s=r(n,i,o);return s.key=o.path,s.type="select",s.titleMap||(s.titleMap=t(i.enum)),o.lookup[e.stringify(o.path)]=s,s}},u=function(n,i,o){if("array"===i.type&&i.items&&i.items.enum){var s=r(n,i,o);return s.key=o.path,s.type="checkboxes",s.titleMap||(s.titleMap=t(i.items.enum)),o.lookup[e.stringify(o.path)]=s,s}},h=function(t,n,o){if("object"===n.type){var s=r(t,n,o);return s.type="fieldset",s.items=[],o.lookup[e.stringify(o.path)]=s,angular.forEach(n.properties,function(t,r){var a=o.path.slice();if(a.push(r),o.ignore[e.stringify(a)]!==!0){var l=n.required&&-1!==n.required.indexOf(r),c=i(r,t,{path:a,required:l||!1,lookup:o.lookup,ignore:o.ignore});c&&s.items.push(c)}}),s}},d=function(t,n,o){if("array"===n.type){var s=r(t,n,o);s.type="array",s.key=o.path,o.lookup[e.stringify(o.path)]=s;var a=n.required&&-1!==n.required.indexOf(o.path(o.path.length-1)),l=o.path.slice();return l.push(""),s.items=[i(t,n.items,{path:l,required:a||!1,lookup:o.lookup,ignore:o.ignore})],s}},p={string:[c,o],object:[h],number:[s],integer:[a],"boolean":[l],array:[u,d]},f=function(e){return e};this.defaults=p,this.stdFormObj=r,this.postProcess=function(e){f=e},this.appendRule=function(e,t){p[e]||(p[e]=[]),p[e].push(t)},this.prependRule=function(e,t){p[e]||(p[e]=[]),p[e].unshift(t)},this.createStandardForm=r,this.$get=function(){var t={};return t.merge=function(i,r,o,s){r=r||["*"],s=s||{};var a=t.defaults(i,o,s),l=r.indexOf("*");if(-1!==l)return r=r.slice(0,l).concat(a.form).concat(r.slice(l+1));var c=a.lookup;return f(r.map(function(r){if("string"==typeof r&&(r={key:r}),r.titleMap&&(r.titleMap=n(r.titleMap)),r.items&&(r.items=t.merge(i,r.items,o)),r.tabs&&angular.forEach(r.tabs,function(e){e.items=t.merge(i,e.items,o)}),r.key){"string"==typeof r.key&&(r.key=e.parse(r.key));var s=e.stringify(r.key);c[s]&&(r=angular.extend(c[s],r))}return"checkbox"===r.type&&angular.isUndefined(r.schema["default"])&&(r.schema["default"]=!1),r}))},t.defaults=function(e,t,n){var r=[],o={};if(t=t||{},n=n||{},"object"!==e.type)throw new Error('Not implemented. Only type "object" allowed at root level of schema.');return angular.forEach(e.properties,function(s,a){if(t[a]!==!0){var l=e.required&&-1!==e.required.indexOf(a[a.length-1]),c=i(a,s,{path:[a],lookup:o,ignore:t,required:l,global:n});c&&r.push(c)}}),{form:r,lookup:o}},t.traverseSchema=function(e,t,n,i){i=angular.isDefined(i)?i:!0,n=n||[];var r=function(e,t,n){if(t(e,n),angular.forEach(e.properties,function(e,i){var o=n.slice();o.push(i),r(e,t,o)}),!i&&e.items){var o=n.slice();o.push(""),r(e.items,t,o)}};r(e,t,n||[])},t.traverseForm=function(e,n){n(e),angular.forEach(e.items,function(e){t.traverseForm(e,n)}),e.tabs&&angular.forEach(e.tabs,function(e){angular.forEach(e.items,function(e){t.traverseForm(e,n)})})},t}}]),angular.module("schemaForm").factory("sfValidator",[function(){var e={};return e.validate=function(e,n){var i=e.schema;if(!i)return n;"integer"===i.type?n=parseInt(n,10):"number"===i.type?n=parseFloat(n,10):"boolean"===i.type&&"string"==typeof n&&("true"===n?n=!0:"false"===n&&(n=!1));var r={type:"object",properties:{}},o=e.key[e.key.length-1];r.properties[o]=i,e.required&&(r.required=[o]);var s={};return angular.isDefined(n)&&(s[o]=n),t.validateResult(s,r)},e}]),angular.module("schemaForm").directive("sfArray",["sfSelect","schemaForm","sfValidator",function(e,t,n){var i=function(e){return function(t){t.key&&(t.key[t.key.indexOf("")]=e)}};return{restrict:"A",scope:!0,require:"?ngModel",link:function(r,o,s,a){var l={},c=r.$watch(s.sfArray,function(o){var s=e(o.key,r.model);if(angular.isUndefined(s)&&(s=[],e(o.key,r.model,s)),r.modelArray=s,o.items){var u=o.items[0];o.items.length>1&&(u={type:"section",items:o.items})}if(r.copyWithIndex=function(e){if(!l[e]&&u){var n=angular.copy(u);n.arrayIndex=e,t.traverseForm(n,i(e)),l[e]=n}return l[e]},r.appendToArray=function(){var n=s.length,i=r.copyWithIndex(n);if(t.traverseForm(i,function(t){t.key&&angular.isDefined(t.default)&&e(t.key,r.model,t.default)}),n===s.length){var a,l=e("schema.items.type",o);"object"===l?a={}:"array"===l&&(a=[]),s.push(a)}return r.validateArray&&r.validateArray(),s},r.deleteFromArray=function(e){s.splice(e,1),r.validateArray&&r.validateArray()},o.titleMap||o.startEmpty===!0||0!==s.length||r.appendToArray(),o.titleMap&&o.titleMap.length>0){r.titleMapValues=[];var h=function(e){r.titleMapValues=[],e=e||[],o.titleMap.forEach(function(t){r.titleMapValues.push(-1!==e.indexOf(t.value))})};h(r.modelArray),r.$watchCollection("modelArray",h),r.$watchCollection("titleMapValues",function(e){if(e){for(var t=r.modelArray;t.length>0;)t.shift();o.titleMap.forEach(function(n,i){e[i]&&t.push(n.value)})}})}if(a){var d;r.validateArray=function(){var e=n.validate(o,r.modelArray.length>0?r.modelArray:void 0);e.valid!==!1||!e.error||""!==e.error.dataPath&&e.error.dataPath!=="/"+o.key[o.key.length-1]?a.$setValidity("schema",!0):(a.$setViewValue(r.modelArray),d=e.error,a.$setValidity("schema",!1))},r.$on("schemaFormValidate",r.validateArray),r.hasSuccess=function(){return a.$valid&&!a.$pristine},r.hasError=function(){return a.$invalid},r.schemaError=function(){return d}}c()})}}}]),angular.module("schemaForm").directive("sfChanged",function(){return{require:"ngModel",restrict:"AC",scope:!1,link:function(e,t,n,i){var r=e.$eval(n.sfChanged);r&&r.onChange&&i.$viewChangeListeners.push(function(){angular.isFunction(r.onChange)?r.onChange(i.$modelValue,r):e.evalExpr(r.onChange,{modelValue:i.$modelValue,form:r})})}}}),angular.module("schemaForm").directive("sfSchema",["$compile","schemaForm","schemaFormDecorators","sfSelect",function(e,t,n,i){var r=/[A-Z]/g,o=function(e,t){return t=t||"_",e.replace(r,function(e,n){return(n?t:"")+e.toLowerCase()})};return{scope:{schema:"=sfSchema",initialForm:"=sfForm",model:"=sfModel"},controller:["$scope",function(e){this.evalInParentScope=function(t,n){return e.$parent.$eval(t,n)}}],replace:!1,restrict:"A",transclude:!0,require:"?form",link:function(r,s,a,l,c){r.formCtrl=l;var u={};c(r,function(e){if(e.addClass("schema-form-ignore"),s.prepend(e),s[0].querySelectorAll){var t=s[0].querySelectorAll("[ng-model]");if(t)for(var n=0;n<t.length;n++){var i=t[n].getAttribute("ng-model");u[i.substring(i.indexOf(".")+1)]=!0}}});var h={};r.$watch(function(){var l=r.schema,c=r.initialForm||["*"];if(c&&l&&l.type&&(h.form!==c||h.schema!==l)&&Object.keys(l.properties).length>0){h.schema=l,h.form=c;var d=r.$eval(a.sfOptions),p=t.merge(l,c,u,d),f=document.createDocumentFragment();r.schemaForm={form:p,schema:l},angular.forEach(p,function(e,t){var i=document.createElement(a.sfDecoratorName||o(n.defaultDecorator,"-"));i.setAttribute("form","schemaForm.form["+t+"]"),f.appendChild(i)}),s.children(":not(.schema-form-ignore)").remove(),s[0].appendChild(f),e(s.children())(r),t.traverseSchema(l,function(e,t){if(angular.isDefined(e["default"])){var n=i(t,r.model);angular.isUndefined(n)&&i(t,r.model,e["default"])}})}})}}}]),angular.module("schemaForm").directive("schemaValidate",["sfValidator",function(e){return{restrict:"A",scope:!1,require:"ngModel",link:function(t,n,i,r){t.ngModel=r;var o=null,s=t.$eval(i.schemaValidate),a=function(n){if(s||(s=t.$eval(i.schemaValidate)),!s)return n;if(angular.isDefined(i.ngRequired)&&angular.isUndefined(n))return void 0;""===n&&(n=void 0),"multiselect"==s.type&&(s.schema.type="array");var a=e.validate(s,n);return a.valid?(r.$setValidity("schema",!0),n):(r.$setValidity("schema",!1),void(o=a.error))};r.$parsers.unshift(a),t.$on("schemaFormValidate",function(){r.$commitViewValue?r.$commitViewValue(!0):r.$setViewValue(r.$viewValue)}),t.hasSuccess=function(){return r.$valid&&(!r.$pristine||!r.$isEmpty(r.$modelValue))},t.hasError=function(){return r.$invalid&&!r.$pristine},t.schemaError=function(){return o}}}}])}),define("bs-form",["schema-form"],function(){angular.module("schemaForm").run(["$templateCache",function(e){e.put("directives/decorators/bootstrap/actions-trcl.html",'<div class="btn-group" ng-transclude=""></div>'),e.put("directives/decorators/bootstrap/actions.html",'<div class="btn-group {{ form.class }}"><input ng-repeat-start="item in form.items" type="submit" class="btn {{ item.style || \'btn-primary\' }}" value="{{item.title}}" ng-if="item.type === \'submit\'"><button ng-repeat-end="" class="btn {{ item.style || \'btn-default\' }}" type="button" ng-if="item.type !== \'submit\'" ng-click="buttonClick($event,item)">{{item.title}}</button></div>'),e.put("directives/decorators/bootstrap/array.html",'<div sf-array="form" ng-model="$$value$$" ng-model-options="form.ngModelOptions" class="{{ form.class }}"><h3 ng-show="form.title && form.notitle !== true">{{ form.title }}</h3><ul class="list-group" ng-model="modelArray" ui-sortable=""><li class="list-group-item" ng-repeat="item in modelArray track by $index"><button ng-click="deleteFromArray($index)" style="position: relative; z-index: 20;" type="button" class="close pull-right"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator></li><div class="clearfix" style="padding: 15px;"><button ng-click="appendToArray()" type="button" class="btn {{ form.style.add || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</button></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></ul></div>'),e.put("directives/decorators/bootstrap/checkbox.html",'<div class="checkbox {{ form.class }}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><label><input type="checkbox" sf-changed="form" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form"><span ng-bind-html="form.title"></span></label><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div></div>'),e.put("directives/decorators/bootstrap/checkboxes.html",'<div sf-array="form" ng-model="$$value$$" class="form-group {{ form.class }}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div class="checkbox" ng-repeat="val in titleMapValues track by $index"><label><input type="checkbox" sf-changed="form" ng-model="titleMapValues[$index]"><span ng-bind-html="form.titleMap[$index].name"></span></label></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/default.html",'<div class="form-group {{ form.class }}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false }"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><input ng-show="form.key" type="{{form.type}}" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control" ng-model-options="form.ngModelOptions" ng-model="$$value$$" schema-validate="form"><span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }"></span><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/fieldset-trcl.html",'<fieldset ng-disabled="form.readonly" class="{{form.class}}"><legend ng-show="form.title">{{ form.title }}</legend><div ng-transclude=""></div></fieldset>'),e.put("directives/decorators/bootstrap/fieldset.html",'<fieldset ng-disabled="form.readonly" class="{{form.class}}"><legend ng-show="form.title">{{ form.title }}</legend><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></fieldset>'),e.put("directives/decorators/bootstrap/geocode.html",'<div class="form-group has-feedback {{form.wrapclass}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}" geocode="{model: $$value$$}"><label ng-show="showTitle()">{{form.title}}</label><div class="row"><div class="col-md-8"><div class="map-canvas"></div></div><div class="col-md-4"><div class="form-group input-group"><input type="text" sf-changed="form" ng-model="$$value$$.address" ng-model-options="form.ngModelOptions" schema-validate="form" class="form-control"><span class="input-group-btn"><a class="btn btn-success" ng-click="locate($$value$$)"><span class="glyphicon glyphicon-screenshot"></span></a></span></div><div class="form-group"><input type="text" sf-changed="form" ng-model="$$value$$.lat" ng-model-options="form.ngModelOptions" schema-validate="form" class="form-control"></div><div class="form-group"><input type="text" sf-changed="form" ng-model="$$value$$.lng" ng-model-options="form.ngModelOptions" schema-validate="form" class="form-control"></div></div></div></div>'),e.put("directives/decorators/bootstrap/help.html",'<div class="helpvalue" ng-bind-html="form.helpvalue"></div>'),e.put("directives/decorators/bootstrap/img.html",'<div class="img-uploader" flow-init="{target: \'/admin/file/upload\'}" flow-files-submitted="$flow.upload()" flow-name="images" imguploader="{model: $$value$$ }" ng-show="form.key" sf-changed="form" ng-model-options="form.ngModelOptions" ng-model="$$value$$" schema-validate="form"><img ng-src="/media/admin/{{$$value$$}}"> <span class="btn btn-default" flow-btn="">Upload image</span> <span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }"></span><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/multiselect.html",'<div class="form-group {{form.class}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><select ng-model="$$value$$" ng-model-options="form.ngModelOptions" sf-changed="form" class="form-control {{form.class}}" schema-validate="form" multiple="true" selectize="{ labelField: \'name\', valueField: \'value\', options: form.titleMap, placeholder: form.placeholder, url: form.url }"></select><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/radio-buttons.html",'<div class="form-group" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><div><label class="control-label" ng-show="showTitle()">{{form.title}}</label></div><div class="btn-group"><label class="btn {{ (item.value === $$value$$) ? form.style.selected || \'btn-primary\' : form.style.unselected || \'btn-primary\'; }}" ng-class="{ active: item.value === $$value$$ }" ng-repeat="item in form.titleMap"><input type="radio" sf-changed="form" style="display: none;" ng-model="$$value$$" ng-model-options="form.ngModelOptions" ng-value="item.value"><span ng-bind-html="item.name"></span></label></div><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div></div>'),e.put("directives/decorators/bootstrap/radios-inline.html",'<div class="form-group" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div><label class="radio-inline" ng-repeat="item in form.titleMap"><input type="radio" sf-changed="form" ng-model="$$value$$" ng-value="item.value"><span ng-bind-html="item.name"></span></label></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/radios.html",'<div class="form-group" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div class="radio" ng-repeat="item in form.titleMap"><label><input type="radio" sf-changed="form" ng-model="$$value$$" ng-model-options="form.ngModelOptions" ng-value="item.value"><span ng-bind-html="item.name"></span></label></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/readonly.html",'<div class="form-group"><label ng-show="showTitle()">{{form.title}}</label><input ng-if="form.type !== \'textarea\'" type="text" disabled="" class="form-control" value="{{$$value$$}}"><textarea ng-if="form.type === \'textarea\'" disabled="" class="form-control">{{$$value$$}}</textarea><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div></div>'),e.put("directives/decorators/bootstrap/richtext.html",'<div class="form-group has-feedback {{form.wrapclass}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><label ng-show="showTitle()" ng-class="{{form.labelclass}}">{{form.title}}</label><textarea class="form-control {{form.class}}" sf-changed="form" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" richtext="{options: form.options || {}}"></textarea><span class="help-block">{{ (hasError() && errorMessage(schemaError())) || form.description}}</span></div>'),e.put("directives/decorators/bootstrap/section.html",'<div ng-if="!form.condition || evalExpr(form.condition,{ model: model, \'arrayIndex\': arrayIndex })"><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></div>'),e.put("directives/decorators/bootstrap/select.html",'<div class="form-group {{form.class}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><select ng-model="$$value$$" ng-model-options="form.ngModelOptions" sf-changed="form" class="form-control" schema-validate="form" selectize="{ labelField: \'name\', valueField: \'value\', options: form.titleMap, placeholder: form.placeholder, url: form.url }"></select><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/submit.html",'<div class="form-group"><input type="submit" class="btn {{ form.style || \'btn-primary\' }}" value="{{form.title}}" ng-if="form.type === \'submit\'"><button class="btn {{ form.style || \'btn-default\' }}" type="button" ng-click="buttonClick($event,form)" ng-if="form.type !== \'submit\'">{{form.title}}</button></div>'),e.put("directives/decorators/bootstrap/tabarray.html",'<div sf-array="form" ng-init="selected = { tab: 0 }" class="clearfix"><div ng-if="!form.tabType || form.tabType !== \'right\'" ng-class="{\'col-xs-3\': !form.tabType || form.tabType === \'left\'}"><ul class="nav nav-tabs" ng-class="{ \'tabs-left\': !form.tabType || form.tabType === \'left\'}" style="margin-bottom: 15px"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{evalExpr(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-click="$event.preventDefault() || (selected.tab = appendToArray().length - 1)" class="tab-add-btn"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div><div ng-class="{\'col-xs-9\': !form.tabType || form.tabType === \'left\' || form.tabType === \'right\'}"><div class="tab-content"><div class="tab-pane clearfix" ng-repeat="item in modelArray track by $index" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><sf-decorator form="copyWithIndex($index)"></sf-decorator><button ng-click="deleteFromArray($index)" type="button" class="btn {{ form.style.remove || \'btn-default\' }} pull-right tab-remove-btn"><i class="glyphicon glyphicon-trash"></i> {{ form.remove || \'Remove\'}}</button></div></div></div><div ng-if="form.tabType === \'right\'" class="col-xs-3"><ul class="nav nav-tabs tabs-right" style="margin-bottom: 15px"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{evalExpr(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-click="$event.preventDefault() || appendToArray()"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div></div>'),e.put("directives/decorators/bootstrap/tabs.html",'<div ng-init="selected = { tab: 0 }"><ul class="nav nav-tabs" style="margin-bottom: 15px"><li ng-repeat="tab in form.tabs" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{ tab.title }}</a></li></ul><div class="tab-content"><div class="tab-pane" ng-repeat="tab in form.tabs" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><bootstrap-decorator ng-repeat="item in tab.items" form="item"></bootstrap-decorator></div></div></div>'),e.put("directives/decorators/bootstrap/textarea.html",'<div class="form-group has-feedback {{form.wrapclass}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><label ng-show="showTitle()" ng-class="{{form.labelclass}}">{{form.title}}</label><textarea class="form-control {{form.class}}" sf-changed="form" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form"></textarea><span class="help-block">{{ (hasError() && errorMessage(schemaError())) || form.description}}</span></div>'),e.put("directives/decorators/bootstrap/wrap.html",'<div class="{{form.class}}"><label class="title" ng-show="form.title">{{ form.title }}</label><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></div>')
}]),angular.module("schemaForm").config(["schemaFormDecoratorsProvider",function(e){var t="directives/decorators/bootstrap/";e.createDecorator("bootstrapDecorator",{textarea:t+"textarea.html",richtext:t+"richtext.html",fieldset:t+"fieldset.html",array:t+"array.html",tabarray:t+"tabarray.html",tabs:t+"tabs.html",section:t+"section.html",conditional:t+"section.html",actions:t+"actions.html",select:t+"select.html",multiselect:t+"multiselect.html",checkbox:t+"checkbox.html",checkboxes:t+"checkboxes.html",number:t+"default.html",password:t+"default.html",submit:t+"submit.html",button:t+"submit.html",radios:t+"radios.html","radios-inline":t+"radios-inline.html",radiobuttons:t+"radio-buttons.html",help:t+"help.html","default":t+"default.html",wrap:t+"wrap.html",geocode:t+"geocode.html",img:t+"img.html"},[function(e){return e.readonly&&e.key&&"fieldset"!==e.type?t+"readonly.html":void 0}]),e.createDirectives({textarea:t+"textarea.html",richtext:t+"richtext.html",select:t+"select.html",multiselect:t+"multiselect.html",checkbox:t+"checkbox.html",checkboxes:t+"checkboxes.html",number:t+"default.html",submit:t+"submit.html",button:t+"submit.html",text:t+"default.html",date:t+"default.html",password:t+"default.html",datepicker:t+"datepicker.html",input:t+"default.html",radios:t+"radios.html","radios-inline":t+"radios-inline.html",radiobuttons:t+"radio-buttons.html",geocode:t+"geocode.html",img:t+"img.html"})}]).directive("sfFieldset",function(){return{transclude:!0,scope:!0,templateUrl:"directives/decorators/bootstrap/fieldset-trcl.html",link:function(e,t,n){e.title=e.$eval(n.title)}}})}),function(){define("dir/selectize",["selectize","bs-form"],function(){return angular.module("schemaForm").directive("selectize",["$timeout",function(e){return{restrict:"A",scope:!0,require:"ngModel",link:function(t,n,i,r){return e(function(){var e,o,s,a,l,c;return e=$(n),a=t.$eval(i.selectize),s=!1,l=a.url||null,e.data("url")&&(l=e.data("url")),e.hasClass("tags")&&(a.create=!0,r.$viewValue=r.$viewValue||[],a.options=r.$viewValue.map(function(e){return{name:e,value:e}})),l&&(a.searchField="name",a.load=function(e,t){return $.getJSON(l,{type:model.type,q:e},t)}),o=e.selectize(a)[0].selectize,o.on("change",function(e){return r&&r.$setViewValue(e),t.$apply()}),r.$viewValue&&(c=r.$viewValue,null!=c)?o.setValue(c):void 0})}}}])})}.call(this),function(){define("dir/geocode",["bs-form"],function(){return angular.module("schemaForm").directive("geocode",[function(){return{restict:"A",scope:!0,link:function(e,t,n){var i,r,o;return r=e.$eval(n.geocode),i=r.model||{},e.m=i,e.lat=i.lat||0,e.lng=i.lng||0,e.address=i.address,e.marker=null,e.map=null,e.geocoder=null,e.moveMarker=function(t,n){var i;return i=new google.maps.LatLng(t,n),e.map.setCenter(i),e.marker.setPosition(i)},e.locate=function(t){return e.geocoder||(e.geocoder=new google.maps.Geocoder),t.address.length>5?e.geocoder.geocode({address:t.address},function(n,i){var r;return i===google.maps.GeocoderStatus.OK?(r=n[0].geometry.location,t.lat=r.lat(),t.lng=r.lng(),e.lat=t.lat,e.lng=t.lng,e.$digest()):void 0}):void 0},e.createMap=function(){var t;return t={zoom:8,center:new google.maps.LatLng(e.lat,e.lng)},e.map=new google.maps.Map($(".map-canvas")[0],t),e.createMarker(),e.$watch("[lat,lng]",function(){return e.moveMarker(e.lat,e.lng)},!0)},e.createMarker=function(){return e.marker=new google.maps.Marker({position:new google.maps.LatLng(e.lat,e.lng),map:e.map})},window.mapInitialize=function(){return e.createMap()},window.google&&window.google.maps?e.createMap():(o=document.createElement("script"),o.type="text/javascript",o.src="https://maps.googleapis.com/maps/api/js?v=3&callback=mapInitialize",document.body.appendChild(o))}}}])})}.call(this),function(){define("dir/imguploader",["bs-form","ng-flow"],function(){return angular.module("schemaForm").directive("imguploader",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n){var i,r;return r=e.$eval(n.imguploader),i=r.model,e.$on("flow::fileSuccess",function(t,n,i,r){var o;return o=angular.fromJson(r),e.ngModel.$setViewValue(o.name),e.$digest()}),e.uploaded=function(e){return console.log(e)}}}}])})}.call(this),function($){function Redactor(e,t){return new Redactor.prototype.init(e,t)}var uuid=0,Range=function(e){return this[0]=e.startOffset,this[1]=e.endOffset,this.range=e,this};Range.prototype.equals=function(){return this[0]===this[1]};var reUrlYoutube=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,reUrlVimeo=/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/;$.fn.redactor=function(e){var t=[],n=Array.prototype.slice.call(arguments,1);return this.each("string"==typeof e?function(){var i=$.data(this,"redactor");if("undefined"==typeof i||!$.isFunction(i[e]))return $.error('No such method "'+e+'" for Redactor');var r=i[e].apply(i,n);void 0!==r&&r!==i&&t.push(r)}:function(){$.data(this,"redactor")||$.data(this,"redactor",Redactor(this,e))}),0===t.length?this:1===t.length?t[0]:t},$.Redactor=Redactor,$.Redactor.VERSION="9.2.6",$.Redactor.opts={rangy:!1,iframe:!1,fullpage:!1,css:!1,lang:"en",direction:"ltr",placeholder:!1,typewriter:!1,wym:!1,mobile:!0,cleanup:!0,tidyHtml:!0,pastePlainText:!1,removeEmptyTags:!0,cleanSpaces:!0,cleanFontTag:!0,templateVars:!1,xhtml:!1,visual:!0,focus:!1,tabindex:!1,autoresize:!0,minHeight:!1,maxHeight:!1,shortcuts:{"ctrl+m, meta+m":"this.execCommand('removeFormat', false)","ctrl+b, meta+b":"this.execCommand('bold', false)","ctrl+i, meta+i":"this.execCommand('italic', false)","ctrl+h, meta+h":"this.execCommand('superscript', false)","ctrl+l, meta+l":"this.execCommand('subscript', false)","ctrl+k, meta+k":"this.linkShow()","ctrl+shift+7":"this.execCommand('insertorderedlist', false)","ctrl+shift+8":"this.execCommand('insertunorderedlist', false)"},shortcutsAdd:!1,autosave:!1,autosaveInterval:60,plugins:!1,linkProtocol:"http://",linkNofollow:!1,linkSize:50,predefinedLinks:!1,imageFloatMargin:"10px",imageGetJson:!1,dragUpload:!0,imageTabLink:!0,imageUpload:!1,imageUploadParam:"file",imageResizable:!0,fileUpload:!1,fileUploadParam:"file",clipboardUpload:!0,clipboardUploadUrl:!1,dnbImageTypes:["image/png","image/jpeg","image/gif"],s3:!1,uploadFields:!1,observeImages:!0,observeLinks:!0,modalOverlay:!0,tabSpaces:!1,tabFocus:!0,air:!1,airButtons:["formatting","bold","italic","deleted","unorderedlist","orderedlist","outdent","indent"],toolbar:!0,toolbarFixed:!1,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarFixedBox:!1,toolbarExternal:!1,toolbarOverflow:!1,buttonSource:!0,buttons:["html","formatting","bold","italic","deleted","unorderedlist","orderedlist","outdent","indent","image","video","file","table","link","alignment","|","horizontalrule"],buttonsHideOnMobile:[],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify","table"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline",tr:"table",td:"table",table:"table"},formattingTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],linebreaks:!1,paragraphy:!0,convertDivs:!0,convertLinks:!0,convertImageLinks:!1,convertVideoLinks:!1,formattingPre:!1,phpTags:!1,allowedTags:!1,deniedTags:["html","head","link","body","meta","script","style","applet"],boldTag:"strong",italicTag:"em",indentValue:20,buffer:[],rebuffer:[],textareamode:!1,emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",rBlockTest:/^(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)$/i,alignmentTags:["P","H1","H2","H3","H4","H5","H6","DD","DL","DT","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],ownLine:["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],contOwnLine:["li","dt","dt","h[1-6]","option","script"],newLevel:["blockquote","div","dl","fieldset","form","frameset","map","ol","p","pre","select","td","th","tr","ul"],blockLevelElements:["P","H1","H2","H3","H4","H5","H6","DD","DL","DT","DIV","LI","BLOCKQUOTE","OUTPUT","FIGCAPTION","PRE","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE","TD"],langs:{en:{html:"HTML",video:"Insert Video",image:"Insert Image",table:"Table",link:"Link",link_insert:"Insert link",link_edit:"Edit link",unlink:"Unlink",formatting:"Formatting",paragraph:"Normal text",quote:"Quote",code:"Code",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",bold:"Bold",italic:"Italic",fontcolor:"Font Color",backcolor:"Back Color",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",cancel:"Cancel",insert:"Insert",save:"Save",_delete:"Delete",insert_table:"Insert Table",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",delete_column:"Delete Column",delete_row:"Delete Row",delete_table:"Delete Table",rows:"Rows",columns:"Columns",add_head:"Add Head",delete_head:"Delete Head",title:"Title",image_position:"Position",none:"None",left:"Left",right:"Right",center:"Center",image_web_link:"Image Web Link",text:"Text",mailto:"Email",web:"URL",video_html_code:"Video Embed Code",file:"Insert File",upload:"Upload",download:"Download",choose:"Choose",or_choose:"Or choose",drop_file_here:"Drop file here",align_left:"Align text to the left",align_center:"Center text",align_right:"Align text to the right",align_justify:"Justify text",horizontalrule:"Insert Horizontal Rule",deleted:"Deleted",anchor:"Anchor",link_new_tab:"Open link in new tab",underline:"Underline",alignment:"Alignment",filename:"Name (optional)",edit:"Edit"}}},Redactor.fn=$.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,TAB:9,CTRL:17,META:91,LEFT:37,LEFT_WIN:91},init:function(e,t){this.rtePaste=!1,this.$element=this.$source=$(e),this.uuid=uuid++;var n=$.extend(!0,{},$.Redactor.opts);if(this.opts=$.extend({},n,this.$element.data(),t),this.start=!0,this.dropdowns=[],this.sourceHeight=this.$source.css("height"),this.sourceWidth=this.$source.css("width"),this.opts.fullpage&&(this.opts.iframe=!0),this.opts.linebreaks&&(this.opts.paragraphy=!1),this.opts.paragraphy&&(this.opts.linebreaks=!1),this.opts.toolbarFixedBox&&(this.opts.toolbarFixed=!0),this.document=document,this.window=window,this.savedSel=!1,this.cleanlineBefore=new RegExp("^<(/?"+this.opts.ownLine.join("|/?")+"|"+this.opts.contOwnLine.join("|")+")[ >]"),this.cleanlineAfter=new RegExp("^<(br|/?"+this.opts.ownLine.join("|/?")+"|/"+this.opts.contOwnLine.join("|/")+")[ >]"),this.cleannewLevel=new RegExp("^</?("+this.opts.newLevel.join("|")+")[ >]"),this.rTestBlock=new RegExp("^("+this.opts.blockLevelElements.join("|")+")$","i"),this.opts.linebreaks===!1){if(this.opts.allowedTags!==!1){var r=["strong","em","del"],o=["b","i","strike"];"-1"===$.inArray("p",this.opts.allowedTags)&&this.opts.allowedTags.push("p");for(i in r)"-1"!=$.inArray(r[i],this.opts.allowedTags)&&this.opts.allowedTags.push(o[i])}if(this.opts.deniedTags!==!1){var s=$.inArray("p",this.opts.deniedTags);"-1"!==s&&this.opts.deniedTags.splice(s,s)}}(this.browser("msie")||this.browser("opera"))&&(this.opts.buttons=this.removeFromArrayByValue(this.opts.buttons,"horizontalrule")),this.opts.curLang=this.opts.langs[this.opts.lang],$.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.placeholderInit(),this.buildStart()},toolbarInit:function(e){return{html:{title:e.html,func:"toggle"},formatting:{title:e.formatting,func:"show",dropdown:{p:{title:e.paragraph,func:"formatBlocks"},blockquote:{title:e.quote,func:"formatQuote",className:"redactor_format_blockquote"},pre:{title:e.code,func:"formatBlocks",className:"redactor_format_pre"},h1:{title:e.header1,func:"formatBlocks",className:"redactor_format_h1"},h2:{title:e.header2,func:"formatBlocks",className:"redactor_format_h2"},h3:{title:e.header3,func:"formatBlocks",className:"redactor_format_h3"},h4:{title:e.header4,func:"formatBlocks",className:"redactor_format_h4"},h5:{title:e.header5,func:"formatBlocks",className:"redactor_format_h5"}}},bold:{title:e.bold,exec:"bold"},italic:{title:e.italic,exec:"italic"},deleted:{title:e.deleted,exec:"strikethrough"},underline:{title:e.underline,exec:"underline"},unorderedlist:{title:"&bull; "+e.unorderedlist,exec:"insertunorderedlist"},orderedlist:{title:"1. "+e.orderedlist,exec:"insertorderedlist"},outdent:{title:"< "+e.outdent,func:"indentingOutdent"},indent:{title:"> "+e.indent,func:"indentingIndent"},image:{title:e.image,func:"imageShow"},video:{title:e.video,func:"videoShow"},file:{title:e.file,func:"fileShow"},table:{title:e.table,func:"show",dropdown:{insert_table:{title:e.insert_table,func:"tableShow"},separator_drop1:{name:"separator"},insert_row_above:{title:e.insert_row_above,func:"tableAddRowAbove"},insert_row_below:{title:e.insert_row_below,func:"tableAddRowBelow"},insert_column_left:{title:e.insert_column_left,func:"tableAddColumnLeft"},insert_column_right:{title:e.insert_column_right,func:"tableAddColumnRight"},separator_drop2:{name:"separator"},add_head:{title:e.add_head,func:"tableAddHead"},delete_head:{title:e.delete_head,func:"tableDeleteHead"},separator_drop3:{name:"separator"},delete_column:{title:e.delete_column,func:"tableDeleteColumn"},delete_row:{title:e.delete_row,func:"tableDeleteRow"},delete_table:{title:e.delete_table,func:"tableDeleteTable"}}},link:{title:e.link,func:"show",dropdown:{link:{title:e.link_insert,func:"linkShow"},unlink:{title:e.unlink,exec:"unlink"}}},alignment:{title:e.alignment,func:"show",dropdown:{alignleft:{title:e.align_left,func:"alignmentLeft"},aligncenter:{title:e.align_center,func:"alignmentCenter"},alignright:{title:e.align_right,func:"alignmentRight"},justify:{title:e.align_justify,func:"alignmentJustify"}}},alignleft:{title:e.align_left,func:"alignmentLeft"},aligncenter:{title:e.align_center,func:"alignmentCenter"},alignright:{title:e.align_right,func:"alignmentRight"},alignjustify:{title:e.align_justify,func:"alignmentJustify"},horizontalrule:{exec:"inserthorizontalrule",title:e.horizontalrule}}},callback:function(e,t,n){var i=this.opts[e+"Callback"];return $.isFunction(i)?t===!1?i.call(this,n):i.call(this,t,n):n},destroy:function(){clearInterval(this.autosaveInterval),$(window).off(".redactor"),this.$source.off("redactor-textarea"),this.$element.off(".redactor").removeData("redactor");var e=this.get();if(this.opts.textareamode)this.$box.after(this.$source),this.$box.remove(),this.$source.val(e).show();else{var t=this.$editor;this.opts.iframe&&(t=this.$element),this.$box.after(t),this.$box.remove(),t.removeClass("redactor_editor").removeClass("redactor_editor_wym").removeAttr("contenteditable").html(e).show()}this.opts.toolbarExternal&&$(this.opts.toolbarExternal).html(""),this.opts.air&&$("#redactor_air_"+this.uuid).remove()},getObject:function(){return $.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getIframe:function(){return this.opts.iframe?this.$frame:!1},getToolbar:function(){return this.$toolbar?this.$toolbar:!1},get:function(){return this.$source.val()},getCodeIframe:function(){this.$editor.removeAttr("contenteditable").removeAttr("dir");var e=this.outerHtml(this.$frame.contents().children());return this.$editor.attr({contenteditable:!0,dir:this.opts.direction}),e},set:function(e,t,n){e=e.toString(),e=e.replace(/\$/g,"&#36;"),this.opts.fullpage?this.setCodeIframe(e):this.setEditor(e,t),""==e&&(n=!1),n!==!1&&this.placeholderRemoveFromEditor()},setEditor:function(e,t){t!==!1&&(e=this.cleanSavePreCode(e),e=this.cleanStripTags(e),e=this.cleanConvertProtected(e),e=this.cleanConvertInlineTags(e,!0),e=this.opts.linebreaks===!1?this.cleanConverters(e):e.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi,"$2<br>")),e=e.replace(/&amp;#36;/g,"$"),e=this.cleanEmpty(e),this.$editor.html(e),this.setNonEditable(),this.setSpansVerified(),this.sync()},setCodeIframe:function(e){var t=this.iframePage();this.$frame[0].src="about:blank",e=this.cleanConvertProtected(e),e=this.cleanConvertInlineTags(e),e=this.cleanRemoveSpaces(e),t.open(),t.write(e),t.close(),this.opts.fullpage&&(this.$editor=this.$frame.contents().find("body").attr({contenteditable:!0,dir:this.opts.direction})),this.setNonEditable(),this.setSpansVerified(),this.sync()},setFullpageOnInit:function(e){this.fullpageDoctype=e.match(/^<\!doctype[^>]*>/i),this.fullpageDoctype&&1==this.fullpageDoctype.length&&(e=e.replace(/^<\!doctype[^>]*>/i,"")),e=this.cleanSavePreCode(e,!0),e=this.cleanConverters(e),e=this.cleanEmpty(e),this.$editor.html(e),this.setNonEditable(),this.setSpansVerified(),this.sync()},setFullpageDoctype:function(){if(this.fullpageDoctype&&1==this.fullpageDoctype.length){var e=this.fullpageDoctype[0]+"\n"+this.$source.val();this.$source.val(e)}},setSpansVerified:function(){var e=this.$editor.find("span"),t="inline";$.each(e,function(){var e=this.outerHTML,n=new RegExp("<"+this.tagName,"gi"),i=e.replace(n,"<"+t);n=new RegExp("</"+this.tagName,"gi"),i=i.replace(n,"</"+t),$(this).replaceWith(i)})},setSpansVerifiedHtml:function(e){return e=e.replace(/<span(.*?)>/,"<inline$1>"),e.replace(/<\/span>/,"</inline>")},setNonEditable:function(){this.$editor.find(".noneditable").attr("contenteditable",!1)},sync:function(e){var t="";this.cleanUnverified(),t=this.opts.fullpage?this.getCodeIframe():this.$editor.html(),t=this.syncClean(t),t=this.cleanRemoveEmptyTags(t);var n=this.cleanRemoveSpaces(this.$source.val(),!1),i=this.cleanRemoveSpaces(t,!1);if(n==i)return!1;if(t=t.replace(/<\/li><(ul|ol)>([\w\W]*?)<\/(ul|ol)>/gi,"<$1>$2</$1></li>"),"<br>"===$.trim(t)&&(t=""),this.opts.xhtml){var r=["br","hr","img","link","input","meta"];$.each(r,function(e,n){t=t.replace(new RegExp("<"+n+"(.*?[^/$]?)>","gi"),"<"+n+"$1 />")})}if(t=this.callback("syncBefore",!1,t),this.$source.val(t),this.setFullpageDoctype(),this.callback("syncAfter",!1,t),this.start===!1)if("undefined"!=typeof e)switch(e.which){case 37:break;case 38:break;case 39:break;case 40:break;default:this.callback("change",!1,t)}else this.callback("change",!1,t)},syncClean:function(e){return this.opts.fullpage||(e=this.cleanStripTags(e)),e=$.trim(e),e=this.placeholderRemoveFromCode(e),e=e.replace(/&#x200b;/gi,""),e=e.replace(/&#8203;/gi,""),e=e.replace(/<\/a>&nbsp;/gi,"</a> "),e=e.replace(/\u200B/g,""),("<p></p>"==e||"<p> </p>"==e||"<p>&nbsp;</p>"==e)&&(e=""),this.opts.linkNofollow&&(e=e.replace(/<a(.*?)rel="nofollow"(.*?)>/gi,"<a$1$2>"),e=e.replace(/<a(.*?)>/gi,'<a$1 rel="nofollow">')),e=e.replace("<!--?php","<?php"),e=e.replace("?-->","?>"),e=e.replace(/<(.*?)class="noeditable"(.*?) contenteditable="false"(.*?)>/gi,'<$1class="noeditable"$2$3>'),e=e.replace(/ data-tagblock=""/gi,""),e=e.replace(/<br\s?\/?>\n?<\/(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)>/gi,"</$1>"),e=e.replace(/<span(.*?)id="redactor-image-box"(.*?)>([\w\W]*?)<img(.*?)><\/span>/gi,"$3<img$4>"),e=e.replace(/<span(.*?)id="redactor-image-resizer"(.*?)>(.*?)<\/span>/gi,""),e=e.replace(/<span(.*?)id="redactor-image-editter"(.*?)>(.*?)<\/span>/gi,""),e=e.replace(/<(ul|ol)>\s*\t*\n*<\/(ul|ol)>/gi,""),this.opts.cleanFontTag&&(e=e.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi,"$2")),e=e.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi,"$2"),e=e.replace(/<inline>([\w\W]*?)<\/inline>/gi,"$1"),e=e.replace(/<inline>/gi,"<span>"),e=e.replace(/<inline /gi,"<span "),e=e.replace(/<\/inline>/gi,"</span>"),this.opts.removeEmptyTags&&(e=e.replace(/<span>([\w\W]*?)<\/span>/gi,"$1")),e=e.replace(/<span(.*?)class="redactor_placeholder"(.*?)>([\w\W]*?)<\/span>/gi,""),e=e.replace(/<img(.*?)contenteditable="false"(.*?)>/gi,"<img$1$2>"),e=e.replace(/&/gi,"&"),e=e.replace(/\u2122/gi,"&trade;"),e=e.replace(/\u00a9/gi,"&copy;"),e=e.replace(/\u2026/gi,"&hellip;"),e=e.replace(/\u2014/gi,"&mdash;"),e=e.replace(/\u2010/gi,"&dash;"),e=this.cleanReConvertProtected(e)},buildStart:function(){this.content="",this.$box=$('<div class="redactor_box" />'),"TEXTAREA"===this.$source[0].tagName&&(this.opts.textareamode=!0),this.opts.mobile===!1&&this.isMobile()?this.buildMobile():(this.buildContent(),this.opts.iframe?(this.opts.autoresize=!1,this.iframeStart()):this.opts.textareamode?this.buildFromTextarea():this.buildFromElement(),this.opts.iframe||(this.buildOptions(),this.buildAfter()))},buildMobile:function(){this.opts.textareamode||(this.$editor=this.$source,this.$editor.hide(),this.$source=this.buildCodearea(this.$editor),this.$source.val(this.content)),this.$box.insertAfter(this.$source).append(this.$source)},buildContent:function(){this.content=$.trim(this.opts.textareamode?this.$source.val():this.$source.html())},buildFromTextarea:function(){this.$editor=$("<div />"),this.$box.insertAfter(this.$source).append(this.$editor).append(this.$source),this.buildAddClasses(this.$editor),this.buildEnable()},buildFromElement:function(){this.$editor=this.$source,this.$source=this.buildCodearea(this.$editor),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$source),this.buildEnable()},buildCodearea:function(e){return $("<textarea />").attr("name",e.attr("id")).css("height",this.sourceHeight)},buildAddClasses:function(e){$.each(this.$source.get(0).className.split(/\s+/),function(t,n){e.addClass("redactor_"+n)})},buildEnable:function(){this.$editor.addClass("redactor_editor").attr({contenteditable:!0,dir:this.opts.direction}),this.$source.attr("dir",this.opts.direction).hide(),this.set(this.content,!0,!1)},buildOptions:function(){var e=this.$editor;this.opts.iframe&&(e=this.$frame),this.opts.tabindex&&e.attr("tabindex",this.opts.tabindex),this.opts.minHeight?e.css("min-height",this.opts.minHeight+"px"):this.browser("mozilla")&&this.opts.linebreaks&&this.$editor.css("min-height","45px"),this.browser("mozilla")&&this.opts.linebreaks&&this.$editor.css("padding-bottom","10px"),this.opts.maxHeight&&(this.opts.autoresize=!1,this.sourceHeight=this.opts.maxHeight),this.opts.wym&&this.$editor.addClass("redactor_editor_wym"),this.opts.typewriter&&this.$editor.addClass("redactor-editor-typewriter"),this.opts.autoresize||e.css("height",this.sourceHeight)},buildAfter:function(){if(this.start=!1,this.opts.toolbar&&(this.opts.toolbar=this.toolbarInit(this.opts.curLang),this.toolbarBuild()),this.modalTemplatesInit(),this.buildPlugins(),this.buildBindKeyboard(),this.opts.autosave&&this.autosave(),setTimeout($.proxy(this.observeStart,this),4),this.browser("mozilla"))try{this.document.execCommand("enableObjectResizing",!1,!1),this.document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}this.opts.focus&&setTimeout($.proxy(this.focus,this),100),this.opts.visual||setTimeout($.proxy(function(){this.opts.visual=!0,this.toggle(!1)},this),200),this.callback("init")},buildBindKeyboard:function(){this.dblEnter=0,!this.opts.dragUpload||this.opts.imageUpload===!1&&this.opts.s3===!1||this.$editor.on("drop.redactor",$.proxy(this.buildEventDrop,this)),this.$editor.on("click.redactor",$.proxy(function(){this.selectall=!1},this)),this.$editor.on("input.redactor",$.proxy(this.sync,this)),this.$editor.on("paste.redactor",$.proxy(this.buildEventPaste,this)),this.$editor.on("keydown.redactor",$.proxy(this.buildEventKeydown,this)),this.$editor.on("keyup.redactor",$.proxy(this.buildEventKeyup,this)),$.isFunction(this.opts.textareaKeydownCallback)&&this.$source.on("keydown.redactor-textarea",$.proxy(this.opts.textareaKeydownCallback,this)),$.isFunction(this.opts.focusCallback)&&this.$editor.on("focus.redactor",$.proxy(this.opts.focusCallback,this));var e;$(document).mousedown(function(t){e=$(t.target)}),this.$editor.on("blur.redactor",$.proxy(function(t){$(e).hasClass("redactor_toolbar")||0!=$(e).parents(".redactor_toolbar").size()||(this.selectall=!1,$.isFunction(this.opts.blurCallback)&&this.callback("blur",t))},this))},buildEventDrop:function(e){if(e=e.originalEvent||e,void 0===window.FormData||!e.dataTransfer)return!0;var t=e.dataTransfer.files.length;if(0==t)return!0;e.preventDefault();var n=e.dataTransfer.files[0];return this.opts.dnbImageTypes!==!1&&-1==this.opts.dnbImageTypes.indexOf(n.type)?!0:(this.bufferSet(),this.showProgressBar(),void(this.opts.s3===!1?this.dragUploadAjax(this.opts.imageUpload,n,!0,e,this.opts.imageUploadParam):this.s3uploadFile(n)))},buildEventPaste:function(e){var t=!1;if(this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")){var n=this.browser("version").split(".");n[0]<536&&(t=!0)}if(t)return!0;if(this.browser("opera"))return!0;if(this.opts.clipboardUpload&&this.buildEventClipboardUpload(e))return!0;if(this.opts.cleanup){this.rtePaste=!0,this.selectionSave(),this.selectall||(this.opts.autoresize===!0&&this.fullscreen!==!0?(this.$editor.height(this.$editor.height()),this.saveScroll=this.document.body.scrollTop):this.saveScroll=this.$editor.scrollTop());var i=this.extractContent();setTimeout($.proxy(function(){var e=this.extractContent();this.$editor.append(i),this.selectionRestore();var t=this.getFragmentHtml(e);this.pasteClean(t),this.opts.autoresize===!0&&this.fullscreen!==!0&&this.$editor.css("height","auto")},this),1)}},buildEventClipboardUpload:function(e){var t=e.originalEvent||e;if(this.clipboardFilePaste=!1,"undefined"==typeof t.clipboardData)return!1;if(t.clipboardData.items){var n=t.clipboardData.items[0].getAsFile();if(null!==n){this.bufferSet(),this.clipboardFilePaste=!0;var i=new FileReader;return i.onload=$.proxy(this.pasteClipboardUpload,this),i.readAsDataURL(n),!0}}return!1},buildEventKeydown:function(e){if(this.rtePaste)return!1;var t=e.which,n=e.ctrlKey||e.metaKey,i=this.getParent(),r=this.getCurrent(),o=this.getBlock(),s=!1;if(this.callback("keydown",e),this.browser("mozilla")&&"modify"in window.getSelection()&&n&&(37===e.keyCode||39===e.keyCode)){var a=this.getSelection(),l=e.metaKey?"line":"word";37===e.keyCode&&(a.modify("extend","left",l),e.shiftKey||a.collapseToStart()),39===e.keyCode&&(a.modify("extend","right",l),e.shiftKey||a.collapseToEnd()),e.preventDefault()}if(this.imageResizeHide(!1),(i&&"PRE"===$(i).get(0).tagName||r&&"PRE"===$(r).get(0).tagName)&&(s=!0,t===this.keyCode.DOWN&&this.insertAfterLastElement(o)),t===this.keyCode.DOWN&&(i&&"BLOCKQUOTE"===$(i)[0].tagName&&this.insertAfterLastElement(i),r&&"BLOCKQUOTE"===$(r)[0].tagName&&this.insertAfterLastElement(r),i&&"P"===$(i)[0].tagName&&"BLOCKQUOTE"==$(i).parent()[0].tagName&&this.insertAfterLastElement(i,$(i).parent()[0]),r&&"P"===$(r)[0].tagName&&i&&"BLOCKQUOTE"==$(i)[0].tagName&&this.insertAfterLastElement(r,i)),this.shortcuts(e,t),n&&90===t&&!e.shiftKey&&!e.altKey)return e.preventDefault(),void(this.opts.buffer.length?this.bufferUndo():this.document.execCommand("undo",!1,!1));if(n&&90===t&&e.shiftKey&&!e.altKey)return e.preventDefault(),void(0!=this.opts.rebuffer.length?this.bufferRedo():this.document.execCommand("redo",!1,!1));if(32==t&&this.bufferSet(),n&&65===t?(this.bufferSet(),this.selectall=!0):t==this.keyCode.LEFT_WIN||n||(this.selectall=!1),t!=this.keyCode.ENTER||e.shiftKey||e.ctrlKey||e.metaKey)t===this.keyCode.ENTER&&(e.ctrlKey||e.shiftKey)&&(this.bufferSet(),e.preventDefault(),this.insertLineBreak());else{var c=this.getRange();if(c&&c.collapsed===!1&&(sel=this.getSelection(),sel.rangeCount&&c.deleteContents()),this.browser("msie")&&1==i.nodeType&&("TD"==i.tagName||"TH"==i.tagName))return e.preventDefault(),this.bufferSet(),this.insertNode(document.createElement("br")),this.callback("enter",e),!1;if(o&&("BLOCKQUOTE"==o.tagName||"BLOCKQUOTE"==$(o).parent()[0].tagName))if(this.isEndOfElement()){if(1==this.dblEnter){var u,h;if("BLOCKQUOTE"==o.tagName?(h="br",u=o):(h="p",u=$(o).parent()[0]),e.preventDefault(),this.insertingAfterLastElement(u),this.dblEnter=0,"p"==h)$(o).parent().find("p").last().remove();else{var d=$.trim($(o).html());$(o).html(d.replace(/<br\s?\/?>$/i,""))}return}this.dblEnter++}else this.dblEnter++;if(s===!0)return this.buildEventKeydownPre(e,r);if(!this.opts.linebreaks){if(o&&"LI"==o.tagName){var p=this.getBlock();if(p!==!1||"LI"===p.tagName){var f=$.trim($(o).text()),m=$.trim($(p).text());if(""==f&&""==m&&0==$(p).next("li").size()&&0==$(p).parents("li").size()){this.bufferSet();var g=$(p).closest("ol, ul");$(p).remove();var v=$("<p>"+this.opts.invisibleSpace+"</p>");return g.after(v),this.selectionStart(v),this.sync(),this.callback("enter",e),!1}}}if(o&&this.opts.rBlockTest.test(o.tagName))this.bufferSet(),setTimeout($.proxy(function(){var e=this.getBlock();if("DIV"===e.tagName&&!$(e).hasClass("redactor_editor")){var t=$("<p>"+this.opts.invisibleSpace+"</p>");$(e).replaceWith(t),this.selectionStart(t)}},this),1);else if(o===!1){this.bufferSet();var v=$("<p>"+this.opts.invisibleSpace+"</p>");return this.insertNode(v[0]),this.selectionStart(v),this.callback("enter",e),!1}}if(this.opts.linebreaks){if(!o||!this.opts.rBlockTest.test(o.tagName))return this.buildEventKeydownInsertLineBreak(e);this.bufferSet(),setTimeout($.proxy(function(){var e=this.getBlock();"DIV"!==e.tagName&&"P"!==e.tagName||$(e).hasClass("redactor_editor")||this.replaceLineBreak(e)},this),1)}if("BLOCKQUOTE"==o.tagName||"FIGCAPTION"==o.tagName)return this.buildEventKeydownInsertLineBreak(e);this.callback("enter",e)}return(t===this.keyCode.TAB||e.metaKey&&219===t)&&this.opts.shortcuts?this.buildEventKeydownTab(e,s,t):void(t===this.keyCode.BACKSPACE&&this.buildEventKeydownBackspace(e,r,i))},buildEventKeydownPre:function(e,t){e.preventDefault(),this.bufferSet();var n=$(t).parent().text();return this.insertNode(document.createTextNode("\n")),-1==n.search(/\s$/)&&this.insertNode(document.createTextNode("\n")),this.sync(),this.callback("enter",e),!1},buildEventKeydownTab:function(e,t){return this.opts.tabFocus?this.isEmpty(this.get())&&this.opts.tabSpaces===!1?!0:(e.preventDefault(),t!==!0||e.shiftKey?this.opts.tabSpaces!==!1?(this.bufferSet(),this.insertNode(document.createTextNode(Array(this.opts.tabSpaces+1).join(" "))),this.sync(),!1):(e.shiftKey?this.indentingOutdent():this.indentingIndent(),!1):(this.bufferSet(),this.insertNode(document.createTextNode("	")),this.sync(),!1)):!0},buildEventKeydownBackspace:function(e,t,n){if(n&&t&&"TD"==n.parentNode.tagName&&"UL"==n.tagName&&"LI"==t.tagName&&1==$(n).children("li").size()){var i=$(t).text().replace(/[\u200B-\u200D\uFEFF]/g,"");if(""==i){var r=n.parentNode;return $(n).remove(),this.selectionStart(r),this.sync(),!1}}if("undefined"!=typeof t.tagName&&/^(H[1-6])$/i.test(t.tagName)){var r;r=$(this.opts.linebreaks===!1?"<p>"+this.opts.invisibleSpace+"</p>":"<br>"+this.opts.invisibleSpace),$(t).replaceWith(r),this.selectionStart(r),this.sync()}"undefined"!=typeof t.nodeValue&&null!==t.nodeValue&&t.remove&&3===t.nodeType&&null==t.nodeValue.match(/[^\u200B]/g)&&($(t).prev().remove(),this.sync())},buildEventKeydownInsertLineBreak:function(e){this.bufferSet(),e.preventDefault(),this.insertLineBreak(),this.callback("enter",e)},buildEventKeyup:function(e){if(this.rtePaste)return!1;var t=e.which,n=this.getParent(),i=this.getCurrent();if(!this.opts.linebreaks&&3==i.nodeType&&(0==n||"BODY"==n.tagName)){var r=$("<p>").append($(i).clone());$(i).replaceWith(r);var o=$(r).next();"undefined"!=typeof o[0]&&"BR"==o[0].tagName&&o.remove(),this.selectionEnd(r)}return(this.opts.convertLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&t===this.keyCode.ENTER&&this.buildEventKeyupConverters(),t===this.keyCode.DELETE||t===this.keyCode.BACKSPACE?this.formatEmpty(e):(this.callback("keyup",e),void this.sync(e))},buildEventKeyupConverters:function(){this.formatLinkify(this.opts.linkProtocol,this.opts.convertLinks,this.opts.convertImageLinks,this.opts.convertVideoLinks,this.opts.linkSize),setTimeout($.proxy(function(){this.opts.convertImageLinks&&this.observeImages(),this.opts.observeLinks&&this.observeLinks()},this),5)},buildPlugins:function(){this.opts.plugins&&$.each(this.opts.plugins,$.proxy(function(e,t){RedactorPlugins[t]&&($.extend(this,RedactorPlugins[t]),$.isFunction(RedactorPlugins[t].init)&&this.init())},this))},iframeStart:function(){this.iframeCreate(),this.opts.textareamode?this.iframeAppend(this.$source):(this.$sourceOld=this.$source.hide(),this.$source=this.buildCodearea(this.$sourceOld),this.iframeAppend(this.$sourceOld))
},iframeAppend:function(e){this.$source.attr("dir",this.opts.direction).hide(),this.$box.insertAfter(e).append(this.$frame).append(this.$source)},iframeCreate:function(){this.$frame=$('<iframe style="width: 100%;" frameborder="0" />').one("load",$.proxy(function(){if(this.opts.fullpage){this.iframePage(),""===this.content&&(this.content=this.opts.invisibleSpace),this.$frame.contents()[0].write(this.content),this.$frame.contents()[0].close();var e=setInterval($.proxy(function(){this.$frame.contents().find("body").html()&&(clearInterval(e),this.iframeLoad())},this),0)}else this.iframeLoad()},this))},iframeDoc:function(){return this.$frame[0].contentWindow.document},iframePage:function(){var e=this.iframeDoc();return e.documentElement&&e.removeChild(e.documentElement),e},iframeAddCss:function(e){e=e||this.opts.css,this.isString(e)&&this.$frame.contents().find("head").append('<link rel="stylesheet" href="'+e+'" />'),$.isArray(e)&&$.each(e,$.proxy(function(e,t){this.iframeAddCss(t)},this))},iframeLoad:function(){this.$editor=this.$frame.contents().find("body").attr({contenteditable:!0,dir:this.opts.direction}),this.$editor[0]&&(this.document=this.$editor[0].ownerDocument,this.window=this.document.defaultView||window),this.iframeAddCss(),this.opts.fullpage?this.setFullpageOnInit(this.$source.val()):this.set(this.content,!0,!1),this.buildOptions(),this.buildAfter()},placeholderInit:function(){this.opts.placeholder!==!1?(this.placeholderText=this.opts.placeholder,this.opts.placeholder=!0):"undefined"==typeof this.$element.attr("placeholder")||""==this.$element.attr("placeholder")?this.opts.placeholder=!1:(this.placeholderText=this.$element.attr("placeholder"),this.opts.placeholder=!0)},placeholderStart:function(e){return this.opts.placeholder===!1?!1:this.isEmpty(e)?(this.opts.focus=!1,this.placeholderOnFocus(),this.placeholderOnBlur(),this.placeholderGet()):(this.placeholderOnBlur(),!1)},placeholderOnFocus:function(){this.$editor.on("focus.redactor_placeholder",$.proxy(this.placeholderFocus,this))},placeholderOnBlur:function(){this.$editor.on("blur.redactor_placeholder",$.proxy(this.placeholderBlur,this))},placeholderGet:function(){var e=$('<span class="redactor_placeholder">').data("redactor","verified").attr("contenteditable",!1).text(this.placeholderText);return this.opts.linebreaks===!1?$("<p>").append(e):e},placeholderBlur:function(){var e=this.get();this.isEmpty(e)&&(this.placeholderOnFocus(),this.$editor.html(this.placeholderGet()))},placeholderFocus:function(){this.$editor.find("span.redactor_placeholder").remove();var e="";this.opts.linebreaks===!1&&(e=this.opts.emptyHtml),this.$editor.off("focus.redactor_placeholder"),this.$editor.html(e),this.opts.linebreaks===!1?this.selectionStart(this.$editor.children()[0]):this.focus(),this.sync()},placeholderRemoveFromEditor:function(){this.$editor.find("span.redactor_placeholder").remove(),this.$editor.off("focus.redactor_placeholder")},placeholderRemoveFromCode:function(e){return e.replace(/<span class="redactor_placeholder"(.*?)>(.*?)<\/span>/i,"")},shortcuts:function(e,key){return this.opts.shortcuts?void $.each(this.opts.shortcuts,$.proxy(function(str,command){var keys=str.split(",");for(var i in keys)"string"==typeof keys[i]&&this.shortcutsHandler(e,$.trim(keys[i]),$.proxy(function(){eval(command)},this))},this)):(!e.ctrlKey&&!e.metaKey||66!==key&&73!==key||e.preventDefault(),!1)},shortcutsHandler:function(e,t,n){var i={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"};t=t.toLowerCase().split(" ");var o=i[e.keyCode],s=String.fromCharCode(e.which).toLowerCase(),a="",l={};$.each(["alt","ctrl","meta","shift"],function(t,n){e[n+"Key"]&&o!==n&&(a+=n+"+")}),o&&(l[a+o]=!0),s&&(l[a+s]=!0,l[a+r[s]]=!0,"shift+"===a&&(l[r[s]]=!0));for(var c=0,u=t.length;u>c;c++)if(l[t[c]])return e.preventDefault(),n.apply(this,arguments)},focus:function(){this.browser("opera")?this.$editor.focus():this.window.setTimeout($.proxy(this.focusSet,this,!0),1)},focusWithSaveScroll:function(){if(this.browser("msie"))var e=this.document.documentElement.scrollTop;this.$editor.focus(),this.browser("msie")&&(this.document.documentElement.scrollTop=e)},focusEnd:function(){if(this.browser("mozilla"))if(this.opts.linebreaks===!1){var e=this.$editor.children().last();this.$editor.focus(),this.selectionEnd(e)}else this.focusSet();else this.focusSet()},focusSet:function(e,t){this.$editor.focus(),"undefined"==typeof t&&(t=this.$editor[0]);var n=this.getRange();n.selectNodeContents(t),n.collapse(e||!1);var i=this.getSelection();i.removeAllRanges(),i.addRange(n)},toggle:function(e){this.opts.visual?this.toggleCode(e):this.toggleVisual()},toggleVisual:function(){var e=this.$source.hide().val();if("undefined"!=typeof this.modified){var t=this.modified.replace(/\n/g,""),n=e.replace(/\n/g,"");n=this.cleanRemoveSpaces(n,!1),this.modified=this.cleanRemoveSpaces(t,!1)!==n}this.modified&&(this.opts.fullpage&&""===e?this.setFullpageOnInit(e):(this.set(e),this.opts.fullpage&&this.buildBindKeyboard()),this.callback("change",!1,e)),this.opts.iframe?this.$frame.show():this.$editor.show(),this.opts.fullpage&&this.$editor.attr("contenteditable",!0),this.$source.off("keydown.redactor-textarea-indenting"),this.$editor.focus(),this.selectionRestore(),this.observeStart(),this.buttonActiveVisual(),this.buttonInactive("html"),this.opts.visual=!0},toggleCode:function(e){e!==!1&&this.selectionSave();var t=null;this.opts.iframe?(t=this.$frame.height(),this.opts.fullpage&&this.$editor.removeAttr("contenteditable"),this.$frame.hide()):(t=this.$editor.innerHeight(),this.$editor.hide());var n=this.$source.val();""!==n&&this.opts.tidyHtml&&this.$source.val(this.cleanHtml(n)),this.modified=n,this.$source.height(t).show().focus(),this.$source.on("keydown.redactor-textarea-indenting",this.textareaIndenting),this.buttonInactiveVisual(),this.buttonActive("html"),this.opts.visual=!1},textareaIndenting:function(e){if(9===e.keyCode){var t=$(this),n=t.get(0).selectionStart;return t.val(t.val().substring(0,n)+"	"+t.val().substring(t.get(0).selectionEnd)),t.get(0).selectionStart=t.get(0).selectionEnd=n+1,!1}},autosave:function(){var e=!1;this.autosaveInterval=setInterval($.proxy(function(){var t=this.get();if(e!==t){var n=this.$source.attr("name");$.ajax({url:this.opts.autosave,type:"post",data:"name="+n+"&"+n+"="+escape(encodeURIComponent(t)),success:$.proxy(function(n){var i=$.parseJSON(n);"undefined"==typeof i.error?this.callback("autosave",!1,i):this.callback("autosaveError",!1,i),e=t},this)})}},this),1e3*this.opts.autosaveInterval)},toolbarBuild:function(){if(this.isMobile()&&this.opts.buttonsHideOnMobile.length>0&&$.each(this.opts.buttonsHideOnMobile,$.proxy(function(e,t){var n=this.opts.buttons.indexOf(t);this.opts.buttons.splice(n,1)},this)),this.opts.air)this.opts.buttons=this.opts.airButtons;else if(!this.opts.buttonSource){var e=this.opts.buttons.indexOf("html");this.opts.buttons.splice(e,1)}return this.opts.toolbar&&$.each(this.opts.toolbar.formatting.dropdown,$.proxy(function(e){"-1"==$.inArray(e,this.opts.formattingTags)&&delete this.opts.toolbar.formatting.dropdown[e]},this)),0===this.opts.buttons.length?!1:(this.airEnable(),this.$toolbar=$("<ul>").addClass("redactor_toolbar").attr("id","redactor_toolbar_"+this.uuid),this.opts.typewriter&&this.$toolbar.addClass("redactor-toolbar-typewriter"),this.opts.toolbarOverflow&&this.isMobile()&&this.$toolbar.addClass("redactor-toolbar-overflow"),this.opts.air?(this.$air=$('<div class="redactor_air">').attr("id","redactor_air_"+this.uuid).hide(),this.$air.append(this.$toolbar),$("body").append(this.$air)):this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),$(this.opts.toolbarExternal).html(this.$toolbar)):this.$box.prepend(this.$toolbar),$.each(this.opts.buttons,$.proxy(function(e,t){if(this.opts.toolbar[t]){var n=this.opts.toolbar[t];if(this.opts.fileUpload===!1&&"file"===t)return!0;this.$toolbar.append($("<li>").append(this.buttonBuild(t,n)))}},this)),this.$toolbar.find("a").attr("tabindex","-1"),this.opts.toolbarFixed&&(this.toolbarObserveScroll(),$(this.opts.toolbarFixedTarget).on("scroll.redactor",$.proxy(this.toolbarObserveScroll,this))),void(this.opts.activeButtons&&this.$editor.on("mouseup.redactor keyup.redactor",$.proxy(this.buttonActiveObserver,this))))},toolbarObserveScroll:function(){var e=$(this.opts.toolbarFixedTarget).scrollTop(),t=0,n=0,i=0;if(t=this.opts.toolbarFixedTarget===document?this.$box.offset().top:1,i=t+this.$box.height()+40,e>t){var r="100%";this.opts.toolbarFixedBox&&(n=this.$box.offset().left,r=this.$box.innerWidth(),this.$toolbar.addClass("toolbar_fixed_box")),this.toolbarFixed=!0,this.$toolbar.css(this.opts.toolbarFixedTarget===document?{position:"fixed",width:r,zIndex:10005,top:this.opts.toolbarFixedTopOffset+"px",left:n}:{position:"absolute",width:r,zIndex:10005,top:this.opts.toolbarFixedTopOffset+e+"px",left:0}),i>e?this.$toolbar.css("visibility","visible"):this.$toolbar.css("visibility","hidden")}else this.toolbarFixed=!1,this.$toolbar.css({position:"relative",width:"auto",top:0,left:n}),this.opts.toolbarFixedBox&&this.$toolbar.removeClass("toolbar_fixed_box")},airEnable:function(){this.opts.air&&this.$editor.on("mouseup.redactor keyup.redactor",this,$.proxy(function(e){var t=this.getSelectionText();if("mouseup"===e.type&&""!=t&&this.airShow(e),"keyup"===e.type&&e.shiftKey&&""!=t){var n=$(this.getElement(this.getSelection().focusNode)),i=n.offset();i.height=n.height(),this.airShow(i,!0)}},this))},airShow:function(e,t){if(this.opts.air){this.selectionSave();var n,i;if($(".redactor_air").hide(),t)n=e.left,i=e.top+e.height+14,this.opts.iframe&&(i+=this.$box.position().top-$(this.document).scrollTop(),n+=this.$box.position().left);else{var r=this.$air.innerWidth();n=e.clientX,$(this.document).width()<n+r&&(n-=r),i=e.clientY+14,this.opts.iframe?(i+=this.$box.position().top,n+=this.$box.position().left):i+=$(this.document).scrollTop()}this.$air.css({left:n+"px",top:i+"px"}).show(),this.airBindHide()}},airBindHide:function(){if(this.opts.air){var e=$.proxy(function(e){$(e).on("mousedown.redactor",$.proxy(function(t){0===$(t.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),this.selectionRemove(),$(e).off(t))},this)).on("keydown.redactor",$.proxy(function(t){t.which===this.keyCode.ESC&&this.getSelection().collapseToStart(),this.$air.fadeOut(100),$(e).off(t)},this))},this);e(document),this.opts.iframe&&e(this.document)}},airBindMousemoveHide:function(){if(this.opts.air){var e=$.proxy(function(e){$(e).on("mousemove.redactor",$.proxy(function(t){0===$(t.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),$(e).off(t))},this))},this);e(document),this.opts.iframe&&e(this.document)}},dropdownBuild:function(e,t){$.each(t,$.proxy(function(t,n){n.className||(n.className="");var i;"separator"===n.name?i=$('<a class="redactor_separator_drop">'):(i=$('<a href="#" class="'+n.className+" redactor_dropdown_"+t+'">'+n.title+"</a>"),i.on("click",$.proxy(function(e){this.opts.air&&this.selectionRestore(),e.preventDefault&&e.preventDefault(),this.browser("msie")&&(e.returnValue=!1),n.callback&&n.callback.call(this,t,i,n,e),n.exec&&this.execCommand(n.exec,t),n.func&&this[n.func](t),this.buttonActiveObserver(),this.opts.air&&this.$air.fadeOut(100)},this))),e.append(i)},this))},dropdownShow:function(e,t){if(!this.opts.visual)return e.preventDefault(),!1;var n=this.buttonGet(t),i=n.data("dropdown").appendTo(document.body);if(n.hasClass("dropact"))this.dropdownHideAll();else{this.dropdownHideAll(),this.callback("dropdownShow",{dropdown:i,key:t,button:n}),this.buttonActive(t),n.addClass("dropact");var r=n.offset(),o=i.width();r.left+o>$(document).width()&&(r.left-=o);var s=r.left+"px",a=n.innerHeight(),l="absolute",c=a+this.opts.toolbarFixedTopOffset+"px";this.opts.toolbarFixed&&this.toolbarFixed?l="fixed":c=r.top+a+"px",i.css({position:l,left:s,top:c}).show(),this.callback("dropdownShown",{dropdown:i,key:t,button:n})}var u=$.proxy(function(e){this.dropdownHide(e,i)},this);$(document).one("click",u),this.$editor.one("click",u),this.$editor.one("touchstart",u),e.stopPropagation(),this.focusWithSaveScroll()},dropdownHideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor_act").removeClass("dropact"),$(".redactor_dropdown").hide(),this.callback("dropdownHide")},dropdownHide:function(e,t){$(e.target).hasClass("dropact")||(t.removeClass("dropact"),this.dropdownHideAll())},buttonBuild:function(e,t,n){var i=$('<a href="javascript:;" title="'+t.title+'" tabindex="-1" class="re-icon re-'+e+'"></a>');if("undefined"!=typeof n&&i.addClass("redactor-btn-image"),i.on("click",$.proxy(function(n){return n.preventDefault&&n.preventDefault(),this.browser("msie")&&(n.returnValue=!1),i.hasClass("redactor_button_disabled")?!1:(this.isFocused()!==!1||t.exec||this.focusWithSaveScroll(),t.exec?(this.focusWithSaveScroll(),this.execCommand(t.exec,e),this.airBindMousemoveHide()):t.func&&"show"!==t.func?(this[t.func](e),this.airBindMousemoveHide()):t.callback?(t.callback.call(this,e,i,t,n),this.airBindMousemoveHide()):t.dropdown&&this.dropdownShow(n,e),void this.buttonActiveObserver(!1,e))},this)),t.dropdown){var r=$('<div class="redactor_dropdown redactor_dropdown_box_'+e+'" style="display: none;">');i.data("dropdown",r),this.dropdownBuild(r,t.dropdown)}return i},buttonGet:function(e){return this.opts.toolbar?$(this.$toolbar.find("a.re-"+e)):!1},buttonTagToActiveState:function(e,t){this.opts.activeButtons.push(e),this.opts.activeButtonsStates[t]=e},buttonActiveToggle:function(e){var t=this.buttonGet(e);t.hasClass("redactor_act")?this.buttonInactive(e):this.buttonActive(e)},buttonActive:function(e){var t=this.buttonGet(e);t.addClass("redactor_act")},buttonInactive:function(e){var t=this.buttonGet(e);t.removeClass("redactor_act")},buttonInactiveAll:function(e){this.$toolbar.find("a.re-icon").not(".re-"+e).removeClass("redactor_act")},buttonActiveVisual:function(){this.$toolbar.find("a.re-icon").not("a.re-html").removeClass("redactor_button_disabled")},buttonInactiveVisual:function(){this.$toolbar.find("a.re-icon").not("a.re-html").addClass("redactor_button_disabled")},buttonChangeIcon:function(e,t){this.buttonGet(e).addClass("re-"+t)},buttonRemoveIcon:function(e,t){this.buttonGet(e).removeClass("re-"+t)},buttonAwesome:function(e,t){var n=this.buttonGet(e);n.removeClass("redactor-btn-image"),n.addClass("fa-redactor-btn"),n.html('<i class="fa '+t+'"></i>')},buttonAdd:function(e,t,n,i){if(this.opts.toolbar){var r=this.buttonBuild(e,{title:t,callback:n,dropdown:i},!0);return this.$toolbar.append($("<li>").append(r)),r}},buttonAddFirst:function(e,t,n,i){if(this.opts.toolbar){var r=this.buttonBuild(e,{title:t,callback:n,dropdown:i},!0);this.$toolbar.prepend($("<li>").append(r))}},buttonAddAfter:function(e,t,n,i,r){if(this.opts.toolbar){var o=this.buttonBuild(t,{title:n,callback:i,dropdown:r},!0),s=this.buttonGet(e);return 0!==s.size()?s.parent().after($("<li>").append(o)):this.$toolbar.append($("<li>").append(o)),o}},buttonAddBefore:function(e,t,n,i,r){if(this.opts.toolbar){var o=this.buttonBuild(t,{title:n,callback:i,dropdown:r},!0),s=this.buttonGet(e);return 0!==s.size()?s.parent().before($("<li>").append(o)):this.$toolbar.append($("<li>").append(o)),o}},buttonRemove:function(e){var t=this.buttonGet(e);t.remove()},buttonActiveObserver:function(e,t){var n=this.getParent();if(this.buttonInactiveAll(t),e===!1&&"html"!==t)return void(-1!=$.inArray(t,this.opts.activeButtons)&&this.buttonActiveToggle(t));this.$toolbar.find("a.redactor_dropdown_link").text(n&&"A"===n.tagName?this.opts.curLang.link_edit:this.opts.curLang.link_insert),$.each(this.opts.activeButtonsStates,$.proxy(function(e,t){0!=$(n).closest(e,this.$editor.get()[0]).length&&this.buttonActive(t)},this));var i=$(n).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(i.length){var r=i.css("text-align");""==r&&(r="left"),this.buttonActive("align"+r)}},execPasteFrag:function(e){var t=this.getSelection();if(t.getRangeAt&&t.rangeCount){var n=this.getRange();n.deleteContents();var i=this.document.createElement("div");i.innerHTML=e;for(var r,o,s=this.document.createDocumentFragment();r=i.firstChild;)o=s.appendChild(r);{s.firstChild}n.insertNode(s),o&&(n=n.cloneRange(),n.setStartAfter(o),n.collapse(!0)),t.removeAllRanges(),t.addRange(n)}},exec:function(e,t,n){"formatblock"===e&&this.browser("msie")&&(t="<"+t+">"),"inserthtml"===e&&this.browser("msie")?this.isIe11()?this.execPasteFrag(t):(this.focusWithSaveScroll(),this.document.selection.createRange().pasteHTML(t)):this.document.execCommand(e,!1,t),n!==!1&&this.sync(),this.callback("execCommand",e,t)},execCommand:function(e,t,n){if(!this.opts.visual)return this.$source.focus(),!1;if(("bold"===e||"italic"===e||"underline"===e||"strikethrough"===e)&&this.bufferSet(),"superscript"===e||"subscript"===e){var i=this.getParent();("SUP"===i.tagName||"SUB"===i.tagName)&&this.inlineRemoveFormatReplace(i)}return"inserthtml"===e?(this.insertHtml(t,n),void this.callback("execCommand",e,t)):this.currentOrParentIs("PRE")&&!this.opts.formattingPre?!1:"insertunorderedlist"===e||"insertorderedlist"===e?this.execLists(e,t):"unlink"===e?this.execUnlink(e,t):(this.exec(e,t,n),void("inserthorizontalrule"===e&&this.$editor.find("hr").removeAttr("id")))},execUnlink:function(e,t){this.bufferSet();var n=this.currentOrParentIs("A");return n?($(n).replaceWith($(n).text()),this.sync(),void this.callback("execCommand",e,t)):void 0},execLists:function(e,t){this.bufferSet();var n=this.getParent(),i=$(n).closest("ol, ul");this.isParentRedactor(i)||0==i.size()||(i=!1);var r=!1;if(i&&i.length){r=!0;var o=i[0].tagName;("insertunorderedlist"===e&&"OL"===o||"insertorderedlist"===e&&"UL"===o)&&(r=!1)}if(this.selectionSave(),r){var s=this.getNodes(),a=this.getBlocks(s);"undefined"!=typeof s[0]&&s.length>1&&3==s[0].nodeType&&a.unshift(this.getBlock());var l="",c="";$.each(a,$.proxy(function(e,t){if("LI"==t.tagName){var n=$(t),i=n.clone();if(i.find("ul","ol").remove(),this.opts.linebreaks===!1)l+=this.outerHtml($("<p>").append(i.contents()));else{var r=i.html().replace(/<br\s?\/?>$/i,"");l+=r+"<br>"}0==e?(n.addClass("redactor-replaced").empty(),c=this.outerHtml(n)):n.remove()}},this)),html=this.$editor.html().replace(c,"</"+o+">"+l+"<"+o+">"),this.$editor.html(html),this.$editor.find(o+":empty").remove()}else{var u=$(this.getParent()).closest("td");if(this.browser("msie")&&!this.isIe11()&&this.opts.linebreaks){var h=this.selectionWrap("div"),d=$(h).html(),p=$("<ul>");"insertorderedlist"==e&&(p=$("<ol>"));var f=$("<li>");""==$.trim(d)?(f.append(d+'<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"),p.append(f),this.$editor.find("#selection-marker-1").replaceWith(p)):(f.append(d),p.append(f),$(h).replaceWith(p))}else this.document.execCommand(e);var n=this.getParent(),i=$(n).closest("ol, ul");if(this.opts.linebreaks===!1){var m=$.trim(i.text());""==m&&(i.children("li").find("br").remove(),i.children("li").append('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"))}if(0!=u.size()&&i.wrapAll("<td>"),i.length){var g=i.parent();this.isParentRedactor(g)&&"LI"!=g[0].tagName&&this.nodeTestBlocks(g[0])&&g.replaceWith(g.contents())}this.browser("mozilla")&&this.$editor.focus()}this.selectionRestore(),this.$editor.find("#selection-marker-1").removeAttr("id"),this.sync(),this.callback("execCommand",e,t)},indentingIndent:function(){this.indentingStart("indent")},indentingOutdent:function(){this.indentingStart("outdent")},indentingStart:function(e){if(this.bufferSet(),"indent"===e){var t=this.getBlock();if(this.selectionSave(),t&&"LI"==t.tagName){var n=this.getParent(),i=$(n).closest("ol, ul"),r=i[0].tagName,o=this.getBlocks();$.each(o,function(e,t){if("LI"==t.tagName){var n=$(t).prev();if(0!=n.size()&&"LI"==n[0].tagName){var i=n.children("ul, ol");0==i.size()?n.append($("<"+r+">").append(t)):i.append(t)}}})}else if(t===!1&&this.opts.linebreaks===!0){this.exec("formatBlock","blockquote");var s=this.getBlock(),t=$('<div data-tagblock="">').html($(s).html());$(s).replaceWith(t);var a=this.normalize($(t).css("margin-left"))+this.opts.indentValue;$(t).css("margin-left",a+"px")}else{var l=this.getBlocks();$.each(l,$.proxy(function(e,t){var n=!1;if("TD"!==t.tagName){n=-1!==$.inArray(t.tagName,this.opts.alignmentTags)?$(t):$(t).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var i=this.normalize(n.css("margin-left"))+this.opts.indentValue;n.css("margin-left",i+"px")}},this))}this.selectionRestore()}else{this.selectionSave();var t=this.getBlock();if(t&&"LI"==t.tagName){var o=this.getBlocks(),c=0;this.insideOutdent(t,c,o)}else{var l=this.getBlocks();$.each(l,$.proxy(function(e,t){var n=!1;n=-1!==$.inArray(t.tagName,this.opts.alignmentTags)?$(t):$(t).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var i=this.normalize(n.css("margin-left"))-this.opts.indentValue;0>=i?this.opts.linebreaks===!0&&"undefined"!=typeof n.data("tagblock")?n.replaceWith(n.html()+"<br>"):(n.css("margin-left",""),this.removeEmptyAttr(n,"style")):n.css("margin-left",i+"px")},this))}this.selectionRestore()}this.sync()},insideOutdent:function(e,t,n){if(e&&"LI"==e.tagName){var i=$(e).parent().parent();0!=i.size()&&"LI"==i[0].tagName?i.after(e):"undefined"!=typeof n[t]?(e=n[t],t++,this.insideOutdent(e,t,n)):this.execCommand("insertunorderedlist")}},alignmentLeft:function(){this.alignmentSet("","JustifyLeft")},alignmentRight:function(){this.alignmentSet("right","JustifyRight")},alignmentCenter:function(){this.alignmentSet("center","JustifyCenter")},alignmentJustify:function(){this.alignmentSet("justify","JustifyFull")},alignmentSet:function(e,t){if(this.bufferSet(),this.oldIE())return this.document.execCommand(t,!1,!1),!0;this.selectionSave();var n=this.getBlock();if(!n&&this.opts.linebreaks){this.exec("formatblock","div");var i=this.getBlock(),n=$('<div data-tagblock="">').html($(i).html());$(i).replaceWith(n),$(n).css("text-align",e),this.removeEmptyAttr(n,"style"),""==e&&"undefined"!=typeof $(n).data("tagblock")&&$(n).replaceWith($(n).html())}else{var r=this.getBlocks();$.each(r,$.proxy(function(t,n){var i=!1;i=-1!==$.inArray(n.tagName,this.opts.alignmentTags)?$(n):$(n).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]),i&&(i.css("text-align",e),this.removeEmptyAttr(i,"style"))},this))}this.selectionRestore(),this.sync()},cleanEmpty:function(e){var t=this.placeholderStart(e);return t!==!1?t:(this.opts.linebreaks===!1&&(""===e?e=this.opts.emptyHtml:-1!==e.search(/^<hr\s?\/?>$/gi)&&(e="<hr>"+this.opts.emptyHtml)),e)},cleanConverters:function(e){return this.opts.convertDivs&&!this.opts.gallery&&(e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>")),this.opts.paragraphy&&(e=this.cleanParagraphy(e)),e},cleanConvertProtected:function(e){return this.opts.templateVars&&(e=e.replace(/\{\{(.*?)\}\}/gi,"<!-- template double $1 -->"),e=e.replace(/\{(.*?)\}/gi,"<!-- template $1 -->")),e=e.replace(/<script(.*?)>([\w\W]*?)<\/script>/gi,'<title type="text/javascript" style="display: none;" class="redactor-script-tag"$1>$2</title>'),e=e.replace(/<style(.*?)>([\w\W]*?)<\/style>/gi,'<section$1 style="display: none;" rel="redactor-style-tag">$2</section>'),e=e.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>'),e=this.opts.phpTags?e.replace(/<\?php([\w\W]*?)\?>/gi,'<section style="display: none;" rel="redactor-php-tag">$1</section>'):e.replace(/<\?php([\w\W]*?)\?>/gi,"")},cleanReConvertProtected:function(e){return this.opts.templateVars&&(e=e.replace(/<!-- template double (.*?) -->/gi,"{{$1}}"),e=e.replace(/<!-- template (.*?) -->/gi,"{$1}")),e=e.replace(/<title type="text\/javascript" style="display: none;" class="redactor-script-tag"(.*?)>([\w\W]*?)<\/title>/gi,'<script$1 type="text/javascript">$2</script>'),e=e.replace(/<section(.*?) style="display: none;" rel="redactor-style-tag">([\w\W]*?)<\/section>/gi,"<style$1>$2</style>"),e=e.replace(/<section(.*?)rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>"),this.opts.phpTags&&(e=e.replace(/<section style="display: none;" rel="redactor-php-tag">([\w\W]*?)<\/section>/gi,"<?php\r\n$1\r\n?>")),e},cleanRemoveSpaces:function(e,t){if(t!==!1){var t=[],n=e.match(/<(pre|style|script|title)(.*?)>([\w\W]*?)<\/(pre|style|script|title)>/gi);if(null===n&&(n=[]),this.opts.phpTags){var i=e.match(/<\?php([\w\W]*?)\?>/gi);i&&(n=$.merge(n,i))}n&&$.each(n,function(n,i){e=e.replace(i,"buffer_"+n),t.push(i)})}return e=e.replace(/\n/g," "),e=e.replace(/[\t]*/g,""),e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^[\s\n]*/g," "),e=e.replace(/[\s\n]*$/g," "),e=e.replace(/>\s{2,}</g,"> <"),e=this.cleanReplacer(e,t),e=e.replace(/\n\n/g,"\n")},cleanReplacer:function(e,t){return t===!1?e:($.each(t,function(t,n){e=e.replace("buffer_"+t,n)}),e)},cleanRemoveEmptyTags:function(e){e=e.replace(/[\u200B-\u200D\uFEFF]/g,"");var t=["<b>\\s*</b>","<b>&nbsp;</b>","<em>\\s*</em>"],n=["<pre></pre>","<blockquote>\\s*</blockquote>","<dd></dd>","<dt></dt>","<ul></ul>","<ol></ol>","<li></li>","<table></table>","<tr></tr>","<span>\\s*<span>","<span>&nbsp;<span>","<p>\\s*</p>","<p></p>","<p>&nbsp;</p>","<p>\\s*<br>\\s*</p>","<div>\\s*</div>","<div>\\s*<br>\\s*</div>"];n=this.opts.removeEmptyTags?n.concat(t):t;for(var i=n.length,r=0;i>r;++r)e=e.replace(new RegExp(n[r],"gi"),"");return e},cleanParagraphy:function(e){function t(t,n,i){return e.replace(new RegExp(t,n),i)}if(e=$.trim(e),this.opts.linebreaks===!0)return e;if(""===e||"<p></p>"===e)return this.opts.emptyHtml;if(e+="\n",this.opts.removeEmptyTags===!1)return e;var n=[],i=e.match(/<(table|div|pre|object)(.*?)>([\w\W]*?)<\/(table|div|pre|object)>/gi);i||(i=[]);var r=e.match(/<!--([\w\W]*?)-->/gi);if(r&&(i=$.merge(i,r)),this.opts.phpTags){var o=e.match(/<section(.*?)rel="redactor-php-tag">([\w\W]*?)<\/section>/gi);o&&(i=$.merge(i,o))}i&&$.each(i,function(t,i){n[t]=i,e=e.replace(i,"{replace"+t+"}\n")}),e=e.replace(/<br \/>\s*<br \/>/gi,"\n\n"),e=e.replace(/<br><br>/gi,"\n\n");var s="(comment|html|body|head|title|meta|style|script|link|iframe|table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)";e=t("(<"+s+"[^>]*>)","gi","\n$1"),e=t("(</"+s+">)","gi","$1\n\n"),e=t("\r\n","g","\n"),e=t("\r","g","\n"),e=t("/\n\n+/","g","\n\n");var a=e.split(new RegExp("\ns*\n","g"),-1);e="";for(var l in a)a.hasOwnProperty(l)&&(-1==a[l].search("{replace")?(a[l]=a[l].replace(/<p>\n\t?<\/p>/gi,""),a[l]=a[l].replace(/<p><\/p>/gi,""),""!=a[l]&&(e+="<p>"+a[l].replace(/^\n+|\n+$/g,"")+"</p>")):e+=a[l]);return e=t("<p><p>","gi","<p>"),e=t("</p></p>","gi","</p>"),e=t("<p>s?</p>","gi",""),e=t("<p>([^<]+)</(div|address|form)>","gi","<p>$1</p></$2>"),e=t("<p>(</?"+s+"[^>]*>)</p>","gi","$1"),e=t("<p>(<li.+?)</p>","gi","$1"),e=t("<p>s?(</?"+s+"[^>]*>)","gi","$1"),e=t("(</?"+s+"[^>]*>)s?</p>","gi","$1"),e=t("(</?"+s+"[^>]*>)s?<br />","gi","$1"),e=t("<br />(s*</?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)","gi","$1"),e=t("\n</p>","gi","</p>"),e=t("<li><p>","gi","<li>"),e=t("</p></li>","gi","</li>"),e=t("</li><p>","gi","</li>"),e=t("<p>	?\n?<p>","gi","<p>"),e=t("</dt><p>","gi","</dt>"),e=t("</dd><p>","gi","</dd>"),e=t("<br></p></blockquote>","gi","</blockquote>"),e=t("<p>	*</p>","gi",""),$.each(n,function(t,n){e=e.replace("{replace"+t+"}",n)}),$.trim(e)},cleanConvertInlineTags:function(e,t){var n="strong";"b"===this.opts.boldTag&&(n="b");var i="em";return"i"===this.opts.italicTag&&(i="i"),e=e.replace(/<span style="font-style: italic;">([\w\W]*?)<\/span>/gi,"<"+i+">$1</"+i+">"),e=e.replace(/<span style="font-weight: bold;">([\w\W]*?)<\/span>/gi,"<"+n+">$1</"+n+">"),e="strong"===this.opts.boldTag?e.replace(/<b>([\w\W]*?)<\/b>/gi,"<strong>$1</strong>"):e.replace(/<strong>([\w\W]*?)<\/strong>/gi,"<b>$1</b>"),e="em"===this.opts.italicTag?e.replace(/<i>([\w\W]*?)<\/i>/gi,"<em>$1</em>"):e.replace(/<em>([\w\W]*?)<\/em>/gi,"<i>$1</i>"),e=e.replace(/<span style="text-decoration: underline;">([\w\W]*?)<\/span>/gi,"<u>$1</u>"),e=t!==!0?e.replace(/<strike>([\w\W]*?)<\/strike>/gi,"<del>$1</del>"):e.replace(/<del>([\w\W]*?)<\/del>/gi,"<strike>$1</strike>")},cleanStripTags:function(e){if(""==e||"undefined"==typeof e)return e;var t=!1;this.opts.allowedTags!==!1&&(t=!0);var n=t===!0?this.opts.allowedTags:this.opts.deniedTags,i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e=e.replace(i,function(e,i){return t===!0?$.inArray(i.toLowerCase(),n)>"-1"?e:"":$.inArray(i.toLowerCase(),n)>"-1"?"":e}),e=this.cleanConvertInlineTags(e)},cleanSavePreCode:function(e,t){var n=e.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/gi);return null!==n&&$.each(n,$.proxy(function(n,i){var r=i.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/i);r[3]=r[3].replace(/&nbsp;/g," "),t!==!1&&(r[3]=this.cleanEncodeEntities(r[3])),r[3]=r[3].replace(/\$/g,"&#36;"),e=e.replace(i,"<"+r[1]+r[2]+">"+r[3]+"</"+r[1]+">")},this)),e},cleanEncodeEntities:function(e){return e=String(e).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},cleanUnverified:function(){var e=this.$editor.find("li, img, a, b, strong, sub, sup, i, em, u, small, strike, del, span, cite");e.filter('[style*="background-color: transparent;"][style*="line-height"]').css("background-color","").css("line-height",""),e.filter('[style*="background-color: transparent;"]').css("background-color",""),e.css("line-height",""),$.each(e,$.proxy(function(e,t){this.removeEmptyAttr(t,"style")},this));var t=this.$editor.find("b, strong, i, em, u, strike, del");t.css("font-size",""),$.each(t,$.proxy(function(e,t){this.removeEmptyAttr(t,"style")},this)),this.$editor.find('div[style="text-align: -webkit-auto;"]').contents().unwrap(),this.$editor.find("ul, ol, li").removeAttr("style")},cleanHtml:function(e){var t=0,n=e.length,i=0,r=null,o=null,s="",a="",l="";for(this.cleanlevel=0;n>t;t++){if(i=t,-1==e.substr(t).indexOf("<"))return a+=e.substr(t),this.cleanFinish(a);for(;n>i&&"<"!=e.charAt(i);)i++;for(t!=i&&(l=e.substr(t,i-t),l.match(/^\s{2,}$/g)||("\n"==a.charAt(a.length-1)?a+=this.cleanGetTabs():"\n"==l.charAt(0)&&(a+="\n"+this.cleanGetTabs(),l=l.replace(/^\s+/,"")),a+=l),l.match(/\n/)&&(a+="\n"+this.cleanGetTabs())),r=i;n>i&&">"!=e.charAt(i);)i++;s=e.substr(r,i-r),t=i;var c;if("!--"==s.substr(1,3)){if(!s.match(/--$/)){for(;"-->"!=e.substr(i,3);)i++;i+=2,s=e.substr(r,i-r),t=i}"\n"!=a.charAt(a.length-1)&&(a+="\n"),a+=this.cleanGetTabs(),a+=s+">\n"}else"!"==s[1]?a=this.placeTag(s+">",a):"?"==s[1]?a+=s+">\n":(c=s.match(/^<(script|style|pre)/i))?(c[1]=c[1].toLowerCase(),s=this.cleanTag(s),a=this.placeTag(s,a),o=String(e.substr(t+1)).toLowerCase().indexOf("</"+c[1]),o&&(l=e.substr(t+1,o),t+=o,a+=l)):(s=this.cleanTag(s),a=this.placeTag(s,a))}return this.cleanFinish(a)},cleanGetTabs:function(){for(var e="",t=0;t<this.cleanlevel;t++)e+="	";return e},cleanFinish:function(e){return e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^[\s\n]*/,""),e=e.replace(/[\s\n]*$/,""),e=e.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.cleanlevel=0,e},cleanTag:function(e){var t="";e=e.replace(/\n/g," "),e=e.replace(/\s{2,}/g," "),e=e.replace(/^\s+|\s+$/g," ");var n="";e.match(/\/$/)&&(n="/",e=e.replace(/\/+$/,""));
for(var i;i=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(e);)i[2]?t+=i[1].toLowerCase()+"="+i[2]:i[1]&&(t+=i[1].toLowerCase()),t+=" ",e=e.substr(i[0].length);return t.replace(/\s*$/,"")+n+">"},placeTag:function(e,t){var n=e.match(this.cleannewLevel);return(e.match(this.cleanlineBefore)||n)&&(t=t.replace(/\s*$/,""),t+="\n"),n&&"/"==e.charAt(1)&&this.cleanlevel--,"\n"==t.charAt(t.length-1)&&(t+=this.cleanGetTabs()),n&&"/"!=e.charAt(1)&&this.cleanlevel++,t+=e,(e.match(this.cleanlineAfter)||e.match(this.cleannewLevel))&&(t=t.replace(/ *$/,""),t+="\n"),t},formatEmpty:function(e){var t=$.trim(this.$editor.html());if(this.opts.linebreaks)""==t&&(e.preventDefault(),this.$editor.html(""),this.focus());else{t=t.replace(/<br\s?\/?>/i,"");var n=t.replace(/<p>\s?<\/p>/gi,"");if(""===t||""===n){e.preventDefault();var i=$(this.opts.emptyHtml).get(0);this.$editor.html(i),this.focus()}}this.sync()},formatBlocks:function(e){this.browser("mozilla")&&this.isFocused()&&this.$editor.focus(),this.bufferSet();var t=this.getBlocks();this.selectionSave(),$.each(t,$.proxy(function(t,n){if("LI"!==n.tagName){var i=$(n).parent();if("p"===e){if("P"===n.tagName&&0!=i.size()&&"BLOCKQUOTE"===i[0].tagName||"BLOCKQUOTE"===n.tagName)return void this.formatQuote();if(this.opts.linebreaks){if(!n||0!=n.tagName.search(/H[1-6]/))return;$(n).replaceWith(n.innerHTML+"<br>")}else this.formatBlock(e,n)}else this.formatBlock(e,n)}},this)),this.selectionRestore(),this.sync()},formatBlock:function(e,t){if(t===!1&&(t=this.getBlock()),t===!1&&this.opts.linebreaks===!0)return this.execCommand("formatblock",e),!0;var n="";if("pre"!==e?n=$(t).contents():(n=$(t).html(),""===$.trim(n)&&(n='<span id="selection-marker-1"></span>')),"PRE"===t.tagName&&(e="p"),this.opts.linebreaks===!0&&"p"===e)$(t).replaceWith($("<div>").append(n).html()+"<br>");else{var i=this.getParent(),r=$("<"+e+">").append(n);$(t).replaceWith(r),i&&"TD"==i.tagName&&$(r).wrapAll("<td>")}},formatChangeTag:function(e,t,n){n!==!1&&this.selectionSave();var i=$("<"+t+"/>");return $(e).replaceWith(function(){return i.append($(this).contents())}),n!==!1&&this.selectionRestore(),i},formatQuote:function(){if(this.browser("mozilla")&&this.isFocused()&&this.$editor.focus(),this.bufferSet(),this.opts.linebreaks===!1){this.selectionSave();var e=this.getBlocks(),t=!1,n=e.length;if(e){var i="",r="",o=!1,s=!0;if($.each(e,function(e,t){"P"!==t.tagName&&(s=!1)}),$.each(e,$.proxy(function(a,l){if("BLOCKQUOTE"===l.tagName)this.formatBlock("p",l,!1);else if("P"===l.tagName)if(t=$(l).parent(),"BLOCKQUOTE"==t[0].tagName){var c=$(t).children("p").size();1==c?$(t).replaceWith(l):c==n?(o="blockquote",i+=this.outerHtml(l)):(o="html",i+=this.outerHtml(l),0==a?($(l).addClass("redactor-replaced").empty(),r=this.outerHtml(l)):$(l).remove())}else s===!1||1==e.length?this.formatBlock("blockquote",l,!1):(o="paragraphs",i+=this.outerHtml(l));else"LI"!==l.tagName&&this.formatBlock("blockquote",l,!1)},this)),o)if("paragraphs"==o)$(e[0]).replaceWith("<blockquote>"+i+"</blockquote>"),$(e).remove();else if("blockquote"==o)$(t).replaceWith(i);else if("html"==o){var a=this.$editor.html().replace(r,"</blockquote>"+i+"<blockquote>");this.$editor.html(a),this.$editor.find("blockquote").each(function(){""==$.trim($(this).html())&&$(this).remove()})}}this.selectionRestore()}else{var l=this.getBlock();if("BLOCKQUOTE"===l.tagName){this.selectionSave();var a=$.trim($(l).html()),c=$.trim(this.getSelectionHtml());if(a=a.replace(/<span(.*?)id="selection-marker(.*?)<\/span>/gi,""),a==c)$(l).replaceWith($(l).html()+"<br>");else{this.inlineFormat("tmp");var u=this.$editor.find("tmp");u.empty();var h=this.$editor.html().replace("<tmp></tmp>",'</blockquote><span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"+c+"<blockquote>");this.$editor.html(h),u.remove(),this.$editor.find("blockquote").each(function(){""==$.trim($(this).html())&&$(this).remove()})}this.selectionRestore(),this.$editor.find("span#selection-marker-1").attr("id",!1)}else{var d=this.selectionWrap("blockquote"),a=$(d).html(),p=["ul","ol","table","tr","tbody","thead","tfoot","dl"];$.each(p,function(e,t){a=a.replace(new RegExp("<"+t+"(.*?)>","gi"),""),a=a.replace(new RegExp("</"+t+">","gi"),"")});var f=this.opts.blockLevelElements;$.each(f,function(e,t){a=a.replace(new RegExp("<"+t+"(.*?)>","gi"),""),a=a.replace(new RegExp("</"+t+">","gi"),"<br>")}),$(d).html(a),this.selectionElement(d);var m=$(d).next();0!=m.size()&&"BR"===m[0].tagName&&m.remove()}}this.sync()},blockRemoveAttr:function(e){var t=this.getBlocks();$(t).removeAttr(e),this.sync()},blockSetAttr:function(e,t){var n=this.getBlocks();$(n).attr(e,t),this.sync()},blockRemoveStyle:function(e){var t=this.getBlocks();$(t).css(e,""),this.removeEmptyAttr(t,"style"),this.sync()},blockSetStyle:function(e,t){var n=this.getBlocks();$(n).css(e,t),this.sync()},blockRemoveClass:function(e){var t=this.getBlocks();$(t).removeClass(e),this.removeEmptyAttr(t,"class"),this.sync()},blockSetClass:function(e){var t=this.getBlocks();$(t).addClass(e),this.sync()},inlineRemoveClass:function(e){this.selectionSave(),this.inlineEachNodes(function(t){$(t).removeClass(e),this.removeEmptyAttr(t,"class")}),this.selectionRestore(),this.sync()},inlineSetClass:function(e){var t=this.getCurrent();$(t).hasClass(e)||this.inlineMethods("addClass",e)},inlineRemoveStyle:function(e){this.selectionSave(),this.inlineEachNodes(function(t){$(t).css(e,""),this.removeEmptyAttr(t,"style")}),this.selectionRestore(),this.sync()},inlineSetStyle:function(e,t){this.inlineMethods("css",e,t)},inlineRemoveAttr:function(e){this.selectionSave();var t=this.getRange(),n=this.getElement(),i=this.getNodes();(t.collapsed||t.startContainer===t.endContainer&&n)&&(i=$(n)),$(i).removeAttr(e),this.inlineUnwrapSpan(),this.selectionRestore(),this.sync()},inlineSetAttr:function(e,t){this.inlineMethods("attr",e,t)},inlineMethods:function(e,t,n){this.bufferSet(),this.selectionSave();var i=this.getRange(),r=this.getElement();if(!i.collapsed&&i.startContainer!==i.endContainer||!r||this.nodeTestBlocks(r)){var o,s=n;switch(t){case"font-size":o="fontSize",s=4;break;case"font-family":o="fontName";break;case"color":o="foreColor";break;case"background-color":o="backColor"}this.document.execCommand(o,!1,s);var a=this.$editor.find("font");$.each(a,$.proxy(function(i,r){this.inlineSetMethods(e,r,t,n)},this))}else $(r)[e](t,n);this.selectionRestore(),this.sync()},inlineSetMethods:function(e,t,n,i){var r,o=$(t).parent(),s=this.getSelectionText(),a=$(o).text(),l=s==a;return l&&o&&"INLINE"===o[0].tagName&&0!=o[0].attributes.length?(r=o,$(t).replaceWith($(t).html())):(r=$("<inline>").append($(t).contents()),$(t).replaceWith(r)),$(r)[e](n,i),r},inlineEachNodes:function(e){var t,n=this.getRange(),i=this.getElement(),r=this.getNodes();(n.collapsed||n.startContainer===n.endContainer&&i)&&(r=$(i),t=!0),$.each(r,$.proxy(function(n,i){if(!t&&"INLINE"!==i.tagName){var r=this.getSelectionText(),o=$(i).parent().text(),s=r==o;if(!s||"INLINE"!==i.parentNode.tagName||$(i.parentNode).hasClass("redactor_editor"))return;i=i.parentNode}e.call(this,i)},this))},inlineUnwrapSpan:function(){var e=this.$editor.find("inline");$.each(e,$.proxy(function(e,t){var n=$(t);void 0===n.attr("class")&&void 0===n.attr("style")&&n.contents().unwrap()},this))},inlineFormat:function(e){this.selectionSave(),this.document.execCommand("fontSize",!1,4);var t,n=this.$editor.find("font");$.each(n,function(n,i){var r=$("<"+e+"/>").append($(i).contents());$(i).replaceWith(r),t=r}),this.selectionRestore(),this.sync()},inlineRemoveFormat:function(e){this.selectionSave();var t=e.toUpperCase(),n=this.getNodes(),i=$(this.getParent()).parent();$.each(n,function(e,n){n.tagName===t&&this.inlineRemoveFormatReplace(n)}),i&&i[0].tagName===t&&this.inlineRemoveFormatReplace(i),this.selectionRestore(),this.sync()},inlineRemoveFormatReplace:function(e){$(e).replaceWith($(e).contents())},insertHtml:function(e,t){var n=this.getCurrent(),i=n.parentNode;this.focusWithSaveScroll(),this.bufferSet();var r=$("<div>").append($.parseHTML(e));e=r.html(),e=this.cleanRemoveEmptyTags(e),r=$("<div>").append($.parseHTML(e));var o=this.getBlock();if(1==r.contents().length){var s=r.contents()[0].tagName;("P"!=s&&s==o.tagName||"PRE"==s)&&(r=$("<div>").append(e))}this.opts.linebreaks&&(e=e.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi,"$2<br>")),!this.opts.linebreaks&&1==r.contents().length&&3==r.contents()[0].nodeType&&(this.getRangeSelectedNodes().length>2||!n||"BODY"==n.tagName&&!i||"HTML"==i.tagName)&&(e="<p>"+e+"</p>"),e=this.setSpansVerifiedHtml(e),r.contents().length>1&&o||r.contents().is("p, :header, ul, ol, li, div, table, td, blockquote, pre, address, section, header, footer, aside, article")?this.browser("msie")?this.isIe11()?this.execPasteFrag(e):this.document.selection.createRange().pasteHTML(e):this.document.execCommand("inserthtml",!1,e):this.insertHtmlAdvanced(e,!1),this.selectall&&this.window.setTimeout($.proxy(function(){this.opts.linebreaks?this.focusEnd():this.selectionEnd(this.$editor.contents().last())},this),1),this.observeStart(),this.setNonEditable(),t!==!1&&this.sync()},insertHtmlAdvanced:function(e,t){e=this.setSpansVerifiedHtml(e);var n=this.getSelection();if(n.getRangeAt&&n.rangeCount){var i=n.getRangeAt(0);i.deleteContents();var r=document.createElement("div");r.innerHTML=e;for(var o,s,a=document.createDocumentFragment();o=r.firstChild;)s=a.appendChild(o);i.insertNode(a),s&&(i=i.cloneRange(),i.setStartAfter(s),i.collapse(!0),n.removeAllRanges(),n.addRange(i))}t!==!1&&this.sync()},insertBeforeCursor:function(e){e=this.setSpansVerifiedHtml(e);var t=$(e),n=document.createElement("span");n.innerHTML="​";var i=this.getRange();i.insertNode(n),i.insertNode(t[0]),i.collapse(!1);var r=this.getSelection();r.removeAllRanges(),r.addRange(i),this.sync()},insertText:function(e){var t=$($.parseHTML(e));t.length&&(e=t.text()),this.focusWithSaveScroll(),this.browser("msie")?this.isIe11()?this.execPasteFrag(e):this.document.selection.createRange().pasteHTML(e):this.document.execCommand("inserthtml",!1,e),this.sync()},insertNode:function(e){if(e=e[0]||e,"SPAN"==e.tagName){var t="inline",n=e.outerHTML,i=new RegExp("<"+e.tagName,"i"),r=n.replace(i,"<"+t);i=new RegExp("</"+e.tagName,"i"),r=r.replace(i,"</"+t),e=$(r)[0]}var o=this.getSelection();return o.getRangeAt&&o.rangeCount&&(range=o.getRangeAt(0),range.deleteContents(),range.insertNode(e),range.setEndAfter(e),range.setStartAfter(e),o.removeAllRanges(),o.addRange(range)),e},insertNodeToCaretPositionFromPoint:function(e,t){var n,i=e.clientX,r=e.clientY;if(this.document.caretPositionFromPoint){var o=this.document.caretPositionFromPoint(i,r);n=this.getRange(),n.setStart(o.offsetNode,o.offset),n.collapse(!0),n.insertNode(t)}else if(this.document.caretRangeFromPoint)n=this.document.caretRangeFromPoint(i,r),n.insertNode(t);else if("undefined"!=typeof document.body.createTextRange){n=this.document.body.createTextRange(),n.moveToPoint(i,r);var s=n.duplicate();s.moveToPoint(i,r),n.setEndPoint("EndToEnd",s),n.select()}},insertAfterLastElement:function(e,t){if("undefined"!=typeof t&&(e=t),this.isEndOfElement()){if(this.opts.linebreaks){var n=$("<div>").append($.trim(this.$editor.html())).contents(),i=n.last()[0];if("SPAN"==i.tagName&&""==i.innerHTML&&(i=n.prev()[0]),this.outerHtml(i)!=this.outerHtml(e))return!1}else if(this.$editor.contents().last()[0]!==e)return!1;this.insertingAfterLastElement(e)}},insertingAfterLastElement:function(e){if(this.bufferSet(),this.opts.linebreaks===!1){var t=$(this.opts.emptyHtml);$(e).after(t),this.selectionStart(t)}else{var t=$('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>",this.document)[0];$(e).after(t),$(t).after(this.opts.invisibleSpace),this.selectionRestore(),this.$editor.find("span#selection-marker-1").removeAttr("id")}},insertLineBreak:function(e){this.selectionSave();var t="<br>";if(1==e&&(t="<br><br>"),this.browser("mozilla")){var n=$("<span>").html(this.opts.invisibleSpace);this.$editor.find("#selection-marker-1").before(t).before(n).before(this.opts.invisibleSpace),this.setCaretAfter(n[0]),n.remove(),this.selectionRemoveMarkers()}else{var i=this.getParent();if(i&&"A"===i.tagName){var r=this.getCaretOffset(i),o=$.trim($(i).text()).replace(/\n\r\n/g,""),s=o.length;if(r==s){this.selectionRemoveMarkers();var a=$('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>",this.document)[0];return $(i).after(a),$(a).before(t+(this.browser("webkit")?this.opts.invisibleSpace:"")),this.selectionRestore(),!0}}this.$editor.find("#selection-marker-1").before(t+(this.browser("webkit")?this.opts.invisibleSpace:"")),this.selectionRestore()}},insertDoubleLineBreak:function(){this.insertLineBreak(!0)},replaceLineBreak:function(e){var t=$("<br>"+this.opts.invisibleSpace);$(e).replaceWith(t),this.selectionStart(t)},pasteClean:function(e){if(e=this.callback("pasteBefore",!1,e),this.browser("msie")){var t=$.trim(e);0==t.search(/^<a(.*?)>(.*?)<\/a>$/i)&&(e=e.replace(/^<a(.*?)>(.*?)<\/a>$/i,"$2"))}if(this.opts.pastePlainText){var t=this.document.createElement("div");return e=e.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi,"\n"),t.innerHTML=e,e=t.textContent||t.innerText,e=$.trim(e),e=e.replace("\n","<br>"),e=this.cleanParagraphy(e),this.pasteInsert(e),!1}var n=!1;if(this.currentOrParentIs("TD")){n=!0;var i=this.opts.blockLevelElements;i.push("tr"),i.push("table"),$.each(i,function(t,n){e=e.replace(new RegExp("<"+n+"(.*?)>","gi"),""),e=e.replace(new RegExp("</"+n+">","gi"),"<br>")})}if(this.currentOrParentIs("PRE"))return e=this.pastePre(e),this.pasteInsert(e),!0;if(e=e.replace(/<img(.*?)v:shapes=(.*?)>/gi,""),e=e.replace(/<p(.*?)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi,"<ul><li$2</li>"),e=e.replace(/<p(.*?)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi,"<li$2</li>"),e=e.replace(/<p(.*?)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi,"<li$2</li></ul>"),e=e.replace(/<p(.*?)class="MsoListParagraph"([\w\W]*?)<\/p>/gi,"<ul><li$2</li></ul>"),e=e.replace(/·/g,""),e=e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,""),this.opts.cleanSpaces===!0&&(e=e.replace(/(&nbsp;){2,}/gi,"&nbsp;"),e=e.replace(/&nbsp;/gi," ")),e=e.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),e=e.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),e=e.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi,'<span style="font-weight: bold;"><span style="font-style: italic;">'),e=e.replace(/<span[^>]*font-style: italic[^>]*>/gi,'<span style="font-style: italic;">'),e=e.replace(/<span[^>]*font-weight: bold[^>]*>/gi,'<span style="font-weight: bold;">'),e=e.replace(/<span[^>]*text-decoration: underline[^>]*>/gi,'<span style="text-decoration: underline;">'),e=e.replace(/<td>\u200b*<\/td>/gi,"[td]"),e=e.replace(/<td>&nbsp;<\/td>/gi,"[td]"),e=e.replace(/<td><br><\/td>/gi,"[td]"),e=e.replace(/<td(.*?)colspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi,'[td colspan="$2"]$4[/td]'),e=e.replace(/<td(.*?)rowspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi,'[td rowspan="$2"]$4[/td]'),e=e.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),e=e.replace(/<iframe(.*?)>([\w\W]*?)<\/iframe>/gi,"[iframe$1]$2[/iframe]"),e=e.replace(/<video(.*?)>([\w\W]*?)<\/video>/gi,"[video$1]$2[/video]"),e=e.replace(/<audio(.*?)>([\w\W]*?)<\/audio>/gi,"[audio$1]$2[/audio]"),e=e.replace(/<embed(.*?)>([\w\W]*?)<\/embed>/gi,"[embed$1]$2[/embed]"),e=e.replace(/<object(.*?)>([\w\W]*?)<\/object>/gi,"[object$1]$2[/object]"),e=e.replace(/<param(.*?)>/gi,"[param$1]"),e=e.replace(/<img(.*?)>/gi,"[img$1]"),e=e.replace(/ class="(.*?)"/gi,""),e=e.replace(/<(\w+)([\w\W]*?)>/gi,"<$1>"),this.opts.linebreaks?(e=e.replace(/<strong><\/strong>/gi,""),e=e.replace(/<u><\/u>/gi,""),this.opts.cleanFontTag&&(e=e.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi,"$2")),e=e.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,"<br>")):e=e.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),e=e.replace(/<div>\s*?\t*?\n*?(<ul>|<ol>|<p>)/gi,"$1"),e=e.replace(/\[td colspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi,'<td colspan="$1">$2</td>'),e=e.replace(/\[td rowspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi,'<td rowspan="$1">$2</td>'),e=e.replace(/\[td\]/gi,"<td>&nbsp;</td>"),e=e.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),e=e.replace(/\[iframe(.*?)\]([\w\W]*?)\[\/iframe\]/gi,"<iframe$1>$2</iframe>"),e=e.replace(/\[video(.*?)\]([\w\W]*?)\[\/video\]/gi,"<video$1>$2</video>"),e=e.replace(/\[audio(.*?)\]([\w\W]*?)\[\/audio\]/gi,"<audio$1>$2</audio>"),e=e.replace(/\[embed(.*?)\]([\w\W]*?)\[\/embed\]/gi,"<embed$1>$2</embed>"),e=e.replace(/\[object(.*?)\]([\w\W]*?)\[\/object\]/gi,"<object$1>$2</object>"),e=e.replace(/\[param(.*?)\]/gi,"<param$1>"),e=e.replace(/\[img(.*?)\]/gi,"<img$1>"),this.opts.convertDivs?(e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>"),e=e.replace(/<\/div><p>/gi,"<p>"),e=e.replace(/<\/p><\/div>/gi,"</p>"),e=e.replace(/<p><\/p>/gi,"<br />")):e=e.replace(/<div><\/div>/gi,"<br />"),e=this.cleanStripTags(e),this.currentOrParentIs("LI")?e=e.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br>"):n===!1&&(e=this.cleanParagraphy(e)),e=e.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi,"$2"),e=e.replace(/<img>/gi,""),e=e.replace(/<[^\/>][^>][^img|param|source|td][^<]*>(\s*|\t*|\n*| |<br>)<\/[^>]+>/gi,""),e=e.replace(/\n{3,}/gi,"\n"),e=e.replace(/<p><p>/gi,"<p>"),e=e.replace(/<\/p><\/p>/gi,"</p>"),e=e.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),e=e.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),this.opts.linebreaks===!0&&(e=e.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi,"$2<br>")),e=e.replace(/<[^\/>][^>][^img|param|source|td][^<]*>(\s*|\t*|\n*| |<br>)<\/[^>]+>/gi,""),e=e.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi,""),e=e.replace(/<td(.*?)>(\s*|\t*|\n*)<p>([\w\W]*?)<\/p>(\s*|\t*|\n*)<\/td>/gi,"<td$1>$3</td>"),this.opts.convertDivs&&(e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2"),e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2")),this.pasteClipboardMozilla=!1,this.browser("mozilla")){if(this.opts.clipboardUpload){var r=e.match(/<img src="data:image(.*?)"(.*?)>/gi);if(null!==r){this.pasteClipboardMozilla=r;for(k in r){var o=r[k].replace("<img",'<img data-mozilla-paste-image="'+k+'" ');e=e.replace(r[k],o)}}}for(;/<br>$/gi.test(e);)e=e.replace(/<br>$/gi,"")}if(e=e.replace(/<p>•([\w\W]*?)<\/p>/gi,"<li>$1</li>"),this.browser("msie"))for(;/<font>([\w\W]*?)<\/font>/gi.test(e);)e=e.replace(/<font>([\w\W]*?)<\/font>/gi,"$1");n===!1&&(e=e.replace(/<td(.*?)>([\w\W]*?)<p(.*?)>([\w\W]*?)<\/td>/gi,"<td$1>$2$4</td>"),e=e.replace(/<td(.*?)>([\w\W]*?)<\/p>([\w\W]*?)<\/td>/gi,"<td$1>$2$3</td>"),e=e.replace(/<td(.*?)>([\w\W]*?)<p(.*?)>([\w\W]*?)<\/td>/gi,"<td$1>$2$4</td>"),e=e.replace(/<td(.*?)>([\w\W]*?)<\/p>([\w\W]*?)<\/td>/gi,"<td$1>$2$3</td>")),e=e.replace(/\n/g," "),e=e.replace(/<p>\n?<li>/gi,"<li>"),this.pasteInsert(e)},pastePre:function(e){e=e.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi,"\n");var t=this.document.createElement("div");return t.innerHTML=e,this.cleanEncodeEntities(t.textContent||t.innerText)},pasteInsert:function(e){e=this.callback("pasteAfter",!1,e),this.selectall?(this.$editor.html(e),this.selectionRemove(),this.focusEnd(),this.sync()):this.insertHtml(e),this.selectall=!1,setTimeout($.proxy(function(){this.rtePaste=!1,this.browser("mozilla")&&this.$editor.find("p:empty").remove(),this.pasteClipboardMozilla!==!1&&this.pasteClipboardUploadMozilla()},this),100),this.opts.autoresize&&this.fullscreen!==!0?$(this.document.body).scrollTop(this.saveScroll):this.$editor.scrollTop(this.saveScroll)},pasteClipboardAppendFields:function(e){return this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&$.each(this.opts.uploadFields,$.proxy(function(t,n){null!=n&&0===n.toString().indexOf("#")&&(n=$(n).val()),e[t]=n},this)),e},pasteClipboardUploadMozilla:function(){var e=this.$editor.find("img[data-mozilla-paste-image]");$.each(e,$.proxy(function(e,t){var n=$(t),i=t.src.split(","),r={contentType:i[0].split(";")[0].split(":")[1],data:i[1]};r=this.pasteClipboardAppendFields(r),$.post(this.opts.clipboardUploadUrl,r,$.proxy(function(e){var t="string"==typeof e?$.parseJSON(e):e;n.attr("src",t.filelink),n.removeAttr("data-mozilla-paste-image"),this.sync(),this.callback("imageUpload",n,t)},this))},this))},pasteClipboardUpload:function(e){var t=e.target.result,n=t.split(","),i={contentType:n[0].split(";")[0].split(":")[1],data:n[1]};this.opts.clipboardUpload?(i=this.pasteClipboardAppendFields(i),$.post(this.opts.clipboardUploadUrl,i,$.proxy(function(e){var t="string"==typeof e?$.parseJSON(e):e,n='<img src="'+t.filelink+'" id="clipboard-image-marker" />';this.execCommand("inserthtml",n,!1);var i=$(this.$editor.find("img#clipboard-image-marker"));i.length?i.removeAttr("id"):i=!1,this.sync(),i&&this.callback("imageUpload",i,t)},this))):this.insertHtml('<img src="'+t+'" />')},bufferSet:function(e){e!==!1&&this.selectionSave(),this.opts.buffer.push(this.$editor.html()),e!==!1&&this.selectionRemoveMarkers("buffer")},bufferUndo:function(){return 0===this.opts.buffer.length?void this.focusWithSaveScroll():(this.selectionSave(),this.opts.rebuffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.buffer.pop()),this.selectionRestore(),void setTimeout($.proxy(this.observeStart,this),100))},bufferRedo:function(){return 0===this.opts.rebuffer.length?(this.focusWithSaveScroll(),!1):(this.selectionSave(),this.opts.buffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.rebuffer.pop()),this.selectionRestore(!0),void setTimeout($.proxy(this.observeStart,this),4))},observeStart:function(){this.observeImages(),this.opts.observeLinks&&this.observeLinks()},observeLinks:function(){this.$editor.find("a").on("click",$.proxy(this.linkObserver,this)),this.$editor.on("click.redactor",$.proxy(function(e){this.linkObserverTooltipClose(e)},this)),$(document).on("click.redactor",$.proxy(function(e){this.linkObserverTooltipClose(e)},this))},observeImages:function(){return this.opts.observeImages===!1?!1:(this.$editor.find("img").each($.proxy(function(e,t){this.browser("msie")&&$(t).attr("unselectable","on");var n=$(t).parent();n.hasClass("royalSlider")||n.hasClass("fotorama")||this.imageResize(t)},this)),void this.$editor.find(".fotorama, .royalSlider").on("click",$.proxy(this.editGallery,this)))},linkObserver:function(e){var t=$(e.target),n=$(e.target).parent();if(!n.hasClass("royalSlider")&&!n.hasClass("fotorama")&&0!=t.size()&&"A"===t[0].tagName){var i=t.offset();if(this.opts.iframe){var r=this.$frame.offset();i.top=r.top+(i.top-$(this.document).scrollTop()),i.left+=r.left}var o=$('<span class="redactor-link-tooltip"></span>'),s=t.attr("href");void 0===s&&(s=""),s.length>24&&(s=s.substring(0,24)+"...");var a=$('<a href="'+t.attr("href")+'" target="_blank">'+s+"</a>").on("click",$.proxy(function(){this.linkObserverTooltipClose(!1)},this)),l=$('<a href="#">'+this.opts.curLang.edit+"</a>").on("click",$.proxy(function(e){e.preventDefault(),this.linkShow(),this.linkObserverTooltipClose(!1)},this)),c=$('<a href="#">'+this.opts.curLang.unlink+"</a>").on("click",$.proxy(function(e){e.preventDefault(),this.execCommand("unlink"),this.linkObserverTooltipClose(!1)},this));o.append(a),o.append(" | "),o.append(l),o.append(" | "),o.append(c),o.css({top:i.top+20+"px",left:i.left+"px"}),$(".redactor-link-tooltip").remove(),$("body").append(o)}},linkObserverTooltipClose:function(e){return e!==!1&&"A"==e.target.tagName?!1:void $(".redactor-link-tooltip").remove()},getSelection:function(){return this.opts.rangy?this.opts.iframe?rangy.getSelection(this.$frame[0]):rangy.getSelection():this.document.getSelection()},getRange:function(){if(this.opts.rangy)return this.opts.iframe?rangy.createRange(this.iframeDoc()):rangy.createRange();if(this.document.getSelection){var e=this.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}return this.document.createRange()},selectionElement:function(e){this.setCaret(e)},selectionStart:function(e){this.selectionSet(e[0]||e,0,null,0)},selectionEnd:function(e){this.selectionSet(e[0]||e,1,null,1)},selectionSet:function(e,t,n,i){null==n&&(n=e),null==i&&(i=t);var r=this.getSelection();if(r){if("P"==e.tagName&&""==e.innerHTML&&(e.innerHTML=this.opts.invisibleSpace),"BR"==e.tagName&&this.opts.linebreaks===!1){var o=$(this.opts.emptyHtml)[0];$(e).replaceWith(o),e=o,n=e}var s=this.getRange();s.setStart(e,t),s.setEnd(n,i);try{r.removeAllRanges()}catch(a){}r.addRange(s)}},selectionWrap:function(e){e=e.toLowerCase();var t=this.getBlock();if(t){var n=this.formatChangeTag(t,e);return this.sync(),n}var i=this.getSelection(),r=i.getRangeAt(0),n=document.createElement(e);return n.appendChild(r.extractContents()),r.insertNode(n),this.selectionElement(n),n},selectionAll:function(){var e=this.getRange();e.selectNodeContents(this.$editor[0]);var t=this.getSelection();t.removeAllRanges(),t.addRange(e)},selectionRemove:function(){this.getSelection().removeAllRanges()},getCaretOffset:function(e){var t=0,n=this.getRange(),i=n.cloneRange();return i.selectNodeContents(e),i.setEnd(n.endContainer,n.endOffset),t=$.trim(i.toString()).length},getCaretOffsetRange:function(){return new Range(this.getSelection().getRangeAt(0))},setCaret:function(e,t,n){"undefined"==typeof n&&(n=t),e=e[0]||e;var i=this.getRange();i.selectNodeContents(e);var r,o=this.getTextNodesIn(e),s=!1,a=0;if(1==o.length&&t)i.setStart(o[0],t),i.setEnd(o[0],n);else for(var l,c=0;l=o[c++];){if(r=a+l.length,!s&&t>=a&&(r>t||t==r&&c<o.length)&&(i.setStart(l,t-a),s=!0),s&&r>=n){i.setEnd(l,n-a);break}a=r}var u=this.getSelection();u.removeAllRanges(),u.addRange(i)},setCaretAfter:function(e){this.$editor.focus(),e=e[0]||e;var t=this.document.createRange(),n=1,i=-1;t.setStart(e,n),t.setEnd(e,i+2);var r=this.window.getSelection(),o=this.document.createRange(),s=this.document.createTextNode("​");$(e).after(s),o.setStartAfter(s),r.removeAllRanges(),r.addRange(o),$(s).remove()},getTextNodesIn:function(e){var t=[];if(3==e.nodeType)t.push(e);else for(var n=e.childNodes,i=0,r=n.length;r>i;++i)t.push.apply(t,this.getTextNodesIn(n[i]));return t},getCurrent:function(){var e=!1,t=this.getSelection();return t&&t.rangeCount>0&&(e=t.getRangeAt(0).startContainer),this.isParentRedactor(e)},getParent:function(e){return e=e||this.getCurrent(),e?this.isParentRedactor($(e).parent()[0]):!1},getBlock:function(e){for("undefined"==typeof e&&(e=this.getCurrent());e;){if(this.nodeTestBlocks(e))return $(e).hasClass("redactor_editor")?!1:e;e=e.parentNode}return!1},getBlocks:function(e){var t=[];if("undefined"==typeof e){var n=this.getRange();if(n&&n.collapsed===!0)return[this.getBlock()];var e=this.getNodes(n)}return $.each(e,$.proxy(function(e,n){return this.opts.iframe===!1&&0==$(n).parents("div.redactor_editor").size()?!1:void(this.nodeTestBlocks(n)&&t.push(n))},this)),0===t.length&&(t=[this.getBlock()]),t},isInlineNode:function(e){return 1!=e.nodeType?!1:!this.rTestBlock.test(e.nodeName)},nodeTestBlocks:function(e){return 1==e.nodeType&&this.rTestBlock.test(e.nodeName)},tagTestBlock:function(e){return this.rTestBlock.test(e)},getNodes:function(e,t){if("undefined"==typeof e||0==e)var e=this.getRange();if(e&&e.collapsed===!0){if("undefined"==typeof t&&this.tagTestBlock(t)){var n=this.getBlock();return n.tagName==t?[n]:[]}return[this.getCurrent()]}var i=[],r=[],o=this.document.getSelection();if(o.isCollapsed||(i=this.getRangeSelectedNodes(o.getRangeAt(0))),$.each(i,$.proxy(function(e,n){return this.opts.iframe===!1&&0==$(n).parents("div.redactor_editor").size()?!1:void("undefined"==typeof t?""!=$.trim(n.textContent)&&r.push(n):n.tagName==t&&r.push(n))},this)),0==r.length){if("undefined"==typeof t&&this.tagTestBlock(t)){var n=this.getBlock();return n.tagName==t?r.push(n):[]}r.push(this.getCurrent())}var s=r[r.length-1];return this.nodeTestBlocks(s)&&(r=r.slice(0,-1)),r},getElement:function(e){for(e||(e=this.getCurrent());e;){if(1==e.nodeType)return $(e).hasClass("redactor_editor")?!1:e;e=e.parentNode}return!1},getRangeSelectedNodes:function(e){e=e||this.getRange();var t=e.startContainer,n=e.endContainer;if(t==n)return[t];for(var i=[];t&&t!=n;)i.push(t=this.nextNode(t));for(t=e.startContainer;t&&t!=e.commonAncestorContainer;)i.unshift(t),t=t.parentNode;return i},nextNode:function(e){if(e.hasChildNodes())return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null},getSelectionText:function(){return this.getSelection().toString()},getSelectionHtml:function(){var e="",t=this.getSelection();if(t.rangeCount){for(var n=this.document.createElement("div"),i=t.rangeCount,r=0;i>r;++r)n.appendChild(t.getRangeAt(r).cloneContents());e=n.innerHTML}return this.syncClean(e)},selectionSave:function(){this.isFocused()||this.focusWithSaveScroll(),this.opts.rangy?this.savedSel=rangy.saveSelection():this.selectionCreateMarker(this.getRange())},selectionCreateMarker:function(e){if(e){var t=$('<span id="selection-marker-1" class="redactor-selection-marker">'+this.opts.invisibleSpace+"</span>",this.document)[0],n=$('<span id="selection-marker-2" class="redactor-selection-marker">'+this.opts.invisibleSpace+"</span>",this.document)[0];e.collapsed===!0?this.selectionSetMarker(e,t,!0):(this.selectionSetMarker(e,t,!0),this.selectionSetMarker(e,n,!1)),this.savedSel=this.$editor.html(),this.selectionRestore(!1,!1)}},selectionSetMarker:function(e,t,n){var i=e.cloneRange();try{i.collapse(n),i.insertNode(t),i.detach()}catch(r){var o=this.opts.emptyHtml;this.opts.linebreaks&&(o="<br>"),this.$editor.prepend(o),this.focus()}},selectionRestore:function(e,t){if(this.opts.rangy)rangy.restoreSelection(this.savedSel);else{e===!0&&this.savedSel&&this.$editor.html(this.savedSel);var n=this.$editor.find("span#selection-marker-1"),i=this.$editor.find("span#selection-marker-2");this.browser("mozilla")?this.$editor.focus():this.isFocused()||this.focusWithSaveScroll(),0!=n.length&&0!=i.length?this.selectionSet(n[0],0,i[0],0):0!=n.length&&this.selectionSet(n[0],0,null,0),t!==!1&&(this.selectionRemoveMarkers(),this.savedSel=!1)}},selectionRemoveMarkers:function(){this.opts.rangy?rangy.removeMarkers(this.savedSel):$.each(this.$editor.find("span.redactor-selection-marker"),function(){var e=$.trim($(this).html().replace(/[^\u0000-\u1C7F]/g,""));""==e?$(this).remove():$(this).removeAttr("class").removeAttr("id")})},tableShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.table,this.opts.modal_table,300,$.proxy(function(){$("#redactor_insert_table_btn").click($.proxy(this.tableInsert,this)),setTimeout(function(){$("#redactor_table_rows").focus()},200)},this))},tableInsert:function(){this.bufferSet(!1);var e,t,n,i,r=$("#redactor_table_rows").val(),o=$("#redactor_table_columns").val(),s=$("<div></div>"),a=Math.floor(99999*Math.random()),l=$('<table id="table'+a+'"><tbody></tbody></table>');for(e=0;r>e;e++){for(t=$("<tr></tr>"),n=0;o>n;n++)i=$("<td>"+this.opts.invisibleSpace+"</td>"),0===e&&0===n&&i.append('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"),$(t).append(i);l.append(t)}s.append(l);var c=s.html();this.opts.linebreaks===!1&&this.browser("mozilla")&&(c+="<p>"+this.opts.invisibleSpace+"</p>"),this.modalClose(),this.selectionRestore();var u=this.getBlock()||this.getCurrent();if(u&&"BODY"!=u.tagName){if("LI"==u.tagName)var u=$(u).closest("ul, ol");$(u).after(c)}else this.insertHtmlAdvanced(c,!1);this.selectionRestore();var h=this.$editor.find("#table"+a);this.buttonActiveObserver(),h.find("span#selection-marker-1, inline#selection-marker-1").remove(),h.removeAttr("id"),this.sync()},tableDeleteTable:function(){var e=$(this.getParent()).closest("table");return this.isParentRedactor(e)?0==e.size()?!1:(this.bufferSet(),e.remove(),void this.sync()):!1},tableDeleteRow:function(){var e=this.getParent(),t=$(e).closest("table");if(!this.isParentRedactor(t))return!1;if(0==t.size())return!1;this.bufferSet();var n=$(e).closest("tr"),i=n.prev().length?n.prev():n.next();if(i.length){var r=i.children("td").first();r.length&&r.prepend('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>")
}n.remove(),this.selectionRestore(),t.find("span#selection-marker-1").remove(),this.sync()},tableDeleteColumn:function(){var e=this.getParent(),t=$(e).closest("table");if(!this.isParentRedactor(t))return!1;if(0==t.size())return!1;this.bufferSet();var n=$(e).closest("td");n.is("td")||(n=n.closest("td"));var i=n.get(0).cellIndex;t.find("tr").each($.proxy(function(e,t){var n=0>i-1?i+1:i-1;0===e&&$(t).find("td").eq(n).prepend('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"),$(t).find("td").eq(i).remove()},this)),this.selectionRestore(),t.find("span#selection-marker-1").remove(),this.sync()},tableAddHead:function(){var e=$(this.getParent()).closest("table");if(!this.isParentRedactor(e))return!1;if(0==e.size())return!1;if(this.bufferSet(),0!==e.find("thead").size())this.tableDeleteHead();else{var t=e.find("tr").first().clone();t.find("td").html(this.opts.invisibleSpace),$thead=$("<thead></thead>"),$thead.append(t),e.prepend($thead),this.sync()}},tableDeleteHead:function(){var e=$(this.getParent()).closest("table");if(!this.isParentRedactor(e))return!1;var t=e.find("thead");return 0==t.size()?!1:(this.bufferSet(),t.remove(),void this.sync())},tableAddRowAbove:function(){this.tableAddRow("before")},tableAddRowBelow:function(){this.tableAddRow("after")},tableAddColumnLeft:function(){this.tableAddColumn("before")},tableAddColumnRight:function(){this.tableAddColumn("after")},tableAddRow:function(e){var t=$(this.getParent()).closest("table");if(!this.isParentRedactor(t))return!1;if(0==t.size())return!1;this.bufferSet();var n=$(this.getParent()).closest("tr"),i=n.clone();i.find("td").html(this.opts.invisibleSpace),"after"===e?n.after(i):n.before(i),this.sync()},tableAddColumn:function(e){var t=this.getParent(),n=$(t).closest("table");if(!this.isParentRedactor(n))return!1;if(0==n.size())return!1;this.bufferSet();var i=0,r=this.getCurrent(),o=$(r).closest("tr"),s=$(r).closest("td");o.find("td").each($.proxy(function(e,t){$(t)[0]===s[0]&&(i=e)},this)),n.find("tr").each($.proxy(function(t,n){var r=$(n).find("td").eq(i),o=r.clone();o.html(this.opts.invisibleSpace),"after"===e?r.after(o):r.before(o)},this)),this.sync()},videoShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.video,this.opts.modal_video,600,$.proxy(function(){$("#redactor_insert_video_btn").click($.proxy(this.videoInsert,this)),setTimeout(function(){$("#redactor_insert_video_area").focus()},200)},this))},videoInsert:function(){var e=$("#redactor_insert_video_area").val();e=this.cleanStripTags(e);var t='<iframe width="500" height="281" src="',n='" frameborder="0" allowfullscreen></iframe>';e.match(reUrlYoutube)?e=e.replace(reUrlYoutube,t+"//www.youtube.com/embed/$1"+n):e.match(reUrlVimeo)&&(e=e.replace(reUrlVimeo,t+"//player.vimeo.com/video/$2"+n)),this.selectionRestore();var i=this.getBlock()||this.getCurrent();i?$(i).after(e):this.insertHtmlAdvanced(e,!1),this.sync(),this.modalClose()},linkShow:function(){this.selectionSave();var e=$.proxy(function(){if(this.opts.predefinedLinks!==!1){this.predefinedLinksStorage={};var e=this;$.getJSON(this.opts.predefinedLinks,function(t){var n=$("#redactor-predefined-links");n.html(""),$.each(t,function(t,i){e.predefinedLinksStorage[t]=i,n.append($("<option>").val(t).html(i.name))}),n.on("change",function(){var t=$(this).val(),n="",i="";0!=t&&(n=e.predefinedLinksStorage[t].name,i=e.predefinedLinksStorage[t].url),$("#redactor_link_url").val(i),$("#redactor_link_url_text").val(n)}),n.show()})}this.insert_link_node=!1;var t=this.getSelection(),n="",i="",r="",o=this.getParent(),s=$(o).parent().get(0);s&&"A"===s.tagName&&(o=s),o&&"A"===o.tagName?(n=o.href,i=$(o).text(),r=o.target,this.insert_link_node=o):i=t.toString(),$("#redactor_link_url_text").val(i);var a=self.location.href.replace(/\/$/i,"");if(n=n.replace(a,""),n=n.replace(/^\/#/,"#"),n=n.replace("mailto:",""),this.opts.linkProtocol===!1){var l=new RegExp("^(http|ftp|https)://"+self.location.host,"i");n=n.replace(l,"")}$("#redactor_link_url").val(n),"_blank"===r&&$("#redactor_link_blank").prop("checked",!0),this.linkInsertPressed=!1,$("#redactor_insert_link_btn").on("click",$.proxy(this.linkProcess,this)),setTimeout(function(){$("#redactor_link_url").focus()},200)},this);this.modalInit(this.opts.curLang.link,this.opts.modal_link,460,e)},linkProcess:function(){if(!this.linkInsertPressed){this.linkInsertPressed=!0;var e="",t="",n=$("#redactor_link_url").val(),i=$("#redactor_link_url_text").val();if(-1!=n.search("@")&&/(http|ftp|https):\/\//i.test(n)===!1)n="mailto:"+n;else if(0!=n.search("#")){$("#redactor_link_blank").prop("checked")&&(e=' target="_blank"',t="_blank");var r="((xn--)?[a-z0-9]+(-[a-z0-9]+)*.)+[a-z]{2,}",o=new RegExp("^(http|ftp|https)://"+r,"i"),s=new RegExp("^"+r,"i");-1==n.search(o)&&0==n.search(s)&&this.opts.linkProtocol&&(n=this.opts.linkProtocol+n)}i=i.replace(/<|>/g,"");var a="&nbsp;";this.browser("mozilla")&&(a="&nbsp;"),this.linkInsert('<a href="'+n+'"'+e+">"+i+"</a>"+a,$.trim(i),n,t)}},linkInsert:function(e,t,n,i){if(this.selectionRestore(),""!==t){if(this.insert_link_node)this.bufferSet(),$(this.insert_link_node).text(t).attr("href",n),""!==i?$(this.insert_link_node).attr("target",i):$(this.insert_link_node).removeAttr("target");else{var r=$(e).addClass("redactor-added-link");this.exec("inserthtml",this.outerHtml(r),!1);var n=this.$editor.find("a.redactor-added-link");n.removeAttr("style").removeClass("redactor-added-link").each(function(){""==this.className&&$(this).removeAttr("class")})}this.sync()}setTimeout($.proxy(function(){this.opts.observeLinks&&this.observeLinks()},this),5),this.modalClose()},fileShow:function(){this.selectionSave();var e=$.proxy(function(){var e=this.getSelection(),t="";t=this.oldIE()?e.text:e.toString(),$("#redactor_filename").val(t),this.isMobile()||this.isIPad()||this.draguploadInit("#redactor_file",{url:this.opts.fileUpload,uploadFields:this.opts.uploadFields,success:$.proxy(this.fileCallback,this),error:$.proxy(function(e,t){this.callback("fileUploadError",t)},this),uploadParam:this.opts.fileUploadParam}),this.uploadInit("redactor_file",{auto:!0,url:this.opts.fileUpload,success:$.proxy(this.fileCallback,this),error:$.proxy(function(e,t){this.callback("fileUploadError",t)},this)})},this);this.modalInit(this.opts.curLang.file,this.opts.modal_file,500,e)},fileCallback:function(e){if(this.selectionRestore(),e!==!1){var t=$("#redactor_filename").val();""===t&&(t=e.filename);var n='<a href="'+e.filelink+'" id="filelink-marker">'+t+"</a>";this.browser("webkit")&&this.window.chrome&&(n+="&nbsp;"),this.execCommand("inserthtml",n,!1);var i=$(this.$editor.find("a#filelink-marker"));0!=i.size()?i.removeAttr("id"):i=!1,this.sync(),this.callback("fileUpload",i,e)}this.modalClose()},imageShow:function(){this.selectionSave();var e=$.proxy(function(){this.opts.imageGetJson?$.getJSON(this.opts.imageGetJson,$.proxy(function(e){var t={},n=0;$.each(e,$.proxy(function(e,i){"undefined"!=typeof i.folder&&(n++,t[i.folder]=n)},this));var i=!1;if($.each(e,$.proxy(function(e,n){var r="";"undefined"!=typeof n.title&&(r=n.title);var o=0;$.isEmptyObject(t)||"undefined"==typeof n.folder||(o=t[n.folder],i===!1&&(i=".redactorfolder"+o));var s=$('<img src="'+n.thumb+'" class="redactorfolder redactorfolder'+o+'" rel="'+n.image+'" title="'+r+'" />');$("#redactor_image_box").append(s),$(s).click($.proxy(this.imageThumbClick,this))},this)),!$.isEmptyObject(t)){$(".redactorfolder").hide(),$(i).show();var r=function(e){$(".redactorfolder").hide(),$(".redactorfolder"+$(e.target).val()).show()},o=$('<select id="redactor_image_box_select">');$.each(t,function(e,t){o.append($('<option value="'+t+'">'+e+"</option>"))}),$("#redactor_image_box").before(o),o.change(r)}},this)):$("#redactor-tab-control-2").remove(),this.opts.imageUpload||this.opts.s3?(this.isMobile()||this.isIPad()||this.opts.s3!==!1||$("#redactor_file").length&&this.draguploadInit("#redactor_file",{url:this.opts.imageUpload,uploadFields:this.opts.uploadFields,success:$.proxy(this.imageCallback,this),error:$.proxy(function(e,t){this.callback("imageUploadError",t)},this),uploadParam:this.opts.imageUploadParam}),this.opts.s3===!1?this.uploadInit("redactor_file",{auto:!0,url:this.opts.imageUpload,success:$.proxy(this.imageCallback,this),error:$.proxy(function(e,t){this.callback("imageUploadError",t)},this)}):$("#redactor_file").on("change.redactor",$.proxy(this.s3handleFileSelect,this))):($(".redactor_tab").hide(),this.opts.imageGetJson?($("#redactor-tab-control-1").remove(),$("#redactor-tab-control-2").addClass("redactor_tabs_act"),$("#redactor_tab2").show()):($("#redactor_tabs").remove(),$("#redactor_tab3").show())),this.opts.imageTabLink||!this.opts.imageUpload&&!this.opts.imageGetJson||$("#redactor-tab-control-3").hide(),$("#redactor_upload_btn").click($.proxy(this.imageCallbackLink,this)),this.opts.imageUpload||this.opts.imageGetJson||setTimeout(function(){$("#redactor_file_link").focus()},200)},this);this.modalInit(this.opts.curLang.image,this.opts.modal_image,610,e)},imageEdit:function(e){var t=e,n=t.parent().parent(),i=$.proxy(function(){$("#redactor_file_alt").val(t.attr("alt")),$("#redactor_image_edit_src").attr("href",t.attr("src")),$("#redactor_form_image_align").val("block"==t.css("display")&&"none"==t.css("float")?"center":t.css("float")),"A"===$(n).get(0).tagName&&($("#redactor_file_link").val($(n).attr("href")),"_blank"==$(n).attr("target")&&$("#redactor_link_blank").prop("checked",!0)),$("#redactor_image_delete_btn").click($.proxy(function(){this.imageRemove(t)},this)),$("#redactorSaveBtn").click($.proxy(function(){this.imageSave(t)},this))},this);this.modalInit(this.opts.curLang.edit,this.opts.modal_image_edit,380,i)},imageRemove:function(e){var t=$(e).parent().parent(),n=$(e).parent(),i=!1;t.length&&"A"===t[0].tagName?(i=!0,$(t).remove()):n.length&&"A"===n[0].tagName?(i=!0,$(n).remove()):$(e).remove(),n.length&&"P"===n[0].tagName&&(this.focusWithSaveScroll(),i===!1&&this.selectionStart(n)),this.callback("imageDelete",e),this.modalClose(),this.sync()},imageSave:function(e){this.imageResizeHide(!1);var t=$(e),n=t.parent();t.attr("alt",$("#redactor_file_alt").val());var i=$("#redactor_form_image_align").val(),r="";"left"===i?(r="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0",t.css({"float":"left",margin:r})):"right"===i?(r="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin,t.css({"float":"right",margin:r})):t.css("center"===i?{"float":"",display:"block",margin:"auto"}:{"float":"",display:"",margin:""});var o=$.trim($("#redactor_file_link").val());if(""!==o){var s=!1;if($("#redactor_link_blank").prop("checked")&&(s=!0),"A"!==n.get(0).tagName){var a=$('<a href="'+o+'">'+this.outerHtml(e)+"</a>");s&&a.attr("target","_blank"),t.replaceWith(a)}else n.attr("href",o),s?n.attr("target","_blank"):n.removeAttr("target")}else"A"===n.get(0).tagName&&n.replaceWith(this.outerHtml(e));this.modalClose(),this.observeImages(),this.sync()},imageResizeHide:function(e){if(e!==!1&&0!=$(e.target).parent().size()&&"redactor-image-box"===$(e.target).parent()[0].id)return!1;var t=this.$editor.find("#redactor-image-box");return 0==t.size()?!1:(this.$editor.find("#redactor-image-editter, #redactor-image-resizer").remove(),t.find("img").css({marginTop:t[0].style.marginTop,marginBottom:t[0].style.marginBottom,marginLeft:t[0].style.marginLeft,marginRight:t[0].style.marginRight}),t.css("margin",""),t.find("img").css("opacity",""),t.replaceWith(function(){return $(this).contents()}),$(document).off("click.redactor-image-resize-hide"),this.$editor.off("click.redactor-image-resize-hide"),this.$editor.off("keydown.redactor-image-delete"),void this.sync())},imageResize:function(e){var t=$(e);t.on("mousedown",$.proxy(function(){this.imageResizeHide(!1)},this)),t.on("dragstart",$.proxy(function(){this.$editor.on("drop.redactor-image-inside-drop",$.proxy(function(){setTimeout($.proxy(function(){this.observeImages(),this.$editor.off("drop.redactor-image-inside-drop"),this.sync()},this),1)},this))},this)),t.on("click",$.proxy(function(){if(0!=this.$editor.find("#redactor-image-box").size())return!1;var e,n,i=t.width()/t.height(),r=20,o=this.imageResizeControls(t),s=!1;o!==!1&&(o.on("mousedown",function(r){s=!0,r.preventDefault(),i=t.width()/t.height(),e=Math.round(r.pageX-t.eq(0).offset().left),n=Math.round(r.pageY-t.eq(0).offset().top)}),$(this.document.body).on("mousemove",$.proxy(function(o){if(s){var a=(Math.round(o.pageX-t.eq(0).offset().left)-e,Math.round(o.pageY-t.eq(0).offset().top)-n),l=t.height(),c=parseInt(l,10)+a,u=Math.round(c*i);u>r&&(t.width(u),this.imageEditter.css(100>u?{marginTop:"-7px",marginLeft:"-13px",fontSize:"9px",padding:"3px 5px"}:{marginTop:"-11px",marginLeft:"-18px",fontSize:"11px",padding:"7px 10px"})),e=Math.round(o.pageX-t.eq(0).offset().left),n=Math.round(o.pageY-t.eq(0).offset().top),this.sync()}},this)).on("mouseup",function(){s=!1})),this.$editor.on("keydown.redactor-image-delete",$.proxy(function(e){var n=e.which;(this.keyCode.BACKSPACE==n||this.keyCode.DELETE==n)&&(this.bufferSet(!1),this.imageResizeHide(!1),this.imageRemove(t))},this)),$(document).on("click.redactor-image-resize-hide",$.proxy(this.imageResizeHide,this)),this.$editor.on("click.redactor-image-resize-hide",$.proxy(this.imageResizeHide,this))},this))},imageResizeControls:function(e){var t=$('<span id="redactor-image-box" data-redactor="verified">');if(t.css({position:"relative",display:"inline-block",lineHeight:0,outline:"1px dashed rgba(0, 0, 0, .6)","float":e.css("float")}),t.attr("contenteditable",!1),"auto"!=e[0].style.margin?(t.css({marginTop:e[0].style.marginTop,marginBottom:e[0].style.marginBottom,marginLeft:e[0].style.marginLeft,marginRight:e[0].style.marginRight}),e.css("margin","")):t.css({display:"block",margin:"auto"}),e.css("opacity",.5).after(t),this.imageEditter=$('<span id="redactor-image-editter" data-redactor="verified">'+this.opts.curLang.edit+"</span>"),this.imageEditter.css({position:"absolute",zIndex:5,top:"50%",left:"50%",marginTop:"-11px",marginLeft:"-18px",lineHeight:1,backgroundColor:"#000",color:"#fff",fontSize:"11px",padding:"7px 10px",cursor:"pointer"}),this.imageEditter.attr("contenteditable",!1),this.imageEditter.on("click",$.proxy(function(){this.imageEdit(e)},this)),t.append(this.imageEditter),this.opts.imageResizable){var n=$('<span id="redactor-image-resizer" data-redactor="verified"></span>');return n.css({position:"absolute",zIndex:2,lineHeight:1,cursor:"nw-resize",bottom:"-4px",right:"-5px",border:"1px solid #fff",backgroundColor:"#000",width:"8px",height:"8px"}),n.attr("contenteditable",!1),t.append(n),t.append(e),n}return t.append(e),!1},imageThumbClick:function(e){var t='<img id="image-marker" src="'+$(e.target).attr("rel")+'" alt="'+$(e.target).attr("title")+'" />',n=this.getParent();this.opts.paragraphy&&0==$(n).closest("li").size()&&(t="<p>"+t+"</p>"),this.imageInsert(t,!0)},imageCallbackLink:function(){var e=$("#redactor_file_link").val();if(""!==e){var t='<img id="image-marker" src="'+e+'" />';this.opts.linebreaks===!1&&(t="<p>"+t+"</p>"),this.imageInsert(t,!0)}else this.modalClose()},imageCallback:function(e){this.imageInsert(e)},imageInsert:function(e,t){if(this.selectionRestore(),e!==!1){var n="";if(t!==!0){n='<img id="image-marker" src="'+e.filelink+'" />';var i=this.getParent();this.opts.paragraphy&&0==$(i).closest("li").size()&&(n="<p>"+n+"</p>")}else n=e;this.execCommand("inserthtml",n,!1);var r=$(this.$editor.find("img#image-marker"));r.length?r.removeAttr("id"):r=!1,this.sync(),t!==!0&&this.callback("imageUpload",r,e)}this.modalClose(),this.observeImages()},buildProgressBar:function(){0==$("#redactor-progress").size()&&(this.$progressBar=$('<div id="redactor-progress"><span></span></div>'),$(document.body).append(this.$progressBar))},showProgressBar:function(){this.buildProgressBar(),$("#redactor-progress").fadeIn()},hideProgressBar:function(){$("#redactor-progress").fadeOut(1500)},modalTemplatesInit:function(){$.extend(this.opts,{modal_file:String()+'<section id="redactor-modal-file-insert"><form id="redactorUploadFileForm" method="post" action="" enctype="multipart/form-data"><label>'+this.opts.curLang.filename+'</label><input type="text" id="redactor_filename" class="redactor_input" /><div style="margin-top: 7px;"><input type="file" id="redactor_file" name="'+this.opts.fileUploadParam+'" /></div></form></section>',modal_image_edit:String()+'<section id="redactor-modal-image-edit"><label>'+this.opts.curLang.title+'</label><input type="text" id="redactor_file_alt" class="redactor_input" /><label>'+this.opts.curLang.link+'</label><input type="text" id="redactor_file_link" class="redactor_input" /><label><input type="checkbox" id="redactor_link_blank"> '+this.opts.curLang.link_new_tab+"</label><label>"+this.opts.curLang.image_position+'</label><select id="redactor_form_image_align"><option value="none">'+this.opts.curLang.none+'</option><option value="left">'+this.opts.curLang.left+'</option><option value="center">'+this.opts.curLang.center+'</option><option value="right">'+this.opts.curLang.right+'</option></select></section><footer><button id="redactor_image_delete_btn" class="redactor_modal_btn redactor_modal_delete_btn">'+this.opts.curLang._delete+'</button><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><button id="redactorSaveBtn" class="redactor_modal_btn redactor_modal_action_btn">'+this.opts.curLang.save+"</button></footer>",modal_image:String()+'<section id="redactor-modal-image-insert"><div id="redactor_tabs"><a href="#" id="redactor-tab-control-1" class="redactor_tabs_act">'+this.opts.curLang.upload+'</a><a href="#" id="redactor-tab-control-2">'+this.opts.curLang.choose+'</a><a href="#" id="redactor-tab-control-3">'+this.opts.curLang.link+'</a></div><form id="redactorInsertImageForm" method="post" action="" enctype="multipart/form-data"><div id="redactor_tab1" class="redactor_tab"><input type="file" id="redactor_file" name="'+this.opts.imageUploadParam+'" /></div><div id="redactor_tab2" class="redactor_tab" style="display: none;"><div id="redactor_image_box"></div></div></form><div id="redactor_tab3" class="redactor_tab" style="display: none;"><label>'+this.opts.curLang.image_web_link+'</label><input type="text" name="redactor_file_link" id="redactor_file_link" class="redactor_input"  /><br><br></div></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><button class="redactor_modal_btn redactor_modal_action_btn" id="redactor_upload_btn">'+this.opts.curLang.insert+"</button></footer>",modal_link:String()+'<section id="redactor-modal-link-insert"><select id="redactor-predefined-links" style="width: 99.5%; display: none;"></select><label>URL</label><input type="text" class="redactor_input" id="redactor_link_url" /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input" id="redactor_link_url_text" /><label><input type="checkbox" id="redactor_link_blank"> '+this.opts.curLang.link_new_tab+'</label></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><button id="redactor_insert_link_btn" class="redactor_modal_btn redactor_modal_action_btn">'+this.opts.curLang.insert+"</button></footer>",modal_table:String()+'<section id="redactor-modal-table-insert"><label>'+this.opts.curLang.rows+'</label><input type="text" size="5" value="2" id="redactor_table_rows" /><label>'+this.opts.curLang.columns+'</label><input type="text" size="5" value="3" id="redactor_table_columns" /></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><button id="redactor_insert_table_btn" class="redactor_modal_btn redactor_modal_action_btn">'+this.opts.curLang.insert+"</button></footer>",modal_video:String()+'<section id="redactor-modal-video-insert"><form id="redactorInsertVideoForm"><label>'+this.opts.curLang.video_html_code+'</label><textarea id="redactor_insert_video_area" style="width: 99%; height: 160px;"></textarea></form></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><button id="redactor_insert_video_btn" class="redactor_modal_btn redactor_modal_action_btn">'+this.opts.curLang.insert+"</button></footer>"})},modalInit:function(e,t,n,i){return this.modalSetOverlay(),this.$redactorModalWidth=n,this.$redactorModal=$("#redactor_modal"),this.$redactorModal.length||(this.$redactorModal=$('<div id="redactor_modal" style="display: none;" />'),this.$redactorModal.append($('<div id="redactor_modal_close">&times;</div>')),this.$redactorModal.append($('<header id="redactor_modal_header" />')),this.$redactorModal.append($('<div id="redactor_modal_inner" />')),this.$redactorModal.appendTo(document.body)),$("#redactor_modal_close").on("click",$.proxy(this.modalClose,this)),$(document).on("keyup",$.proxy(this.modalCloseHandler,this)),this.$editor.on("keyup",$.proxy(this.modalCloseHandler,this)),this.modalSetContent(t),this.modalSetTitle(e),this.modalSetDraggable(),this.modalLoadTabs(),this.modalOnCloseButton(),this.modalSetButtonsWidth(),this.saveModalScroll=this.document.body.scrollTop,this.opts.autoresize===!1&&(this.saveModalScroll=this.$editor.scrollTop()),this.isMobile()===!1?this.modalShowOnDesktop():this.modalShowOnMobile(),"function"==typeof i&&i(),setTimeout($.proxy(function(){this.callback("modalOpened",this.$redactorModal)},this),11),$(document).off("focusin.modal"),this.$redactorModal.find("input[type=text]").on("keypress",$.proxy(function(e){13===e.which&&(this.$redactorModal.find(".redactor_modal_action_btn").click(),e.preventDefault())},this)),this.$redactorModal},modalShowOnDesktop:function(){this.$redactorModal.css({position:"fixed",top:"-2000px",left:"50%",width:this.$redactorModalWidth+"px",marginLeft:"-"+this.$redactorModalWidth/2+"px"}).show(),this.modalSaveBodyOveflow=$(document.body).css("overflow"),$(document.body).css("overflow","hidden"),setTimeout($.proxy(function(){var e=this.$redactorModal.outerHeight();this.$redactorModal.css({top:"50%",height:"auto",minHeight:"auto",marginTop:"-"+(e+10)/2+"px"})},this),15)},modalShowOnMobile:function(){this.$redactorModal.css({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",margin:"0",minHeight:"300px"}).show()},modalSetContent:function(e){this.modalcontent=!1,0==e.indexOf("#")?(this.modalcontent=$(e),$("#redactor_modal_inner").empty().append(this.modalcontent.html()),this.modalcontent.html("")):$("#redactor_modal_inner").empty().append(e)},modalSetTitle:function(e){this.$redactorModal.find("#redactor_modal_header").html(e)},modalSetButtonsWidth:function(){var e=this.$redactorModal.find("footer button").not(".redactor_modal_btn_hidden"),t=e.size();t>0&&$(e).css("width",this.$redactorModalWidth/t+"px")},modalOnCloseButton:function(){this.$redactorModal.find(".redactor_btn_modal_close").on("click",$.proxy(this.modalClose,this))},modalSetOverlay:function(){this.opts.modalOverlay&&(this.$redactorModalOverlay=$("#redactor_modal_overlay"),this.$redactorModalOverlay.length||(this.$redactorModalOverlay=$('<div id="redactor_modal_overlay" style="display: none;"></div>'),$("body").prepend(this.$redactorModalOverlay)),this.$redactorModalOverlay.show().on("click",$.proxy(this.modalClose,this)))},modalSetDraggable:function(){"undefined"!=typeof $.fn.draggable&&(this.$redactorModal.draggable({handle:"#redactor_modal_header"}),this.$redactorModal.find("#redactor_modal_header").css("cursor","move"))},modalLoadTabs:function(){var e=$("#redactor_tabs");if(!e.length)return!1;var t=this;e.find("a").each(function(n,i){n++,$(i).on("click",function(i){if(i.preventDefault(),e.find("a").removeClass("redactor_tabs_act"),$(this).addClass("redactor_tabs_act"),$(".redactor_tab").hide(),$("#redactor_tab"+n).show(),$("#redactor_tab_selected").val(n),t.isMobile()===!1){var r=t.$redactorModal.outerHeight();t.$redactorModal.css("margin-top","-"+(r+10)/2+"px")}})})},modalCloseHandler:function(e){return e.keyCode===this.keyCode.ESC?(this.modalClose(),!1):void 0},modalClose:function(){return $("#redactor_modal_close").off("click",this.modalClose),$("#redactor_modal").fadeOut("fast",$.proxy(function(){var e=$("#redactor_modal_inner");this.modalcontent!==!1&&(this.modalcontent.html(e.html()),this.modalcontent=!1),e.html(""),this.opts.modalOverlay&&$("#redactor_modal_overlay").hide().off("click",this.modalClose),$(document).off("keyup",this.modalCloseHandler),this.$editor.off("keyup",this.modalCloseHandler),this.selectionRestore(),this.opts.autoresize&&this.saveModalScroll?$(this.document.body).scrollTop(this.saveModalScroll):this.opts.autoresize===!1&&this.saveModalScroll&&this.$editor.scrollTop(this.saveModalScroll),this.callback("modalClosed")},this)),this.isMobile()===!1&&$(document.body).css("overflow",this.modalSaveBodyOveflow?this.modalSaveBodyOveflow:"visible"),!1},modalSetTab:function(e){$(".redactor_tab").hide(),$("#redactor_tabs").find("a").removeClass("redactor_tabs_act").eq(e-1).addClass("redactor_tabs_act"),$("#redactor_tab"+e).show()},s3handleFileSelect:function(e){for(var t,n=e.target.files,i=0;t=n[i];i++)this.s3uploadFile(t)},s3uploadFile:function(e){this.s3executeOnSignedUrl(e,$.proxy(function(t){this.s3uploadToS3(e,t)},this))},s3executeOnSignedUrl:function(e,t){var n=new XMLHttpRequest,i="?";"-1"!=this.opts.s3.search(/\?/)&&(i="&"),n.open("GET",this.opts.s3+i+"name="+e.name+"&type="+e.type,!0),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined");var r=this;n.onreadystatechange=function(){4==this.readyState&&200==this.status?(r.showProgressBar(),t(decodeURIComponent(this.responseText))):4==this.readyState&&200!=this.status},n.send()},s3createCORSRequest:function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n},s3uploadToS3:function(e,t){var n=this.s3createCORSRequest("PUT",t);n&&(n.onload=$.proxy(function(){if(200==n.status){this.hideProgressBar();var e=t.split("?");if(!e[0])return!1;this.selectionRestore();var i="";i='<img id="image-marker" src="'+e[0]+'" />',this.opts.paragraphy&&(i="<p>"+i+"</p>"),this.execCommand("inserthtml",i,!1);var r=$(this.$editor.find("img#image-marker"));r.length?r.removeAttr("id"):r=!1,this.sync(),this.callback("imageUpload",r,!1),this.modalClose(),this.observeImages()}},this),n.onerror=function(){},n.upload.onprogress=function(){},n.setRequestHeader("Content-Type",e.type),n.setRequestHeader("x-amz-acl","public-read"),n.send(e))},uploadInit:function(e,t){this.uploadOptions={url:!1,success:!1,error:!1,start:!1,trigger:!1,auto:!1,input:!1},$.extend(this.uploadOptions,t);var n=$("#"+e);n.length&&"INPUT"===n[0].tagName?(this.uploadOptions.input=n,this.el=$(n[0].form)):this.el=n,this.element_action=this.el.attr("action"),this.uploadOptions.auto?$(this.uploadOptions.input).change($.proxy(function(e){this.el.submit(function(){return!1}),this.uploadSubmit(e)},this)):this.uploadOptions.trigger&&$("#"+this.uploadOptions.trigger).click($.proxy(this.uploadSubmit,this))},uploadSubmit:function(){this.showProgressBar(),this.uploadForm(this.element,this.uploadFrame())},uploadFrame:function(){this.id="f"+Math.floor(99999*Math.random());var e=this.document.createElement("div"),t='<iframe style="display:none" id="'+this.id+'" name="'+this.id+'"></iframe>';return e.innerHTML=t,$(e).appendTo("body"),this.uploadOptions.start&&this.uploadOptions.start(),$("#"+this.id).load($.proxy(this.uploadLoaded,this)),this.id},uploadForm:function(e,t){if(this.uploadOptions.input){var n="redactorUploadForm"+this.id,i="redactorUploadFile"+this.id;this.form=$('<form  action="'+this.uploadOptions.url+'" method="POST" target="'+t+'" name="'+n+'" id="'+n+'" enctype="multipart/form-data" />'),this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&$.each(this.opts.uploadFields,$.proxy(function(e,t){null!=t&&0===t.toString().indexOf("#")&&(t=$(t).val());var n=$("<input/>",{type:"hidden",name:e,value:t});$(this.form).append(n)},this));var r=this.uploadOptions.input,o=$(r).clone();$(r).attr("id",i).before(o).appendTo(this.form),$(this.form).css("position","absolute").css("top","-2000px").css("left","-2000px").appendTo("body"),this.form.submit()}else e.attr("target",t).attr("method","POST").attr("enctype","multipart/form-data").attr("action",this.uploadOptions.url),this.element.submit()},uploadLoaded:function(){var e,t=$("#"+this.id)[0];if(e=t.contentDocument?t.contentDocument:t.contentWindow?t.contentWindow.document:window.frames[this.id].document,this.uploadOptions.success)if(this.hideProgressBar(),"undefined"!=typeof e){var n=e.body.innerHTML,i=n.match(/\{(.|\n)*\}/)[0];i=i.replace(/^\[/,""),i=i.replace(/\]$/,"");var r=$.parseJSON(i);"undefined"==typeof r.error?this.uploadOptions.success(r):(this.uploadOptions.error(this,r),this.modalClose())}else this.modalClose(),alert("Upload failed!");this.el.attr("action",this.element_action),this.el.attr("target","")},draguploadInit:function(e,t){return this.draguploadOptions=$.extend({url:!1,success:!1,error:!1,preview:!1,uploadFields:!1,text:this.opts.curLang.drop_file_here,atext:this.opts.curLang.or_choose,uploadParam:!1},t),void 0===window.FormData?!1:(this.droparea=$('<div class="redactor_droparea"></div>'),this.dropareabox=$('<div class="redactor_dropareabox">'+this.draguploadOptions.text+"</div>"),this.dropalternative=$('<div class="redactor_dropalternative">'+this.draguploadOptions.atext+"</div>"),this.droparea.append(this.dropareabox),$(e).before(this.droparea),$(e).before(this.dropalternative),this.dropareabox.on("dragover",$.proxy(function(){return this.draguploadOndrag()},this)),this.dropareabox.on("dragleave",$.proxy(function(){return this.draguploadOndragleave()},this)),void(this.dropareabox.get(0).ondrop=$.proxy(function(e){e.preventDefault(),this.dropareabox.removeClass("hover").addClass("drop"),this.showProgressBar(),this.dragUploadAjax(this.draguploadOptions.url,e.dataTransfer.files[0],!1,e,this.draguploadOptions.uploadParam)},this)))},dragUploadAjax:function(e,t,n,i,r){if(!n){var o=$.ajaxSettings.xhr();o.upload&&o.upload.addEventListener("progress",$.proxy(this.uploadProgress,this),!1),$.ajaxSetup({xhr:function(){return o}})}this.callback("drop",i);var s=new FormData;r!==!1?s.append(r,t):s.append("file",t),this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&$.each(this.opts.uploadFields,$.proxy(function(e,t){null!=t&&0===t.toString().indexOf("#")&&(t=$(t).val()),s.append(e,t)},this)),$.ajax({url:e,dataType:"html",data:s,cache:!1,contentType:!1,processData:!1,type:"POST",success:$.proxy(function(e){e=e.replace(/^\[/,""),e=e.replace(/\]$/,"");var t="string"==typeof e?$.parseJSON(e):e;if(this.hideProgressBar(),n){var r=$("<img>");r.attr("src",t.filelink).attr("id","drag-image-marker"),this.insertNodeToCaretPositionFromPoint(i,r[0]);var o=$(this.$editor.find("img#drag-image-marker"));o.length?o.removeAttr("id"):o=!1,this.sync(),this.observeImages(),o&&this.callback("imageUpload",o,t),"undefined"!=typeof t.error&&this.callback("imageUploadError",t)}else"undefined"==typeof t.error?this.draguploadOptions.success(t):(this.draguploadOptions.error(this,t),this.draguploadOptions.success(!1))},this)})},draguploadOndrag:function(){return this.dropareabox.addClass("hover"),!1},draguploadOndragleave:function(){return this.dropareabox.removeClass("hover"),!1},uploadProgress:function(e,t){var n=e.loaded?parseInt(e.loaded/e.total*100,10):e;this.dropareabox.text("Loading "+n+"% "+(t||""))},isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isIPad:function(){return/iPad/.test(navigator.userAgent)},normalize:function(e){return"undefined"==typeof e?0:parseInt(e.replace("px",""),10)},outerHtml:function(e){return $("<div>").append($(e).eq(0).clone()).html()},stripHtml:function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""},isString:function(e){return"[object String]"==Object.prototype.toString.call(e)
},isEmpty:function(e){return e=e.replace(/&#x200b;|<br>|<br\/>|&nbsp;/gi,""),e=e.replace(/\s/g,""),e=e.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),""==e},getInternetExplorerVersion:function(){var e=!1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}return e},isIe11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},browser:function(e){var t=navigator.userAgent.toLowerCase(),n=/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return"version"==e?n[2]:"webkit"==e?"chrome"==n[1]||"webkit"==n[1]:"rv"==n[1]?"msie"==e:"opr"==n[1]?"webkit"==e:e==n[1]},oldIE:function(){return this.browser("msie")&&parseInt(this.browser("version"),10)<9?!0:!1},getFragmentHtml:function(e){var t=e.cloneNode(!0),n=this.document.createElement("div");return n.appendChild(t),n.innerHTML},extractContent:function(){for(var e,t=this.$editor[0],n=this.document.createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n},isParentRedactor:function(e){return e?this.opts.iframe?e:0==$(e).parents("div.redactor_editor").length||$(e).hasClass("redactor_editor")?!1:e:!1},currentOrParentIs:function(e){var t=this.getParent(),n=this.getCurrent();return t&&t.tagName===e?t:n&&n.tagName===e?n:!1},isEndOfElement:function(){var e=this.getBlock(),t=this.getCaretOffset(e),n=$.trim($(e).text()).replace(/\n\r\n/g,""),i=n.length;return t==i?!0:!1},isFocused:function(){var e,t=this.getSelection();return t&&t.rangeCount&&t.rangeCount>0&&(e=t.getRangeAt(0).startContainer),e?this.opts.iframe?this.getCaretOffsetRange().equals()?!this.$editor.is(e):!0:0!=$(e).closest("div.redactor_editor").length:!1},removeEmptyAttr:function(e,t){""==$(e).attr(t)&&$(e).removeAttr(t)},removeFromArrayByValue:function(e,t){for(var n=null;-1!==(n=e.indexOf(t));)e.splice(n,1);return e}},Redactor.prototype.init.prototype=Redactor.prototype,$.Redactor.fn.formatLinkify=function(e,t,n,i,r){for(var o=/(((https?|ftps?):\/\/)|www[.][^\s])(.+?\..+?)([.),]?)(\s|\.\s+|\)|$)/gi,s=/(https?|ftp):\/\//i,a=/(https?:\/\/.*\.(?:png|jpg|jpeg|gif))/gi,l=(this.$editor?this.$editor.get(0):this).childNodes,c=l.length;c--;){var u=l[c];if(3===u.nodeType){var h=u.nodeValue;if(i&&h){var d='<iframe width="500" height="281" src="',p='" frameborder="0" allowfullscreen></iframe>';h.match(reUrlYoutube)?(h=h.replace(reUrlYoutube,d+"//www.youtube.com/embed/$1"+p),$(u).after(h).remove()):h.match(reUrlVimeo)&&(h=h.replace(reUrlVimeo,d+"//player.vimeo.com/video/$2"+p),$(u).after(h).remove())}if(n&&h&&h.match(a)&&(h=h.replace(a,'<img src="$1">'),$(u).after(h).remove()),t&&h&&h.match(o)){var f=h.match(o);for(var c in f){var m=f[c],g=m,v="";null!==m.match(/\s$/)&&(v=" ");var y=e;null!==m.match(s)&&(y=""),g.length>r&&(g=g.substring(0,r)+"..."),g=g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");var b=g.replace("$","$$$");h=h.replace(m,'<a href="'+y+$.trim(m)+'">'+$.trim(b)+"</a>"+v)}$(u).after(h).remove()}}else 1!==u.nodeType||/^(a|button|textarea)$/i.test(u.tagName)||$.Redactor.fn.formatLinkify.call(u,e,t,n,i,r)}}}(jQuery),define("redactor",function(){}),function(){define("dir/richtext",["redactor","bs-form"],function(){return angular.module("schemaForm").directive("richtext",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,i,r){var o,s,a,l,c,u;return c=t.$eval(i.richtext),c.minHeight=c.minHeight||400,c.imageUpload="/admin/file/post",c.wym=!0,c.linebreaks=!0,c.removeComments=!0,u=u=function(n){return e(function(){return t.$apply(function(){return r.$setViewValue(n)})})},l={changeCallback:u},s=i.redactor?t.$eval(i.redactor):{},a=void 0,o=$(n),angular.extend(l,c,s),e(function(){a=o.redactor(l),r.$render()}),r.$render=function(){angular.isDefined(a)&&e(function(){o.redactor("set",r.$viewValue||"")})}}}}])})}.call(this),function(){define("dir/states",["bs-form"],function(){return angular.module("schemaForm").directive("states",["$http",function(e){return{restrict:"AE",scope:!0,template:"<div class='btn-group'>\n	<a ng-repeat=\"cnt in content\" ng-click='toggleState(cnt)' class='btn btn-sm state-btn' title=\"click to toggle between content states (published: green, pending: blue, draft: white)\" ng-class=\"cnt.code\">{{cnt.lang}}</a>\n</div>",link:function(t,n,i){var r;return r=JSON.parse(i.cnt),t.content=JSON.parse(i.cnt),t.toggleState=function(t){var n;return n={id:t.id,lang:t.lang},console.log,e({method:"GET",params:n,url:t.url}).then(function(e){return null!=e.data.code&&(t.code=e.data.code),e.data.error?alert("Error saving. Click edit and save"):void 0})}}}}])})}.call(this),function(){define("app",["angular","ctrl/edit","ng-flow","dir/selectize","dir/geocode","dir/imguploader","dir/richtext","dir/states","bs-form"],function(e,t){var n;return n=e.module("adminApp",["flow","schemaForm"]),e.module("adminApp").controller("EditCtrl",t),n.init=function(){return e.bootstrap(document,["adminApp"])},n})}.call(this),function(){require.config({shim:{angular:{deps:["jquery"],exports:"angular"},"angular-sanitize":["angular"],objectpath:["angular"],selectize:["jquery"],"ng-flow":["angular"],"bs-form":["ng-flow","ui-sortable"],redactor:["jquery"],"ui-sortable":{deps:["jui-sortable"]},"jui-sortable":{deps:["jquery","core"]},"ng-selectize":{deps:["angular","selectize"]}},paths:{angular:"../../components/angular/angular",objectpath:"../../components/ObjectPath/lib/ObjectPath","schema-form":"../../components/angular-schema-form/dist/schema-form-amd","bs-form":"../../components/angular-schema-form/dist/bootstrap-decorator-amd.min","angular-sanitize":"../../components/angular-sanitize/angular-sanitize",tv4:"../../components/tv4/tv4",domReady:"../../components/domReady/domReady",selectize:"../../components/selectize/dist/js/selectize",sifter:"../../components/sifter/sifter",microplugin:"../../components/microplugin/src/microplugin",jquery:"../../components/jquery/dist/jquery",rjs:"../../components/requirejs/require","ng-selectize":"../../components/angular-selectize.js/angular-selectize","ng-flow":"../../components/ng-flow/dist/ng-flow-standalone","ui-sortable":"../../components/angular-ui-sortable/sortable",core:"../../components/jquery-ui/ui/core",widget:"../../components/jquery-ui/ui/widget",mouse:"../../components/jquery-ui/ui/mouse","jui-sortable":"../../components/jquery-ui/ui/sortable",redactor:"./lib/redactor/redactor"}}),require(["./app"],function(e){return e.init()})}.call(this),define("main",function(){});